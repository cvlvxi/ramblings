<!-- vscode-markdown-toc -->
* 1. [Links](#Links)
* 2. [Tooling](#Tooling)
* 3. [Installing](#Installing)
	* 3.1. [Issue ruamel.yaml conflict](#Issueruamel.yamlconflict)
	* 3.2. [venv](#venv)
	* 3.3. [Issue install runner](#Issueinstallrunner)
* 4. [First CWL](#FirstCWL)

<!-- vscode-markdown-toc-config
	numbering=true
	autoSave=true
	/vscode-markdown-toc-config -->
<!-- /vscode-markdown-toc -->

# CWL Intro

<img src="https://imgur.com/tKTmpc1.png"/>

Let's convert one of my crappy pipelines to CWL for funsies

##  1. <a name='Links'></a>Links
- [CommonWL](https://www.commonwl.org/)
- [Github](https://github.com/common-workflow-language/cwltool)


##  2. <a name='Tooling'></a>Tooling 
- Most common tooling is [cwltool](https://github.com/common-workflow-language/cwltool)
- Looks like other flavours exist though in Java, Go etc 

##  3. <a name='Installing'></a>Installing

```
pip install cwltool
```

###  3.1. <a name='Issueruamel.yamlconflict'></a>Issue ruamel.yaml conflict

```bash
pkg_resources.ContextualVersionConflict: (ruamel.yaml 0.16.10 (/path/to/lib/python3.8/site-packages), Requirement.parse('ruamel.yaml<=0.16.5,>=0.12.4'), {'cwltool'})
```

###  3.2. <a name='venv'></a>venv

```
python -m venv cwlenv
```

###  3.3. <a name='Issueinstallrunner'></a>Issue install runner 

Also need to install

```
pip install cwlref-runner
```

##  4. <a name='FirstCWL'></a>First CWL 

- Two files:
	- 1st-tool.cwl
	- echo-job.yml

1st-tool.cwl

```yaml
#!/usr/bin/env cwl-runner

cwlVersion: v1.0
class: CommandLineTool
baseCommand: echo
inputs:
  message:
    type: string
    inputBinding:
      position: 1
outputs: []
```

echo-job.yml

```yaml
message: Hello world!
```

