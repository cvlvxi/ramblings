(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-faa382a8"],{"0538":function(e,t,r){"use strict";var n=r("1c0b"),a=r("861d"),i=[].slice,o={},c=function(e,t,r){if(!(t in o)){for(var n=[],a=0;a<t;a++)n[a]="a["+a+"]";o[t]=Function("C,a","return new C("+n.join(",")+")")}return o[t](e,r)};e.exports=Function.bind||function(e){var t=n(this),r=i.call(arguments,1),o=function(){var n=r.concat(i.call(arguments));return this instanceof o?c(t,n.length,n):t.apply(e,n)};return a(t.prototype)&&(o.prototype=t.prototype),o}},"06c5":function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));r("a630"),r("fb6a"),r("b0c0"),r("d3b7"),r("25f0"),r("3ca3");var n=r("6b75");function a(e,t){if(e){if("string"===typeof e)return Object(n["a"])(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Object(n["a"])(e,t):void 0}}},"07df":function(e,t,r){"use strict";r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){return o})),r.d(t,"d",(function(){return c}));var n="Failed to deduce GL constant from typed array";function a(e){var t=ArrayBuffer.isView(e)?e.constructor:e;switch(t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(n)}}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.clamped,n=void 0===r||r;switch(e){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return n?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function o(e){var t=e.data,r=e.width,n=e.height,a=e.bytesPerPixel,i=void 0===a?4:a,o=e.temp,c=r*i;o=o||new Uint8Array(c);for(var s=0;s<n/2;++s){var u=s*c,f=(n-s-1)*c;o.set(t.subarray(u,u+c)),t.copyWithin(u,f,f+c),t.set(o,f)}}function c(e){for(var t=e.data,r=e.width,n=e.height,a=Math.round(r/2),i=Math.round(n/2),o=new Uint8Array(a*i*4),c=0;c<i;c++)for(var s=0;s<a;s++)for(var u=0;u<4;u++)o[4*(c*a+s)+u]=t[4*(2*c*r+2*s)+u];return{data:o,width:a,height:i}}},"0b1c":function(e,t,r){"use strict";function n(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}r.d(t,"a",(function(){return n}))},"0b25":function(e,t,r){var n=r("a691"),a=r("50c4");e.exports=function(e){if(void 0===e)return 0;var t=n(e),r=a(t);if(t!==r)throw RangeError("Wrong length or index");return r}},1:function(e,t){},"10d1":function(e,t,r){"use strict";var n,a=r("da84"),i=r("e2cc"),o=r("f183"),c=r("6d61"),s=r("acac"),u=r("861d"),f=r("69f3").enforce,l=r("7f9a"),d=!a.ActiveXObject&&"ActiveXObject"in a,h=Object.isExtensible,b=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},v=e.exports=c("WeakMap",b,s);if(l&&d){n=s.getConstructor(b,"WeakMap",!0),o.REQUIRED=!0;var g=v.prototype,y=g["delete"],m=g.has,p=g.get,O=g.set;i(g,{delete:function(e){if(u(e)&&!h(e)){var t=f(this);return t.frozen||(t.frozen=new n),y.call(this,e)||t.frozen["delete"](e)}return y.call(this,e)},has:function(e){if(u(e)&&!h(e)){var t=f(this);return t.frozen||(t.frozen=new n),m.call(this,e)||t.frozen.has(e)}return m.call(this,e)},get:function(e){if(u(e)&&!h(e)){var t=f(this);return t.frozen||(t.frozen=new n),m.call(this,e)?p.call(this,e):t.frozen.get(e)}return p.call(this,e)},set:function(e,t){if(u(e)&&!h(e)){var r=f(this);r.frozen||(r.frozen=new n),m.call(this,e)?O.call(this,e,t):r.frozen.set(e,t)}else O.call(this,e,t);return this}})}},"145e":function(e,t,r){"use strict";var n=r("7b0b"),a=r("23cb"),i=r("50c4"),o=Math.min;e.exports=[].copyWithin||function(e,t){var r=n(this),c=i(r.length),s=a(e,c),u=a(t,c),f=arguments.length>2?arguments[2]:void 0,l=o((void 0===f?c:a(f,c))-u,c-s),d=1;u<s&&s<u+l&&(d=-1,u+=l-1,s+=l-1);while(l-- >0)u in r?r[s]=r[u]:delete r[s],s+=d,u+=d;return r}},"170b":function(e,t,r){"use strict";var n=r("ebb5"),a=r("50c4"),i=r("23cb"),o=r("4840"),c=n.aTypedArray,s=n.exportTypedArrayMethod;s("subarray",(function(e,t){var r=c(this),n=r.length,s=i(e,n);return new(o(r,r.constructor))(r.buffer,r.byteOffset+s*r.BYTES_PER_ELEMENT,a((void 0===t?n:i(t,n))-s))}))},"182d":function(e,t,r){var n=r("f8cd");e.exports=function(e,t){var r=n(e);if(r%t)throw RangeError("Wrong offset");return r}},"19ac":function(e,t,r){"use strict";(function(e){function n(){var t;if("undefined"!==typeof window&&window.performance)t=window.performance.now();else if("undefined"!==typeof e&&e.hrtime){var r=e.hrtime();t=1e3*r[0]+r[1]/1e6}else t=Date.now();return t}r.d(t,"a",(function(){return n}))}).call(this,r("4362"))},"1da1":function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));r("d3b7");function n(e,t,r,n,a,i,o){try{var c=e[i](o),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,a)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(a,i){var o=e.apply(t,r);function c(e){n(o,a,i,c,s,"next",e)}function s(e){n(o,a,i,c,s,"throw",e)}c(void 0)}))}}},"1e88":function(e,t,r){"use strict";(function(e){var t=r("26b5"),n=r("83a9"),a=r("3f90");function i(e){return e.luma=e.luma||{},e.luma.polyfilled||(Object(t["a"])(e),c(e),u(e,a["b"]),s(e,{target:e.luma,target2:e}),e.luma.polyfilled=!0),e}var o="undefined"!==typeof e?e:window;function c(e){e.luma.extensions={};var t=e.getSupportedExtensions()||[],r=!0,n=!1,a=void 0;try{for(var i,o=t[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var c=i.value;e.luma[c]=e.getExtension(c)}}catch(s){n=!0,a=s}finally{try{r||null==o["return"]||o["return"]()}finally{if(n)throw a}}}function s(e,t){var r=t.target,n=t.target2;Object.keys(a["a"]).forEach((function(t){if("function"===typeof a["a"][t]){var i=e[t]?e[t].bind(e):function(){},o=a["a"][t].bind(null,e,i);r[t]=o,n[t]=o}}))}function u(e,t){var r=!0,n=!1,a=void 0;try{for(var i,o=Object.getOwnPropertyNames(t)[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var c=i.value;"overrides"!==c&&f(e,{extension:c,target:e.luma,target2:e})}}catch(s){n=!0,a=s}finally{try{r||null==o["return"]||o["return"]()}finally{if(n)throw a}}}function f(e,t){var r=t.extension,i=t.target,o=t.target2,c=a["b"][r];Object(n["a"])(c);for(var s=c.meta,u=void 0===s?{}:s,f=u.suffix,l=void 0===f?"":f,d=e.getExtension(r),h=function(){var t=v[b],r="".concat(t).concat(l),n=null;"meta"===t||"function"===typeof e[t]||(d&&"function"===typeof d[r]?n=function(){return d[r].apply(d,arguments)}:"function"===typeof c[t]&&(n=c[t].bind(i))),n&&(i[t]=n,o[t]=n)},b=0,v=Object.keys(c);b<v.length;b++)h()}o.polyfillContext=i}).call(this,r("c8ba"))},2155:function(e,t,r){"use strict";var n=r("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.isMobile=c,t["default"]=s;var a=r("8d66"),i=n(r("b970")),o=n(r("d79c"));function c(){return"undefined"!==typeof a.window.orientation}function s(e){if(!e&&!(0,i["default"])())return"Node";if((0,o["default"])(e))return"Electron";var t="undefined"!==typeof navigator?navigator:{},r=e||t.userAgent||"";if(r.indexOf("Edge")>-1)return"Edge";var n=-1!==r.indexOf("MSIE "),c=-1!==r.indexOf("Trident/");return n||c?"IE":a.window.chrome?"Chrome":a.window.safari?"Safari":a.window.mozInnerScreenX?"Firefox":"Unknown"}},"219c":function(e,t,r){"use strict";var n=r("ebb5"),a=n.aTypedArray,i=n.exportTypedArrayMethod,o=[].sort;i("sort",(function(e){return o.call(a(this),e)}))},"234b":function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return a}));var n=r("53ca");function a(t){if("undefined"!==typeof window&&"object"===Object(n["a"])(window.process)&&"renderer"===window.process.type)return!0;if("undefined"!==typeof e&&"object"===Object(n["a"])(e.versions)&&Boolean(e.versions.electron))return!0;var r="object"===("undefined"===typeof navigator?"undefined":Object(n["a"])(navigator))&&"string"===typeof navigator.userAgent&&navigator.userAgent,a=t||r;return!!(a&&a.indexOf("Electron")>=0)}}).call(this,r("4362"))},"257e":function(e,t,r){"use strict";function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}r.d(t,"a",(function(){return n}))},"25a1":function(e,t,r){"use strict";var n=r("ebb5"),a=r("d58f").right,i=n.aTypedArray,o=n.exportTypedArrayMethod;o("reduceRight",(function(e){return a(i(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}))},"262e":function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r("b380");function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Object(n["a"])(e,t)}},"26b5":function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r("c526"),a={};function i(e){n["global"].console&&n["global"].console.error&&n["global"].console.error(e)}function o(e){n["global"].console&&n["global"].console.log&&n["global"].console.log(e)}function c(e,t){a[e]=!0,void 0!==t&&i(t)}function s(e){var t=e.getError;e.getError=function(){var r;do{r=t.apply(e),0!==r&&(a[r]=!0)}while(0!==r);for(r in a)if(a[r])return delete a[r],parseInt(r,10);return 0}}var u=function e(t){var r=t.gl;this.ext=t,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(t.maxVertexAttribs);for(var n=0;n<this.attribs.length;n++){var a=new e.VertexAttrib(r);this.attribs[n]=a}this.maxAttrib=0};u.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()},u.VertexAttrib.prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};var f=function(e){var t=this;this.gl=e,s(e);var r=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(e){return e===t.VERTEX_ARRAY_BINDING_OES?t.currentVertexArrayObject===t.defaultVertexArrayObject?null:t.currentVertexArrayObject:r.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(e){var n=t.currentVertexArrayObject;n.maxAttrib=Math.max(n.maxAttrib,e);var a=n.attribs[e];return a.enabled=!0,r.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(e){var n=t.currentVertexArrayObject;n.maxAttrib=Math.max(n.maxAttrib,e);var a=n.attribs[e];return a.enabled=!1,r.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(e,n){switch(e){case 34962:t.currentArrayBuffer=n;break;case 34963:t.currentVertexArrayObject.elementArrayBuffer=n;break;default:}return r.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(e,n){var a=t.currentVertexArrayObject,i=a.attribs[e];switch(n){case 34975:return i.buffer;case 34338:return i.enabled;case 34339:return i.size;case 34340:return i.stride;case 34341:return i.type;case 34922:return i.normalized;default:return r.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(e,n,a,i,o,c){var s=t.currentVertexArrayObject;s.maxAttrib=Math.max(s.maxAttrib,e);var u=s.attribs[e];return u.buffer=t.currentArrayBuffer,u.size=n,u.type=a,u.normalized=i,u.stride=o,u.offset=c,u.recache(),r.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",(function(){o("OESVertexArrayObject emulation library context restored"),t.reset_()}),!0),this.reset_()};function l(e){if("function"!==typeof e.createVertexArray){var t=e.getSupportedExtensions;e.getSupportedExtensions=function(){var e=t.call(this)||[];return e.indexOf("OES_vertex_array_object")<0&&e.push("OES_vertex_array_object"),e};var r=e.getExtension;e.getExtension=function(t){var n=r.call(this,t);return n||("OES_vertex_array_object"!==t?null:(e.__OESVertexArrayObject||(this.__OESVertexArrayObject=new f(this)),this.__OESVertexArrayObject))}}}f.prototype.VERTEX_ARRAY_BINDING_OES=34229,f.prototype.reset_=function(){var e=void 0!==this.vertexArrayObjects;if(e)for(var t=0;t<this.vertexArrayObjects.length;++t)this.vertexArrayObjects.isAlive=!1;var r=this.gl;this.maxVertexAttribs=r.getParameter(34921),this.defaultVertexArrayObject=new u(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},f.prototype.createVertexArrayOES=function(){var e=new u(this);return this.vertexArrayObjects.push(e),e},f.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)},f.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof u&&e.hasBeenBound&&e.ext===this)},f.prototype.bindVertexArrayOES=function(e){var t=this.gl;if(!e||e.isAlive){var r=this.original,n=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;var a=this.currentVertexArrayObject;if(n!==a){n&&a.elementArrayBuffer===n.elementArrayBuffer||r.bindBuffer.call(t,34963,a.elementArrayBuffer);for(var i=this.currentArrayBuffer,o=Math.max(n?n.maxAttrib:0,a.maxAttrib),s=0;s<=o;s++){var u=a.attribs[s],f=n?n.attribs[s]:null;if(n&&u.enabled===f.enabled||(u.enabled?r.enableVertexAttribArray.call(t,s):r.disableVertexAttribArray.call(t,s)),u.enabled){var l=!1;n&&u.buffer===f.buffer||(i!==u.buffer&&(r.bindBuffer.call(t,34962,u.buffer),i=u.buffer),l=!0),(l||u.cached!==f.cached)&&r.vertexAttribPointer.call(t,s,u.size,u.type,u.normalized,u.stride,u.offset)}}this.currentArrayBuffer!==i&&r.bindBuffer.call(t,34962,this.currentArrayBuffer)}}else c(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject")}},2909:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r("6b75");function a(e){if(Array.isArray(e))return Object(n["a"])(e)}r("a4d3"),r("e01a"),r("d28b"),r("a630"),r("d3b7"),r("3ca3"),r("ddb0");function i(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}var o=r("06c5");function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e){return a(e)||i(e)||Object(o["a"])(e)||c()}},2954:function(e,t,r){"use strict";var n=r("ebb5"),a=r("4840"),i=r("d039"),o=n.aTypedArray,c=n.aTypedArrayConstructor,s=n.exportTypedArrayMethod,u=[].slice,f=i((function(){new Int8Array(1).slice()}));s("slice",(function(e,t){var r=u.call(o(this),e,t),n=a(this,this.constructor),i=0,s=r.length,f=new(c(n))(s);while(s>i)f[i]=r[i++];return f}),f)},"2bd9":function(e,t,r){"use strict";(function(e,n){r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return c}));var a=r("53ca"),i={self:"undefined"!==typeof self&&self,window:"undefined"!==typeof window&&window,global:"undefined"!==typeof e&&e,document:"undefined"!==typeof document&&document,process:"object"===("undefined"===typeof n?"undefined":Object(a["a"])(n))&&n},o=(i.self||i.window||i.global,i.window||i.self||i.global),c=(i.global||i.self||i.window,i.document,i.process||{});console}).call(this,r("c8ba"),r("4362"))},"2c4f":function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r("89e8");function a(e,t,r){var a=r.removedProps,i=void 0===a?{}:a,o=r.deprecatedProps,c=void 0===o?{}:o,s=r.replacedProps,u=void 0===s?{}:s;for(var f in i)if(f in t){var l=i[f],d=l?"".concat(e,".").concat(i[f]):"N/A";n["f"].removed("".concat(e,".").concat(f),d)()}for(var h in c)if(h in t){var b=c[h];n["f"].deprecated("".concat(e,".").concat(h),"".concat(e,".").concat(b))()}var v=null;for(var g in u)if(g in t){var y=u[g];n["f"].deprecated("".concat(e,".").concat(g),"".concat(e,".").concat(y))(),v=v||Object.assign({},t),v[y]=t[g],delete v[g]}return v||t}},"2fc2":function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var n=r("d4ec"),a=r("bee2"),i=r("89e8"),o=r("aed6"),c=r("4945"),s=r("ae79"),u=r("55da"),f=r("0b1c"),l=r("b206"),d="Resource subclass must define virtual methods",h=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(n["a"])(this,e),Object(c["b"])(t);var a=r.id,i=r.userData,o=void 0===i?{}:i;this.gl=t,this.id=a||Object(u["c"])(this.constructor.name),this.userData=o,this._bound=!1,this._handle=r.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}return Object(a["a"])(e,[{key:"toString",value:function(){return"".concat(this.constructor.name,"(").concat(this.id,")")}},{key:"delete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.deleteChildren,r=void 0!==t&&t,n=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,n&&r&&n.filter(Boolean).forEach((function(e){e["delete"]()})),this}},{key:"bind",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!==typeof t?(this._bindHandle(t),this):(this._bound?e=t():(this._bindHandle(this.handle),this._bound=!0,e=t(),this._bound=!1,this._bindHandle(null)),e)}},{key:"unbind",value:function(){this.bind(null)}},{key:"getParameter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object(s["b"])(this.gl,e),Object(f["a"])(e);var r=this.constructor.PARAMETERS||{},n=r[e];if(n){var a=Object(i["e"])(this.gl),o=(!("webgl2"in n)||a)&&(!("extension"in n)||this.gl.getExtension(n.extension));if(!o){var c=n.webgl1,u="webgl2"in n?n.webgl2:n.webgl1,l=a?u:c;return l}}return this._getParameter(e,t)}},{key:"getParameters",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},r=t.parameters,n=t.keys,a=this.constructor.PARAMETERS||{},o=Object(i["e"])(this.gl),c={},u=r||Object.keys(a),f=!0,l=!1,d=void 0;try{for(var h,b=u[Symbol.iterator]();!(f=(h=b.next()).done);f=!0){var v=h.value,g=a[v],y=g&&(!("webgl2"in g)||o)&&(!("extension"in g)||this.gl.getExtension(g.extension));if(y){var m=n?Object(s["a"])(this.gl,v):v;c[m]=this.getParameter(v,e),n&&"GLenum"===g.type&&(c[m]=Object(s["a"])(this.gl,c[m]))}}}catch(p){l=!0,d=p}finally{try{f||null==b["return"]||b["return"]()}finally{if(l)throw d}}return c}},{key:"setParameter",value:function(e,t){e=Object(s["b"])(this.gl,e),Object(f["a"])(e);var r=this.constructor.PARAMETERS||{},n=r[e];if(n){var a=Object(i["e"])(this.gl),o=(!("webgl2"in n)||a)&&(!("extension"in n)||this.gl.getExtension(n.extension));if(!o)throw new Error("Parameter not available on this platform");"GLenum"===n.type&&(t=Object(s["b"])(t))}return this._setParameter(e,t),this}},{key:"setParameters",value:function(e){for(var t in e)this.setParameter(t,e[t]);return this}},{key:"stubRemovedMethods",value:function(e,t,r){return Object(l["a"])(this,e,t,r)}},{key:"initialize",value:function(e){}},{key:"_createHandle",value:function(){throw new Error(d)}},{key:"_deleteHandle",value:function(){throw new Error(d)}},{key:"_bindHandle",value:function(){throw new Error(d)}},{key:"_getOptsFromHandle",value:function(){throw new Error(d)}},{key:"_getParameter",value:function(e,t){throw new Error(d)}},{key:"_setParameter",value:function(e,t){throw new Error(d)}},{key:"_context",value:function(){return this.gl.luma=this.gl.luma||{},this.gl.luma}},{key:"_addStats",value:function(){var e=this.constructor.name,t=o["a"].get("Resource Counts");t.get("Resources Created").incrementCount(),t.get("".concat(e,"s Created")).incrementCount(),t.get("".concat(e,"s Active")).incrementCount()}},{key:"_removeStats",value:function(){var e=this.constructor.name,t=o["a"].get("Resource Counts");t.get("".concat(e,"s Active")).decrementCount()}},{key:"_trackAllocatedMemory",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.constructor.name,r=o["a"].get("Memory Usage");r.get("GPU Memory").addCount(e),r.get("".concat(t," Memory")).addCount(e),this.byteLength=e}},{key:"_trackDeallocatedMemory",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.constructor.name,t=o["a"].get("Memory Usage");t.get("GPU Memory").subtractCount(this.byteLength),t.get("".concat(e," Memory")).subtractCount(this.byteLength),this.byteLength=0}},{key:"handle",get:function(){return this._handle}}]),e}()},3280:function(e,t,r){"use strict";var n=r("ebb5"),a=r("e58c"),i=n.aTypedArray,o=n.exportTypedArrayMethod;o("lastIndexOf",(function(e){return a.apply(i(this),arguments)}))},3410:function(e,t,r){var n=r("23e7"),a=r("d039"),i=r("7b0b"),o=r("e163"),c=r("e177"),s=a((function(){o(1)}));n({target:"Object",stat:!0,forced:s,sham:!c},{getPrototypeOf:function(e){return o(i(e))}})},3835:function(e,t,r){"use strict";function n(e){if(Array.isArray(e))return e}r.d(t,"a",(function(){return c}));r("a4d3"),r("e01a"),r("d28b"),r("d3b7"),r("3ca3"),r("ddb0");function a(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done);n=!0)if(r.push(o.value),t&&r.length===t)break}catch(s){a=!0,i=s}finally{try{n||null==c["return"]||c["return"]()}finally{if(a)throw i}}return r}}var i=r("06c5");function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){return n(e)||a(e,t)||Object(i["a"])(e,t)||o()}},"3a49":function(e,t,r){"use strict";r.d(t,"a",(function(){return ae}));var n,a=r("d4ec"),i=r("bee2"),o=r("99de"),c=r("257e"),s=r("7e84"),u=r("45eb"),f=r("262e"),l=r("2fc2"),d=r("97a3"),h=r("d752"),b=r("ade3"),v=r("89e8"),g=r("9f85"),y=r("0b1c"),m=(n={},Object(b["a"])(n,5126,R.bind(null,"uniform1fv",w,1,B)),Object(b["a"])(n,35664,R.bind(null,"uniform2fv",w,2,B)),Object(b["a"])(n,35665,R.bind(null,"uniform3fv",w,3,B)),Object(b["a"])(n,35666,R.bind(null,"uniform4fv",w,4,B)),Object(b["a"])(n,5124,R.bind(null,"uniform1iv",x,1,B)),Object(b["a"])(n,35667,R.bind(null,"uniform2iv",x,2,B)),Object(b["a"])(n,35668,R.bind(null,"uniform3iv",x,3,B)),Object(b["a"])(n,35669,R.bind(null,"uniform4iv",x,4,B)),Object(b["a"])(n,35670,R.bind(null,"uniform1iv",x,1,B)),Object(b["a"])(n,35671,R.bind(null,"uniform2iv",x,2,B)),Object(b["a"])(n,35672,R.bind(null,"uniform3iv",x,3,B)),Object(b["a"])(n,35673,R.bind(null,"uniform4iv",x,4,B)),Object(b["a"])(n,35674,R.bind(null,"uniformMatrix2fv",w,4,M)),Object(b["a"])(n,35675,R.bind(null,"uniformMatrix3fv",w,9,M)),Object(b["a"])(n,35676,R.bind(null,"uniformMatrix4fv",w,16,M)),Object(b["a"])(n,35678,P),Object(b["a"])(n,35680,P),Object(b["a"])(n,5125,R.bind(null,"uniform1uiv",E,1,B)),Object(b["a"])(n,36294,R.bind(null,"uniform2uiv",E,2,B)),Object(b["a"])(n,36295,R.bind(null,"uniform3uiv",E,3,B)),Object(b["a"])(n,36296,R.bind(null,"uniform4uiv",E,4,B)),Object(b["a"])(n,35685,R.bind(null,"uniformMatrix2x3fv",w,6,M)),Object(b["a"])(n,35686,R.bind(null,"uniformMatrix2x4fv",w,8,M)),Object(b["a"])(n,35687,R.bind(null,"uniformMatrix3x2fv",w,6,M)),Object(b["a"])(n,35688,R.bind(null,"uniformMatrix3x4fv",w,12,M)),Object(b["a"])(n,35689,R.bind(null,"uniformMatrix4x2fv",w,8,M)),Object(b["a"])(n,35690,R.bind(null,"uniformMatrix4x3fv",w,12,M)),Object(b["a"])(n,35679,P),Object(b["a"])(n,35682,P),Object(b["a"])(n,36289,P),Object(b["a"])(n,36292,P),Object(b["a"])(n,36293,P),Object(b["a"])(n,36298,P),Object(b["a"])(n,36299,P),Object(b["a"])(n,36300,P),Object(b["a"])(n,36303,P),Object(b["a"])(n,36306,P),Object(b["a"])(n,36307,P),Object(b["a"])(n,36308,P),Object(b["a"])(n,36311,P),n),p={},O={},j={},_=[0];function A(e,t,r,n){1===t&&"boolean"===typeof e&&(e=e?1:0),Number.isFinite(e)&&(_[0]=e,e=_);var a=e.length;if(a%t&&v["f"].warn("Uniform size should be multiples of ".concat(t),e)(),e instanceof r)return e;var i=n[a];i||(i=new r(a),n[a]=i);for(var o=0;o<a;o++)i[o]=e[o];return i}function w(e,t){return A(e,t,Float32Array,p)}function x(e,t){return A(e,t,Int32Array,O)}function E(e,t){return A(e,t,Uint32Array,j)}function T(e){if("]"!==e[e.length-1])return{name:e,length:1,isArray:!1};var t=/([^[]*)(\[[0-9]+\])?/,r=e.match(t);if(!r||r.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(e));return{name:r[1],length:r[2]||1,isArray:Boolean(r[2])}}function k(e,t,r){var n=m[r.type];if(!n)throw new Error("Unknown GLSL uniform type ".concat(r.type));return n().bind(null,e,t)}function S(e,t,r){for(var n in e){var a=e[n],i=!r||Boolean(r[n]);if(i&&!L(a))throw t=t?"".concat(t," "):"",console.error("".concat(t," Bad uniform ").concat(n),a),new Error("".concat(t," Bad uniform ").concat(n))}return!0}function L(e){return Array.isArray(e)||ArrayBuffer.isView(e)?I(e):!!isFinite(e)||(!0===e||!1===e||(e instanceof d["a"]||(e instanceof g["a"]||e instanceof h["a"]&&Boolean(e.texture))))}function I(e){if(0===e.length)return!1;for(var t=Math.min(e.length,16),r=0;r<t;++r)if(!Number.isFinite(e[r]))return!1;return!0}function F(e,t,r){if(Array.isArray(r)||ArrayBuffer.isView(r))if(e[t])for(var n=e[t],a=0,i=r.length;a<i;++a)n[a]=r[a];else e[t]=r.slice();else e[t]=r}function P(){var e=null;return function(t,r,n){var a=e!==n;return a&&(t.uniform1i(r,n),e=n),a}}function R(e,t,r,n){var a=null,i=null;return function(o,c,s){var u=t(s,r),f=u.length,l=!1;if(null===a)a=new Float32Array(f),i=f,l=!0;else{Object(y["a"])(i===f,"Uniform length cannot change.");for(var d=0;d<f;++d)if(u[d]!==a[d]){l=!0;break}}return l&&(n(o,e,c,u),a.set(u)),l}}function B(e,t,r,n){e[t](r,n)}function M(e,t,r,n){e[t](r,!1,n)}function D(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed",r=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,n=e.match(r);return n?n[1]:t}var C=35632,N=35633;function U(e){switch(e){case C:return"fragment";case N:return"vertex";default:return"unknown type"}}function G(e,t,r,n){for(var a=e.split(/\r?\n/),i={},o={},c=n||D(t)||"(unnamed)",s="".concat(U(r)," shader ").concat(c),u=0;u<a.length;u++){var f=a[u];if(!(f.length<=1)){var l=f.split(":"),d=l[0],h=parseInt(l[2],10);if(isNaN(h))throw new Error("GLSL compilation error in ".concat(s,": ").concat(e));"WARNING"!==d?i[h]=f:o[h]=f}}var b=z(t);return{shaderName:s,errors:V(i,b),warnings:V(o,b)}}function V(e,t){for(var r="",n=0;n<t.length;n++){var a=t[n];if((e[n+3]||e[n+2]||e[n+1])&&(r+="".concat(a,"\n"),e[n+1])){var i=e[n+1],o=i.split(":",3),c=o[0],s=parseInt(o[1],10)||0,u=i.substring(o.join(":").length+1).trim();r+=H("^^^ ".concat(c,": ").concat(u,"\n\n"),s)}}return r}function z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ",n=e.split(/\r?\n/),a=String(n.length+t-1).length;return n.map((function(e,n){var i=n+t,o=String(i).length,c=H(i,a-o);return c+r+e}))}function H(e,t){for(var r="",n=0;n<t;++n)r+=" ";return"".concat(r).concat(e)}var X=r("4945"),W=r("55da"),Y="Shader: GLSL source code must be a JavaScript string",q=function(e){function t(e,r){var n;Object(a["a"])(this,t),Object(X["b"])(e),Object(y["a"])("string"===typeof r.source,Y);var i=D(r.source,null)||r.id||Object(W["c"])("unnamed ".concat(t.getTypeName(r.shaderType)));return n=Object(o["a"])(this,Object(s["a"])(t).call(this,e,{id:i})),n.shaderType=r.shaderType,n.source=r.source,n.initialize(r),n}return Object(f["a"])(t,e),Object(i["a"])(t,null,[{key:"getTypeName",value:function(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return Object(y["a"])(!1),"unknown"}}}]),Object(i["a"])(t,[{key:"initialize",value:function(e){var t=e.source,r=D(t,null);r&&(this.id=Object(W["c"])(r)),this._compile(t)}},{key:"getParameter",value:function(e){return this.gl.getShaderParameter(this.handle,e)}},{key:"toString",value:function(){return"".concat(t.getTypeName(this.shaderType),":").concat(this.id)}},{key:"getName",value:function(){return D(this.source)||"unnamed-shader"}},{key:"getSource",value:function(){return this.gl.getShaderSource(this.handle)}},{key:"getTranslatedSource",value:function(){var e=this.gl.getExtension("WEBGL.debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL.debug_shaders not implemented"}},{key:"_compile",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.source;e.startsWith("#version ")||(e="#version 100\n".concat(e)),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle);var t=this.getParameter(35713);if(!t){var r=this.gl.getShaderInfoLog(this.handle),n=G(r,this.source,this.shaderType,this.id),a=n.shaderName,i=n.errors,o=n.warnings;throw v["f"].error("GLSL compilation errors in ".concat(a,"\n").concat(i))(),v["f"].warn("GLSL compilation warnings in ".concat(a,"\n").concat(o))(),new Error("GLSL compilation errors in ".concat(a))}}},{key:"_deleteHandle",value:function(){this.gl.deleteShader(this.handle)}},{key:"_getOptsFromHandle",value:function(){return{type:this.getParameter(35663),source:this.getSource()}}}]),t}(l["a"]),K=function(e){function t(e,r){return Object(a["a"])(this,t),"string"===typeof r&&(r={source:r}),Object(o["a"])(this,Object(s["a"])(t).call(this,e,Object.assign({},r,{shaderType:35633})))}return Object(f["a"])(t,e),Object(i["a"])(t,[{key:"_createHandle",value:function(){return this.gl.createShader(35633)}}]),t}(q),Q=function(e){function t(e,r){return Object(a["a"])(this,t),"string"===typeof r&&(r={source:r}),Object(o["a"])(this,Object(s["a"])(t).call(this,e,Object.assign({},r,{shaderType:35632})))}return Object(f["a"])(t,e),Object(i["a"])(t,[{key:"_createHandle",value:function(){return this.gl.createShader(35632)}}]),t}(q),J=r("4f61"),$=r("a1e8"),Z=function(){function e(t){Object(a["a"])(this,e),this.id=t.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(t),this._readVaryingsFromProgram(t)}return Object(i["a"])(e,[{key:"getAttributeInfo",value:function(e){var t=Number(e);return Number.isFinite(t)?this.attributeInfosByLocation[t]:this.attributeInfosByName[e]||null}},{key:"getAttributeLocation",value:function(e){var t=this.getAttributeInfo(e);return t?t.location:-1}},{key:"getAttributeAccessor",value:function(e){var t=this.getAttributeInfo(e);return t?t.accessor:null}},{key:"getVaryingInfo",value:function(e){var t=Number(e);return Number.isFinite(t)?this.varyingInfos[t]:this.varyingInfosByName[e]||null}},{key:"getVaryingIndex",value:function(e){var t=this.getVaryingInfo();return t?t.location:-1}},{key:"getVaryingAccessor",value:function(e){var t=this.getVaryingInfo();return t?t.accessor:null}},{key:"_readAttributesFromProgram",value:function(e){for(var t=e.gl,r=t.getProgramParameter(e.handle,35721),n=0;n<r;n++){var a=t.getActiveAttrib(e.handle,n),i=a.name,o=a.type,c=a.size,s=t.getAttribLocation(e.handle,i);s>=0&&this._addAttribute(s,i,o,c)}this.attributeInfos.sort((function(e,t){return e.location-t.location}))}},{key:"_readVaryingsFromProgram",value:function(e){var t=e.gl;if(Object(v["e"])(t)){for(var r=t.getProgramParameter(e.handle,35971),n=0;n<r;n++){var a=t.getTransformFeedbackVarying(e.handle,n),i=a.name,o=a.type,c=a.size;this._addVarying(n,i,o,c)}this.varyingInfos.sort((function(e,t){return e.location-t.location}))}}},{key:"_addAttribute",value:function(e,t,r,n){var a=Object($["a"])(r),i=a.type,o=a.components,c={type:i,size:n*o};this._inferProperties(e,t,c);var s={location:e,name:t,accessor:new J["a"](c)};this.attributeInfos.push(s),this.attributeInfosByLocation[e]=s,this.attributeInfosByName[s.name]=s}},{key:"_inferProperties",value:function(e,t,r){/instance/i.test(t)&&(r.divisor=1)}},{key:"_addVarying",value:function(e,t,r,n){var a=Object($["a"])(r),i=a.type,o=a.components,c=new J["a"]({type:i,size:n*o}),s={location:e,name:t,accessor:c};this.varyingInfos.push(s),this.varyingInfosByName[s.name]=s}}]),e}(),ee=r("ae79"),te=4,re=35981,ne=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"],ae=function(e){function t(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(a["a"])(this,t),r=Object(o["a"])(this,Object(s["a"])(t).call(this,e,n)),r.stubRemovedMethods("Program","v6.0",ne),r._isCached=!1,r.initialize(n),Object.seal(Object(c["a"])(r)),r._setId(n.id),r}return Object(f["a"])(t,e),Object(i["a"])(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.hash,r=e.vs,n=e.fs,a=e.varyings,i=e.bufferMode,o=void 0===i?re:i;return this.hash=t||"",this.vs="string"===typeof r?new K(this.gl,{id:"".concat(e.id,"-vs"),source:r}):r,this.fs="string"===typeof n?new Q(this.gl,{id:"".concat(e.id,"-fs"),source:n}):n,Object(y["a"])(this.vs instanceof K),Object(y["a"])(this.fs instanceof Q),this.uniforms={},this._textureUniforms={},this._texturesRenderable=!0,a&&a.length>0&&(Object(X["a"])(this.gl),this.varyings=a,this.gl.transformFeedbackVaryings(this.handle,a,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new Z(this),this.setProps(e)}},{key:"delete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isCached?this:Object(u["a"])(Object(s["a"])(t.prototype),"delete",this).call(this,e)}},{key:"setProps",value:function(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}},{key:"draw",value:function(e){var t=this,r=e.logPriority,n=e.drawMode,a=void 0===n?4:n,i=e.vertexCount,o=e.offset,c=void 0===o?0:o,s=e.start,u=e.end,f=e.isIndexed,l=void 0!==f&&f,d=e.indexType,h=void 0===d?5123:d,b=e.instanceCount,g=void 0===b?0:b,m=e.isInstanced,p=void 0===m?g>0:m,O=e.vertexArray,j=void 0===O?null:O,_=e.transformFeedback,A=e.framebuffer,w=e.parameters,x=void 0===w?{}:w,E=e.uniforms,T=e.samplers;if((E||T)&&(v["f"].deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(E||{})),v["f"].priority>=r){var k=A?A.id:"default",S="mode=".concat(Object(ee["a"])(this.gl,a)," verts=").concat(i," ")+"instances=".concat(g," indexType=").concat(Object(ee["a"])(this.gl,h)," ")+"isInstanced=".concat(p," isIndexed=").concat(l," ")+"Framebuffer=".concat(k);v["f"].log(r,S)()}return Object(y["a"])(j),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===i||p&&0===g)&&(j.bindForDraw(i,g,(function(){if(void 0!==A&&(x=Object.assign({},x,{framebuffer:A})),_){var e=Object($["c"])(a);_.begin(e)}t._bindTextures(),Object(v["j"])(t.gl,x,(function(){l&&p?t.gl.drawElementsInstanced(a,i,h,c,g):l&&Object(v["e"])(t.gl)&&!isNaN(s)&&!isNaN(u)?t.gl.drawRangeElements(a,s,u,i,h,c):l?t.gl.drawElements(a,i,h,c):p?t.gl.drawArraysInstanced(a,c,i,g):t.gl.drawArrays(a,c,i)})),_&&_.end()})),!0)}},{key:"setUniforms",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var t in v["f"].priority>=2&&S(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle),e){var r=e[t],n=this._uniformSetters[t];if(n){var a=r,i=!1;if(a instanceof h["a"]&&(a=a.texture),a instanceof d["a"])if(i=this.uniforms[t]!==r,i){void 0===n.textureIndex&&(n.textureIndex=this._textureIndexCounter++);var o=a,c=n.textureIndex;o.bind(c),a=c,o.loaded||(this._texturesRenderable=!1),this._textureUniforms[t]=o}else a=n.textureIndex;else this._textureUniforms[t]&&delete this._textureUniforms[t];(n(a)||i)&&F(this.uniforms,t,r)}}return this}},{key:"_areTexturesRenderable",value:function(){if(this._texturesRenderable)return!0;for(var e in this._texturesRenderable=!0,this._textureUniforms){var t=this._textureUniforms[e];this._texturesRenderable=this._texturesRenderable&&t.loaded}return this._texturesRenderable}},{key:"_bindTextures",value:function(){for(var e in this._textureUniforms){var t=this._uniformSetters[e].textureIndex;this._textureUniforms[e].bind(t)}}},{key:"_createHandle",value:function(){return this.gl.createProgram()}},{key:"_deleteHandle",value:function(){this.gl.deleteProgram(this.handle)}},{key:"_getOptionsFromHandle",value:function(e){var t=this.gl.getAttachedShaders(e),r={},n=!0,a=!1,i=void 0;try{for(var o,c=t[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){var s=o.value,u=this.gl.getShaderParameter(this.handle,35663);switch(u){case 35633:r.vs=new K({handle:s});break;case 35632:r.fs=new Q({handle:s});break;default:}}}catch(f){a=!0,i=f}finally{try{n||null==c["return"]||c["return"]()}finally{if(a)throw i}}return r}},{key:"_getParameter",value:function(e){return this.gl.getProgramParameter(this.handle,e)}},{key:"_setId",value:function(e){if(!e){var t=this._getName();this.id=Object(W["c"])(t)}}},{key:"_getName",value:function(){var e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?"".concat(e,"-program"):"program",e}},{key:"_compileAndLink",value:function(){var e=this.gl;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),v["f"].time(te,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),v["f"].timeEnd(te,"linkProgram for ".concat(this._getName()))(),e.debug||v["f"].level>0){var t=e.getProgramParameter(this.handle,35714);if(!t)throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)));e.validateProgram(this.handle);var r=e.getProgramParameter(this.handle,35715);if(!r)throw new Error("Error validating: ".concat(e.getProgramInfoLog(this.handle)))}}},{key:"_readUniformLocationsFromLinkedProgram",value:function(){var e=this.gl;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(var t=0;t<this._uniformCount;t++){var r=this.gl.getActiveUniform(this.handle,t),n=T(r.name),a=n.name,i=n.isArray,o=e.getUniformLocation(this.handle,a);if(this._uniformSetters[a]=k(e,o,r,i),r.size>1)for(var c=0;c<r.size;c++)o=e.getUniformLocation(this.handle,"".concat(a,"[").concat(c,"]")),this._uniformSetters["".concat(a,"[").concat(c,"]")]=k(e,o,r,i)}this._textureIndexCounter=0}},{key:"getActiveUniforms",value:function(e,t){return this.gl.getActiveUniforms(this.handle,e,t)}},{key:"getUniformBlockIndex",value:function(e){return this.gl.getUniformBlockIndex(this.handle,e)}},{key:"getActiveUniformBlockParameter",value:function(e,t){return this.gl.getActiveUniformBlockParameter(this.handle,e,t)}},{key:"uniformBlockBinding",value:function(e,t){this.gl.uniformBlockBinding(this.handle,e,t)}}]),t}(l["a"])},"3a7b":function(e,t,r){"use strict";var n=r("ebb5"),a=r("b727").findIndex,i=n.aTypedArray,o=n.exportTypedArrayMethod;o("findIndex",(function(e){return a(i(this),e,arguments.length>1?arguments[1]:void 0)}))},"3c5d":function(e,t,r){"use strict";var n=r("ebb5"),a=r("50c4"),i=r("182d"),o=r("7b0b"),c=r("d039"),s=n.aTypedArray,u=n.exportTypedArrayMethod,f=c((function(){new Int8Array(1).set({})}));u("set",(function(e){s(this);var t=i(arguments.length>1?arguments[1]:void 0,1),r=this.length,n=o(e),c=a(n.length),u=0;if(c+t>r)throw RangeError("Wrong length");while(u<c)this[t+u]=n[u++]}),f)},"3f90":function(e,t,r){"use strict";r.d(t,"b",(function(){return S})),r.d(t,"a",(function(){return L}));var n,a,i=r("ade3"),o=r("83a9"),c="OES_element_index",s="WEBGL_draw_buffers",u="EXT_disjoint_timer_query",f="EXT_disjoint_timer_query_webgl2",l="EXT_texture_filter_anisotropic",d="WEBGL_debug_renderer_info",h=35723,b=4352,v=36795,g=34047,y=37445,m=37446,p=function(e){return Object(o["g"])(e)?void 0:0},O=(n={},Object(i["a"])(n,3074,(function(e){return Object(o["g"])(e)?void 0:36064})),Object(i["a"])(n,h,(function(e){return Object(o["g"])(e)?void 0:b})),Object(i["a"])(n,35977,p),Object(i["a"])(n,32937,p),Object(i["a"])(n,v,(function(e,t){var r=Object(o["g"])(e)?e.getExtension(f):e.getExtension(u);return r&&r.GPU_DISJOINT_EXT?t(r.GPU_DISJOINT_EXT):0})),Object(i["a"])(n,y,(function(e,t){var r=e.getExtension(d);return t(r&&r.UNMASKED_VENDOR_WEBGL||7936)})),Object(i["a"])(n,m,(function(e,t){var r=e.getExtension(d);return t(r&&r.UNMASKED_RENDERER_WEBGL||7937)})),Object(i["a"])(n,g,(function(e,t){var r=e.luma.extensions[l];return r?t(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1})),Object(i["a"])(n,32883,p),Object(i["a"])(n,35071,p),Object(i["a"])(n,37447,p),Object(i["a"])(n,36063,(function(e,t){if(!Object(o["g"])(e)){var r=e.getExtension(s);return r?t(r.MAX_COLOR_ATTACHMENTS_WEBGL):0}})),Object(i["a"])(n,35379,p),Object(i["a"])(n,35374,p),Object(i["a"])(n,35377,p),Object(i["a"])(n,34852,(function(e){if(!Object(o["g"])(e)){var t=e.getExtension(s);return t?t.MAX_DRAW_BUFFERS_WEBGL:0}})),Object(i["a"])(n,36203,(function(e){return e.getExtension(c)?2147483647:65535})),Object(i["a"])(n,33001,(function(e){return e.getExtension(c)?16777216:65535})),Object(i["a"])(n,33e3,(function(e){return 16777216})),Object(i["a"])(n,37157,p),Object(i["a"])(n,35373,p),Object(i["a"])(n,35657,p),Object(i["a"])(n,36183,p),Object(i["a"])(n,37137,p),Object(i["a"])(n,34045,p),Object(i["a"])(n,35978,p),Object(i["a"])(n,35979,p),Object(i["a"])(n,35968,p),Object(i["a"])(n,35376,p),Object(i["a"])(n,35375,p),Object(i["a"])(n,35659,p),Object(i["a"])(n,37154,p),Object(i["a"])(n,35371,p),Object(i["a"])(n,35658,p),Object(i["a"])(n,35076,p),Object(i["a"])(n,35077,p),Object(i["a"])(n,35380,p),n);function j(e,t,r){var n=O[r],a="function"===typeof n?n(e,t,r):n,i=void 0!==a?a:t(r);return i}var _="OES_vertex_array_object",A="ANGLE_instanced_arrays",w="WEBGL_draw_buffers",x="EXT_disjoint_timer_query",E="EXT_texture_filter_anisotropic",T="VertexArray requires WebGL2 or OES_vertex_array_object extension";function k(e,t){return{webgl2:Object(o["g"])(e),ext:e.getExtension(t)}}var S=(a={},Object(i["a"])(a,_,{meta:{suffix:"OES"},createVertexArray:function(){Object(o["a"])(!1,T)},deleteVertexArray:function(){},bindVertexArray:function(){},isVertexArray:function(){return!1}}),Object(i["a"])(a,A,{meta:{suffix:"ANGLE"},vertexAttribDivisor:function(e,t){Object(o["a"])(0===t,"WebGL instanced rendering not supported")},drawElementsInstanced:function(){},drawArraysInstanced:function(){}}),Object(i["a"])(a,w,{meta:{suffix:"WEBGL"},drawBuffers:function(){Object(o["a"])(!1)}}),Object(i["a"])(a,x,{meta:{suffix:"EXT"},createQuery:function(){Object(o["a"])(!1)},deleteQuery:function(){Object(o["a"])(!1)},beginQuery:function(){Object(o["a"])(!1)},endQuery:function(){},getQuery:function(e,t){return this.getQueryObject(e,t)},getQueryParameter:function(e,t){return this.getQueryObject(e,t)},getQueryObject:function(){}}),a),L={readBuffer:function(e,t,r){Object(o["g"])(e)&&t(r)},getVertexAttrib:function(e,t,r,n){var a,i=k(e,A),o=i.webgl2,c=i.ext;switch(n){case 35069:a=!!o&&void 0;break;case 35070:a=o||c?void 0:0;break;default:}return void 0!==a?a:t(r,n)},getProgramParameter:function(e,t,r,n){if(!Object(o["g"])(e))switch(n){case 35967:return 35981;case 35971:return 0;case 35382:return 0;default:}return t(r,n)},getInternalformatParameter:function(e,t,r,n,a){if(!Object(o["g"])(e))switch(a){case 32937:return new Int32Array([0]);default:}return e.getInternalformatParameter(r,n,a)},getTexParameter:function(e,t,r,n){switch(n){case 34046:var a=e.luma.extensions,i=a[E];n=i&&i.TEXTURE_MAX_ANISOTROPY_EXT||34046;break;default:}return t(r,n)},getParameter:j,hint:function(e,t,r,n){return t(r,n)}}},"3fcc":function(e,t,r){"use strict";var n=r("ebb5"),a=r("b727").map,i=r("4840"),o=n.aTypedArray,c=n.aTypedArrayConstructor,s=n.exportTypedArrayMethod;s("map",(function(e){return a(o(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(c(i(e,e.constructor)))(t)}))}))},4478:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));r("4ae1");var n=r("b380");r("d3b7"),r("25f0");function a(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function i(e,t,r){return i=a()?Reflect.construct:function(e,t,r){var a=[null];a.push.apply(a,t);var i=Function.bind.apply(e,a),o=new i;return r&&Object(n["a"])(o,r.prototype),o},i.apply(null,arguments)}},"45eb":function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));r("e439"),r("5d41");var n=r("7e84");function a(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=Object(n["a"])(e),null===e)break;return e}function i(e,t,r){return i="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=a(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}},i(e,t,r||e)}},4945:function(e,t,r){"use strict";r.d(t,"b",(function(){return c})),r.d(t,"a",(function(){return s}));var n=r("0b1c"),a=r("89e8"),i="Invalid WebGLRenderingContext",o="Requires WebGL2";function c(e){Object(n["a"])(Object(a["d"])(e),i)}function s(e){Object(n["a"])(Object(a["e"])(e),o)}},"4ae1":function(e,t,r){var n=r("23e7"),a=r("d066"),i=r("1c0b"),o=r("825a"),c=r("861d"),s=r("7c73"),u=r("0538"),f=r("d039"),l=a("Reflect","construct"),d=f((function(){function e(){}return!(l((function(){}),[],e)instanceof e)})),h=!f((function(){l((function(){}))})),b=d||h;n({target:"Reflect",stat:!0,forced:b,sham:b},{construct:function(e,t){i(e),o(t);var r=arguments.length<3?e:i(arguments[2]);if(h&&!d)return l(e,t,r);if(e==r){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var n=[null];return n.push.apply(n,t),new(u.apply(e,n))}var a=r.prototype,f=s(c(a)?a:Object.prototype),b=Function.apply.call(e,f,t);return c(b)?b:f}})},"4ea4":function(e,t){function r(e){return e&&e.__esModule?e:{default:e}}e.exports=r},"4f61":function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r("4478"),a=r("d4ec"),i=r("bee2"),o=r("07df"),c=r("0b1c"),s=r("2c4f"),u={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},f={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}},l=function(){function e(){var t=this;Object(a["a"])(this,e);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];n.forEach((function(e){return t._assign(e)})),Object.freeze(this)}return Object(i["a"])(e,null,[{key:"getBytesPerElement",value:function(e){var t=Object(o["c"])(e.type||5126);return t.BYTES_PER_ELEMENT}},{key:"getBytesPerVertex",value:function(e){Object(c["a"])(e.size);var t=Object(o["c"])(e.type||5126);return t.BYTES_PER_ELEMENT*e.size}},{key:"resolve",value:function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return Object(n["a"])(e,[u].concat(r))}}]),Object(i["a"])(e,[{key:"toString",value:function(){return JSON.stringify(this)}},{key:"_assign",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=Object(s["a"])("Accessor",e,f),void 0!==e.type&&(this.type=e.type,5124!==e.type&&5125!==e.type||(this.integer=!0)),void 0!==e.size&&(this.size=e.size),void 0!==e.offset&&(this.offset=e.offset),void 0!==e.stride&&(this.stride=e.stride),void 0!==e.normalized&&(this.normalized=e.normalized),void 0!==e.integer&&(this.integer=e.integer),void 0!==e.divisor&&(this.divisor=e.divisor),void 0!==e.buffer&&(this.buffer=e.buffer),void 0!==e.index&&("boolean"===typeof index?this.index=e.index?1:0:this.index=e.index),void 0!==e.instanced&&(this.divisor=e.instanced?1:0),void 0!==e.isInstanced&&(this.divisor=e.isInstanced?1:0),this}},{key:"BYTES_PER_ELEMENT",get:function(){return e.getBytesPerElement(this)}},{key:"BYTES_PER_VERTEX",get:function(){return e.getBytesPerVertex(this)}}]),e}()},"53ca":function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));r("a4d3"),r("e01a"),r("d28b"),r("d3b7"),r("3ca3"),r("ddb0");function n(e){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}},"55da":function(e,t,r){"use strict";r.d(t,"c",(function(){return i})),r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return c}));var n=r("0b1c"),a={};function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";a[e]=a[e]||1;var t=a[e]++;return"".concat(e,"-").concat(t)}function o(e){return Object(n["a"])("number"===typeof e,"Input must be a number"),e&&0===(e&e-1)}function c(e){var t=!0;for(var r in e){t=!1;break}return t}},"5d41":function(e,t,r){var n=r("23e7"),a=r("861d"),i=r("825a"),o=r("5135"),c=r("06cf"),s=r("e163");function u(e,t){var r,n,f=arguments.length<3?e:arguments[2];return i(e)===f?e[t]:(r=c.f(e,t))?o(r,"value")?r.value:void 0===r.get?void 0:r.get.call(f):a(n=s(e))?u(n,t,f):void 0}n({target:"Reflect",stat:!0},{get:u})},"5f96":function(e,t,r){"use strict";var n=r("ebb5"),a=n.aTypedArray,i=n.exportTypedArrayMethod,o=[].join;i("join",(function(e){return o.apply(a(this),arguments)}))},"60bd":function(e,t,r){"use strict";var n=r("da84"),a=r("ebb5"),i=r("e260"),o=r("b622"),c=o("iterator"),s=n.Uint8Array,u=i.values,f=i.keys,l=i.entries,d=a.aTypedArray,h=a.exportTypedArrayMethod,b=s&&s.prototype[c],v=!!b&&("values"==b.name||void 0==b.name),g=function(){return u.call(d(this))};h("entries",(function(){return l.call(d(this))})),h("keys",(function(){return f.call(d(this))})),h("values",g,!v),h(c,g,!v)},"621a":function(e,t,r){"use strict";var n=r("da84"),a=r("83ab"),i=r("a981"),o=r("9112"),c=r("e2cc"),s=r("d039"),u=r("19aa"),f=r("a691"),l=r("50c4"),d=r("0b25"),h=r("77a7"),b=r("e163"),v=r("d2bb"),g=r("241c").f,y=r("9bf2").f,m=r("81d5"),p=r("d44e"),O=r("69f3"),j=O.get,_=O.set,A="ArrayBuffer",w="DataView",x="prototype",E="Wrong length",T="Wrong index",k=n[A],S=k,L=n[w],I=L&&L[x],F=Object.prototype,P=n.RangeError,R=h.pack,B=h.unpack,M=function(e){return[255&e]},D=function(e){return[255&e,e>>8&255]},C=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},N=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},U=function(e){return R(e,23,4)},G=function(e){return R(e,52,8)},V=function(e,t){y(e[x],t,{get:function(){return j(this)[t]}})},z=function(e,t,r,n){var a=d(r),i=j(e);if(a+t>i.byteLength)throw P(T);var o=j(i.buffer).bytes,c=a+i.byteOffset,s=o.slice(c,c+t);return n?s:s.reverse()},H=function(e,t,r,n,a,i){var o=d(r),c=j(e);if(o+t>c.byteLength)throw P(T);for(var s=j(c.buffer).bytes,u=o+c.byteOffset,f=n(+a),l=0;l<t;l++)s[u+l]=f[i?l:t-l-1]};if(i){if(!s((function(){k(1)}))||!s((function(){new k(-1)}))||s((function(){return new k,new k(1.5),new k(NaN),k.name!=A}))){S=function(e){return u(this,S),new k(d(e))};for(var X,W=S[x]=k[x],Y=g(k),q=0;Y.length>q;)(X=Y[q++])in S||o(S,X,k[X]);W.constructor=S}v&&b(I)!==F&&v(I,F);var K=new L(new S(2)),Q=I.setInt8;K.setInt8(0,2147483648),K.setInt8(1,2147483649),!K.getInt8(0)&&K.getInt8(1)||c(I,{setInt8:function(e,t){Q.call(this,e,t<<24>>24)},setUint8:function(e,t){Q.call(this,e,t<<24>>24)}},{unsafe:!0})}else S=function(e){u(this,S,A);var t=d(e);_(this,{bytes:m.call(new Array(t),0),byteLength:t}),a||(this.byteLength=t)},L=function(e,t,r){u(this,L,w),u(e,S,w);var n=j(e).byteLength,i=f(t);if(i<0||i>n)throw P("Wrong offset");if(r=void 0===r?n-i:l(r),i+r>n)throw P(E);_(this,{buffer:e,byteLength:r,byteOffset:i}),a||(this.buffer=e,this.byteLength=r,this.byteOffset=i)},a&&(V(S,"byteLength"),V(L,"buffer"),V(L,"byteLength"),V(L,"byteOffset")),c(L[x],{getInt8:function(e){return z(this,1,e)[0]<<24>>24},getUint8:function(e){return z(this,1,e)[0]},getInt16:function(e){var t=z(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=z(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return N(z(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return N(z(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return B(z(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return B(z(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){H(this,1,e,M,t)},setUint8:function(e,t){H(this,1,e,M,t)},setInt16:function(e,t){H(this,2,e,D,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){H(this,2,e,D,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){H(this,4,e,C,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){H(this,4,e,C,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){H(this,4,e,U,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){H(this,8,e,G,t,arguments.length>2?arguments[2]:void 0)}});p(S,A),p(L,w),e.exports={ArrayBuffer:S,DataView:L}},"649e":function(e,t,r){"use strict";var n=r("ebb5"),a=r("b727").some,i=n.aTypedArray,o=n.exportTypedArrayMethod;o("some",(function(e){return a(i(this),e,arguments.length>1?arguments[1]:void 0)}))},"6b75":function(e,t,r){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r.d(t,"a",(function(){return n}))},"6d61":function(e,t,r){"use strict";var n=r("23e7"),a=r("da84"),i=r("94ca"),o=r("6eeb"),c=r("f183"),s=r("2266"),u=r("19aa"),f=r("861d"),l=r("d039"),d=r("1c7e"),h=r("d44e"),b=r("7156");e.exports=function(e,t,r){var v=-1!==e.indexOf("Map"),g=-1!==e.indexOf("Weak"),y=v?"set":"add",m=a[e],p=m&&m.prototype,O=m,j={},_=function(e){var t=p[e];o(p,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(g&&!f(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return g&&!f(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(g&&!f(e))&&t.call(this,0===e?0:e)}:function(e,r){return t.call(this,0===e?0:e,r),this})};if(i(e,"function"!=typeof m||!(g||p.forEach&&!l((function(){(new m).entries().next()})))))O=r.getConstructor(t,e,v,y),c.REQUIRED=!0;else if(i(e,!0)){var A=new O,w=A[y](g?{}:-0,1)!=A,x=l((function(){A.has(1)})),E=d((function(e){new m(e)})),T=!g&&l((function(){var e=new m,t=5;while(t--)e[y](t,t);return!e.has(-0)}));E||(O=t((function(t,r){u(t,O,e);var n=b(new m,t,O);return void 0!=r&&s(r,n[y],n,v),n})),O.prototype=p,p.constructor=O),(x||T)&&(_("delete"),_("has"),v&&_("get")),(T||w)&&_(y),g&&p.clear&&delete p.clear}return j[e]=O,n({global:!0,forced:O!=m},j),h(O,e),g||r.setStrong(O,e,v),O}},7037:function(e,t,r){function n(t){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}r("a4d3"),r("e01a"),r("d28b"),r("d3b7"),r("3ca3"),r("ddb0"),e.exports=n},"72f7":function(e,t,r){"use strict";var n=r("ebb5").exportTypedArrayMethod,a=r("d039"),i=r("da84"),o=i.Uint8Array,c=o&&o.prototype||{},s=[].toString,u=[].join;a((function(){s.call({})}))&&(s=function(){return u.call(this)});var f=c.toString!=s;n("toString",s,f)},"735e":function(e,t,r){"use strict";var n=r("ebb5"),a=r("81d5"),i=n.aTypedArray,o=n.exportTypedArrayMethod;o("fill",(function(e){return a.apply(i(this),arguments)}))},"74e8":function(e,t,r){"use strict";var n=r("23e7"),a=r("da84"),i=r("83ab"),o=r("8aa7"),c=r("ebb5"),s=r("621a"),u=r("19aa"),f=r("5c6c"),l=r("9112"),d=r("50c4"),h=r("0b25"),b=r("182d"),v=r("c04e"),g=r("5135"),y=r("f5df"),m=r("861d"),p=r("7c73"),O=r("d2bb"),j=r("241c").f,_=r("a078"),A=r("b727").forEach,w=r("2626"),x=r("9bf2"),E=r("06cf"),T=r("69f3"),k=r("7156"),S=T.get,L=T.set,I=x.f,F=E.f,P=Math.round,R=a.RangeError,B=s.ArrayBuffer,M=s.DataView,D=c.NATIVE_ARRAY_BUFFER_VIEWS,C=c.TYPED_ARRAY_TAG,N=c.TypedArray,U=c.TypedArrayPrototype,G=c.aTypedArrayConstructor,V=c.isTypedArray,z="BYTES_PER_ELEMENT",H="Wrong length",X=function(e,t){var r=0,n=t.length,a=new(G(e))(n);while(n>r)a[r]=t[r++];return a},W=function(e,t){I(e,t,{get:function(){return S(this)[t]}})},Y=function(e){var t;return e instanceof B||"ArrayBuffer"==(t=y(e))||"SharedArrayBuffer"==t},q=function(e,t){return V(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},K=function(e,t){return q(e,t=v(t,!0))?f(2,e[t]):F(e,t)},Q=function(e,t,r){return!(q(e,t=v(t,!0))&&m(r)&&g(r,"value"))||g(r,"get")||g(r,"set")||r.configurable||g(r,"writable")&&!r.writable||g(r,"enumerable")&&!r.enumerable?I(e,t,r):(e[t]=r.value,e)};i?(D||(E.f=K,x.f=Q,W(U,"buffer"),W(U,"byteOffset"),W(U,"byteLength"),W(U,"length")),n({target:"Object",stat:!0,forced:!D},{getOwnPropertyDescriptor:K,defineProperty:Q}),e.exports=function(e,t,r){var i=e.match(/\d+$/)[0]/8,c=e+(r?"Clamped":"")+"Array",s="get"+e,f="set"+e,v=a[c],g=v,y=g&&g.prototype,x={},E=function(e,t){var r=S(e);return r.view[s](t*i+r.byteOffset,!0)},T=function(e,t,n){var a=S(e);r&&(n=(n=P(n))<0?0:n>255?255:255&n),a.view[f](t*i+a.byteOffset,n,!0)},F=function(e,t){I(e,t,{get:function(){return E(this,t)},set:function(e){return T(this,t,e)},enumerable:!0})};D?o&&(g=t((function(e,t,r,n){return u(e,g,c),k(function(){return m(t)?Y(t)?void 0!==n?new v(t,b(r,i),n):void 0!==r?new v(t,b(r,i)):new v(t):V(t)?X(g,t):_.call(g,t):new v(h(t))}(),e,g)})),O&&O(g,N),A(j(v),(function(e){e in g||l(g,e,v[e])})),g.prototype=y):(g=t((function(e,t,r,n){u(e,g,c);var a,o,s,f=0,l=0;if(m(t)){if(!Y(t))return V(t)?X(g,t):_.call(g,t);a=t,l=b(r,i);var v=t.byteLength;if(void 0===n){if(v%i)throw R(H);if(o=v-l,o<0)throw R(H)}else if(o=d(n)*i,o+l>v)throw R(H);s=o/i}else s=h(t),o=s*i,a=new B(o);L(e,{buffer:a,byteOffset:l,byteLength:o,length:s,view:new M(a)});while(f<s)F(e,f++)})),O&&O(g,N),y=g.prototype=p(U)),y.constructor!==g&&l(y,"constructor",g),C&&l(y,C,c),x[c]=g,n({global:!0,forced:g!=v,sham:!D},x),z in g||l(g,z,i),z in y||l(y,z,i),w(c)}):e.exports=function(){}},7779:function(e,t,r){"use strict";r.d(t,"b",(function(){return c})),r.d(t,"a",(function(){return s}));var n=r("b4c9"),a=r("89e8"),i=r("0b1c"),o=2;function c(e,t){return t=Array.isArray(t)?t:[t],t.every((function(t){return u(e,t)}))}function s(e){for(var t in e.luma=e.luma||{},e.luma.caps=e.luma.caps||{},n["b"])void 0===e.luma.caps[t]&&(e.luma.caps[t]=u(e,t));return e.luma.caps}function u(e,t){return e.luma=e.luma||{},e.luma.caps=e.luma.caps||{},void 0===e.luma.caps[t]&&(e.luma.caps[t]=f(e,t)),e.luma.caps[t]||a["f"].log(o,"Feature: ".concat(t," not supported"))(),e.luma.caps[t]}function f(e,t){var r,o=n["b"][t];Object(i["a"])(o,t);var c=Object(a["e"])(e)&&o[1]||o[0];if("function"===typeof c)r=c(e);else if(Array.isArray(c)){r=!0;var s=!0,u=!1,f=void 0;try{for(var l,d=c[Symbol.iterator]();!(s=(l=d.next()).done);s=!0){var h=l.value;r=r&&Boolean(e.getExtension(h))}}catch(b){u=!0,f=b}finally{try{s||null==d["return"]||d["return"]()}finally{if(u)throw f}}}else"string"===typeof c?r=Boolean(e.getExtension(c)):"boolean"===typeof c?r=c:Object(i["a"])(!1);return r}},"77a7":function(e,t){var r=1/0,n=Math.abs,a=Math.pow,i=Math.floor,o=Math.log,c=Math.LN2,s=function(e,t,s){var u,f,l,d=new Array(s),h=8*s-t-1,b=(1<<h)-1,v=b>>1,g=23===t?a(2,-24)-a(2,-77):0,y=e<0||0===e&&1/e<0?1:0,m=0;for(e=n(e),e!=e||e===r?(f=e!=e?1:0,u=b):(u=i(o(e)/c),e*(l=a(2,-u))<1&&(u--,l*=2),e+=u+v>=1?g/l:g*a(2,1-v),e*l>=2&&(u++,l/=2),u+v>=b?(f=0,u=b):u+v>=1?(f=(e*l-1)*a(2,t),u+=v):(f=e*a(2,v-1)*a(2,t),u=0));t>=8;d[m++]=255&f,f/=256,t-=8);for(u=u<<t|f,h+=t;h>0;d[m++]=255&u,u/=256,h-=8);return d[--m]|=128*y,d},u=function(e,t){var n,i=e.length,o=8*i-t-1,c=(1<<o)-1,s=c>>1,u=o-7,f=i-1,l=e[f--],d=127&l;for(l>>=7;u>0;d=256*d+e[f],f--,u-=8);for(n=d&(1<<-u)-1,d>>=-u,u+=t;u>0;n=256*n+e[f],f--,u-=8);if(0===d)d=1-s;else{if(d===c)return n?NaN:l?-r:r;n+=a(2,t),d-=s}return(l?-1:1)*n*a(2,d-t)};e.exports={pack:s,unpack:u}},"7e84":function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));r("3410");function n(e){return n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(e)}},"7f94":function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var n=r("d4ec"),a=r("99de"),i=r("7e84"),o=r("257e"),c=r("bee2"),s=r("262e"),u=r("97a3"),f=r("4945"),l=r("0b1c"),d="";function h(e,t){return Object(l["a"])("string"===typeof e),e=d+e,new Promise((function(r,n){try{var a=new Image;a.onload=function(){return r(a)},a.onerror=function(){return n(new Error("Could not load image ".concat(e,".")))},a.crossOrigin=t&&t.crossOrigin||"anonymous",a.src=e}catch(i){n(i)}}))}var b=function(e){function t(e){var r,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(n["a"])(this,t),Object(f["b"])(e),(c instanceof Promise||"string"===typeof c)&&(c={data:c}),"string"===typeof c.data&&(c=Object.assign({},c,{data:h(c.data)})),r=Object(a["a"])(this,Object(i["a"])(t).call(this,e,Object.assign({},c,{target:3553}))),r.initialize(c),Object.seal(Object(o["a"])(r)),r}return Object(s["a"])(t,e),Object(c["a"])(t,null,[{key:"isSupported",value:function(e,t){return u["a"].isSupported(e,t)}}]),t}(u["a"])},8177:function(e,t,r){"use strict";r.d(t,"c",(function(){return o})),r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return s})),r.d(t,"d",(function(){return u}));var n=r("ae9d"),a=r("f50d"),i=r("83a9");function o(e,t){if(Object(i["a"])(Object(i["f"])(e),"setParameters requires a WebGL context"),!Object(i["e"])(t)){var r={};for(var a in t){var o=Number(a),c=n["e"][a];c&&("string"===typeof c?r[c]=!0:c(e,t[a],o))}var s=e.state&&e.state.cache;if(s)for(var u in r){var f=n["a"][u];f(e,t,s)}}}function c(e,t){if(t=t||n["c"],"number"===typeof t){var r=t,a=n["d"][r];return a?a(e,r):e.getParameter(r)}var i=Array.isArray(t)?t:Object.keys(t),o={},c=!0,s=!1,u=void 0;try{for(var f,l=i[Symbol.iterator]();!(c=(f=l.next()).done);c=!0){var d=f.value,h=n["d"][d];o[d]=h?h(e,Number(d)):e.getParameter(Number(d))}}catch(b){s=!0,u=b}finally{try{c||null==l["return"]||l["return"]()}finally{if(s)throw u}}return o}function s(e){o(e,n["c"])}function u(e,t,r){if(Object(i["e"])(t))return r(e);var n,c=t.nocatch,s=void 0===c||c;if(Object(a["c"])(e),o(e,t),s)n=r(e),Object(a["b"])(e);else try{n=r(e)}finally{Object(a["b"])(e)}return n}},"81d5":function(e,t,r){"use strict";var n=r("7b0b"),a=r("23cb"),i=r("50c4");e.exports=function(e){var t=n(this),r=i(t.length),o=arguments.length,c=a(o>1?arguments[1]:void 0,r),s=o>2?arguments[2]:void 0,u=void 0===s?r:a(s,r);while(u>c)t[c++]=e;return t}},"82f8":function(e,t,r){"use strict";var n=r("ebb5"),a=r("4d64").includes,i=n.aTypedArray,o=n.exportTypedArrayMethod;o("includes",(function(e){return a(i(this),e,arguments.length>1?arguments[1]:void 0)}))},"83a9":function(e,t,r){"use strict";r.d(t,"a",(function(){return C})),r.d(t,"c",(function(){return U})),r.d(t,"e",(function(){return N})),r.d(t,"b",(function(){return V})),r.d(t,"d",(function(){return z})),r.d(t,"f",(function(){return Y})),r.d(t,"g",(function(){return q})),r.d(t,"h",(function(){return K}));var n=r("53ca"),a=r("2909"),i=r("ade3"),o=r("d4ec"),c=r("bee2"),s=r("e64b"),u="undefined"!==typeof __VERSION__?__VERSION__:"untranspiled source",f=Object(s["a"])();function l(e){try{var t=window[e],r="__storage_test__";return t.setItem(r,r),t.removeItem(r),t}catch(n){return null}}var d=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";Object(o["a"])(this,e),this.storage=l(n),this.id=t,this.config={},Object.assign(this.config,r),this._loadConfiguration()}return Object(c["a"])(e,[{key:"getConfiguration",value:function(){return this.config}},{key:"setConfiguration",value:function(e){return this.config={},this.updateConfiguration(e)}},{key:"updateConfiguration",value:function(e){if(Object.assign(this.config,e),this.storage){var t=JSON.stringify(this.config);this.storage.setItem(this.id,t)}return this}},{key:"_loadConfiguration",value:function(){var e={};if(this.storage){var t=this.storage.getItem(this.id);e=t?JSON.parse(t):{}}return Object.assign(this.config,e),this}}]),e}();function h(e){var t;return t=e<10?"".concat(e.toFixed(2),"ms"):e<100?"".concat(e.toFixed(1),"ms"):e<1e3?"".concat(e.toFixed(0),"ms"):"".concat((e/1e3).toFixed(2),"s"),t}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,r=Math.max(t-e.length,0);return"".concat(" ".repeat(r)).concat(e)}function v(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600,a=e.src.replace(/\(/g,"%28").replace(/\)/g,"%29");e.width>n&&(r=Math.min(r,n/e.width));var i=e.width*r,o=e.height*r,c=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(i/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(a,");"),"background-size:".concat(i,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(t," %c+"),c]}var g={BLACK:30,RED:31,GREEN:32,YELLOW:33,BLUE:34,MAGENTA:35,CYAN:36,WHITE:37,BRIGHT_BLACK:90,BRIGHT_RED:91,BRIGHT_GREEN:92,BRIGHT_YELLOW:93,BRIGHT_BLUE:94,BRIGHT_MAGENTA:95,BRIGHT_CYAN:96,BRIGHT_WHITE:97};function y(e){return"string"===typeof e?g[e.toUpperCase()]||g.WHITE:e}function m(e,t,r){return f||"string"!==typeof e||(t&&(t=y(t),e="[".concat(t,"m").concat(e,"[39m")),r&&(t=y(r),e="[".concat(r+10,"m").concat(e,"[49m"))),e}function p(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=O(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,a,i=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){o=!0,a=e},f:function(){try{i||null==n["return"]||n["return"]()}finally{if(o)throw a}}}}function O(e,t){if(e){if("string"===typeof e)return j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?j(e,t):void 0}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"],n=Object.getPrototypeOf(e),a=Object.getOwnPropertyNames(n),i=p(a);try{var o=function(){var n=t.value;"function"===typeof e[n]&&(r.find((function(e){return n===e}))||(e[n]=e[n].bind(e)))};for(i.s();!(t=i.n()).done;)o()}catch(c){i.e(c)}finally{i.f()}}function A(e,t){if(!e)throw new Error(t||"Assertion failed")}var w=r("2bd9");function x(){var e;if(f&&w["b"].performance)e=w["b"].performance.now();else if(w["a"].hrtime){var t=w["a"].hrtime();e=1e3*t[0]+t[1]/1e6}else e=Date.now();return e}var E={debug:f&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},T={enabled:!0,level:0};function k(){}var S={},L={once:!0};function I(e){for(var t in e)for(var r in e[t])return r||"untitled";return"empty"}var F=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.id;Object(o["a"])(this,e),this.id=r,this.VERSION=u,this._startTs=x(),this._deltaTs=x(),this.LOG_THROTTLE_TIMEOUT=0,this._storage=new d("__probe-".concat(this.id,"__"),T),this.userData={},this.timeStamp("".concat(this.id," started")),_(this),Object.seal(this)}return Object(c["a"])(e,[{key:"isEnabled",value:function(){return this._storage.config.enabled}},{key:"getLevel",value:function(){return this._storage.config.level}},{key:"getTotal",value:function(){return Number((x()-this._startTs).toPrecision(10))}},{key:"getDelta",value:function(){return Number((x()-this._deltaTs).toPrecision(10))}},{key:"getPriority",value:function(){return this.level}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._storage.updateConfiguration({enabled:e}),this}},{key:"setLevel",value:function(e){return this._storage.updateConfiguration({level:e}),this}},{key:"assert",value:function(e,t){A(e,t)}},{key:"warn",value:function(e){return this._getLogFunction(0,e,E.warn,arguments,L)}},{key:"error",value:function(e){return this._getLogFunction(0,e,E.error,arguments)}},{key:"deprecated",value:function(e,t){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(t,"` instead"))}},{key:"removed",value:function(e,t){return this.error("`".concat(e,"` has been removed. Use `").concat(t,"` instead"))}},{key:"probe",value:function(e,t){return this._getLogFunction(e,t,E.log,arguments,{time:!0,once:!0})}},{key:"log",value:function(e,t){return this._getLogFunction(e,t,E.debug,arguments)}},{key:"info",value:function(e,t){return this._getLogFunction(e,t,console.info,arguments)}},{key:"once",value:function(e,t){return this._getLogFunction(e,t,E.debug||E.info,arguments,L)}},{key:"table",value:function(e,t,r){return t?this._getLogFunction(e,t,console.table||k,r&&[r],{tag:I(t)}):k}},{key:"image",value:function(e){var t=e.logLevel,r=e.priority,n=e.image,a=e.message,i=void 0===a?"":a,o=e.scale,c=void 0===o?1:o;return this._shouldLog(t||r)?f?D({image:n,message:i,scale:c}):M({image:n,message:i,scale:c}):k}},{key:"settings",value:function(){console.table?console.table(this._storage.config):console.log(this._storage.config)}},{key:"get",value:function(e){return this._storage.config[e]}},{key:"set",value:function(e,t){this._storage.updateConfiguration(Object(i["a"])({},e,t))}},{key:"time",value:function(e,t){return this._getLogFunction(e,t,console.time?console.time:console.info)}},{key:"timeEnd",value:function(e,t){return this._getLogFunction(e,t,console.timeEnd?console.timeEnd:console.info)}},{key:"timeStamp",value:function(e,t){return this._getLogFunction(e,t,console.timeStamp||k)}},{key:"group",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1};r=R({logLevel:e,message:t,opts:r});var n=r,a=n.collapsed;return r.method=(a?console.groupCollapsed:console.group)||console.info,this._getLogFunction(r)}},{key:"groupCollapsed",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(e,t,Object.assign({},r,{collapsed:!0}))}},{key:"groupEnd",value:function(e){return this._getLogFunction(e,"",console.groupEnd||k)}},{key:"withGroup",value:function(e,t,r){this.group(e,t)();try{r()}finally{this.groupEnd(e)()}}},{key:"trace",value:function(){console.trace&&console.trace()}},{key:"_shouldLog",value:function(e){return this.isEnabled()&&this.getLevel()>=P(e)}},{key:"_getLogFunction",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4?arguments[4]:void 0;if(this._shouldLog(e)){var o;i=R({logLevel:e,message:t,args:n,opts:i}),r=r||i.method,A(r),i.total=this.getTotal(),i.delta=this.getDelta(),this._deltaTs=x();var c=i.tag||i.message;if(i.once){if(S[c])return k;S[c]=x()}return t=B(this.id,i.message,i),(o=r).bind.apply(o,[console,t].concat(Object(a["a"])(i.args)))}return k}},{key:"level",set:function(e){this.setLevel(e)},get:function(){return this.getLevel()}},{key:"priority",set:function(e){this.level=e},get:function(){return this.level}}]),e}();function P(e){if(!e)return 0;var t;switch(Object(n["a"])(e)){case"number":t=e;break;case"object":t=e.logLevel||e.priority||0;break;default:return 0}return A(Number.isFinite(t)&&t>=0),t}function R(e){var t=e.logLevel,r=e.message;e.logLevel=P(t);var a=e.args?Array.from(e.args):[];while(a.length&&a.shift()!==r);switch(e.args=a,Object(n["a"])(t)){case"string":case"function":void 0!==r&&a.unshift(r),e.message=t;break;case"object":Object.assign(e,t);break;default:}"function"===typeof e.message&&(e.message=e.message());var i=Object(n["a"])(e.message);return A("string"===i||"object"===i),Object.assign(e,e.opts)}function B(e,t,r){if("string"===typeof t){var n=r.time?b(h(r.total)):"";t=r.time?"".concat(e,": ").concat(n,"  ").concat(t):"".concat(e,": ").concat(t),t=m(t,r.color,r.background)}return t}function M(e){var t=e.image,n=(e.message,e.scale),a=void 0===n?1:n,i=null;try{i=r(1)}catch(o){}return i?function(){return i(t,{fit:"box",width:"".concat(Math.round(80*a),"%")}).then((function(e){return console.log(e)}))}:k}function D(e){var t=e.image,r=e.message,n=void 0===r?"":r,i=e.scale,o=void 0===i?1:i;if("string"===typeof t){var c=new Image;return c.onload=function(){var e,t=v(c,n,o);(e=console).log.apply(e,Object(a["a"])(t))},c.src=t,k}var s,u=t.nodeName||"";if("img"===u.toLowerCase())return(s=console).log.apply(s,Object(a["a"])(v(t,n,o))),k;if("canvas"===u.toLowerCase()){var f=new Image;return f.onload=function(){var e;return(e=console).log.apply(e,Object(a["a"])(v(f,n,o)))},f.src=t.toDataURL(),k}return k}function C(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}function N(e){for(var t in e)return!1;return!0}function U(e,t){if(e===t)return!0;var r=Array.isArray(e)||ArrayBuffer.isView(e),n=Array.isArray(t)||ArrayBuffer.isView(t);if(r&&n&&e.length===t.length){for(var a=0;a<e.length;++a)if(e[a]!==t[a])return!1;return!0}return!1}function G(e){if(e.canvas&&e.luma){var t=e.luma.canvasSizeInfo.clientWidth;return t?e.drawingBufferWidth/t:1}return 1}function V(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=G(e),a=e.drawingBufferWidth,i=e.drawingBufferHeight;return H(t,n,a,i,r)}function z(e){var t="undefined"===typeof window?1:window.devicePixelRatio||1;return Number.isFinite(e)?e<=0?1:e:e?t:1}function H(e,t,r,n,a){var i,o=X(e[0],t,r),c=W(e[1],t,n,a),s=X(e[0]+1,t,r),u=s===r-1?s:s-1;return s=W(e[1]+1,t,n,a),a?(s=0===s?s:s+1,i=c,c=s):i=s===n-1?s:s-1,{x:o,y:c,width:Math.max(u-o+1,1),height:Math.max(i-c+1,1)}}function X(e,t,r){var n=Math.min(Math.round(e*t),r-1);return n}function W(e,t,r,n){return n?Math.max(0,r-1-Math.round(e*t)):Math.min(Math.round(e*t),r-1)}F.VERSION=u;function Y(e){return Boolean(e&&Number.isFinite(e._version))}function q(e){return Boolean(e&&2===e._version)}var K=new F({id:"luma.gl"})},"85aa":function(e,t,r){"use strict";r.d(t,"a",(function(){return he}));var n=r("d4ec"),a=r("bee2"),i=r("3835"),o=r("ade3"),c="vs",s="fs";function u(e,t){if(!e)throw new Error(t||"shadertools: assertion failed.")}var f=r("53ca"),l={number:{validate:function(e,t){return Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)}},array:{validate:function(e,t){return Array.isArray(e)||ArrayBuffer.isView(e)}}};function d(e){var t={};for(var r in e){var n=e[r],a=h(n);t[r]=a}return t}function h(e){var t=b(e);return"object"===t?e?"type"in e?Object.assign({},e,l[e.type]):"value"in e?(t=b(e.value),Object.assign({type:t},e,l[t])):{type:"object",value:e}:{type:"object",value:null}:Object.assign({type:t,value:e},l[t])}function b(e){return Array.isArray(e)||ArrayBuffer.isView(e)?"array":Object(f["a"])(e)}var v="vs",g="fs",y=function(){function e(t){var r=t.name,a=t.vs,i=t.fs,o=t.dependencies,c=void 0===o?[]:o,s=t.uniforms,f=t.getUniforms,l=t.deprecations,h=void 0===l?[]:l,b=t.defines,v=void 0===b?{}:b,g=t.inject,y=void 0===g?{}:g,p=t.vertexShader,O=t.fragmentShader;Object(n["a"])(this,e),u("string"===typeof r),this.name=r,this.vs=a||p,this.fs=i||O,this.getModuleUniforms=f,this.dependencies=c,this.deprecations=this._parseDeprecationDefinitions(h),this.defines=v,this.injections=m(y),s&&(this.uniforms=d(s))}return Object(a["a"])(e,[{key:"getModuleSource",value:function(e){var t;switch(e){case v:t=this.vs||"";break;case g:t=this.fs||"";break;default:u(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),"\n").concat(t,"// END MODULE_").concat(this.name,"\n\n")}},{key:"getUniforms",value:function(e,t){return this.getModuleUniforms?this.getModuleUniforms(e,t):this.uniforms?this._defaultGetUniforms(e):{}}},{key:"getDefines",value:function(){return this.defines}},{key:"checkDeprecations",value:function(e,t){this.deprecations.forEach((function(r){r.regex.test(e)&&(r.deprecated?t.deprecated(r.old,r["new"])():t.removed(r.old,r["new"])())}))}},{key:"_parseDeprecationDefinitions",value:function(e){return e.forEach((function(e){switch(e.type){case"function":e.regex=new RegExp("\\b".concat(e.old,"\\("));break;default:e.regex=new RegExp("".concat(e.type," ").concat(e.old,";"))}})),e}},{key:"_defaultGetUniforms",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},r=this.uniforms;for(var n in r){var a=r[n];n in e&&!a["private"]?(a.validate&&u(a.validate(e[n],a),"".concat(this.name,": invalid ").concat(n)),t[n]=e[n]):t[n]=a.value}return t}}]),e}();function m(e){var t={vs:{},fs:{}};for(var r in e){var n=e[r],a=r.slice(0,2);"string"===typeof n&&(n={injection:n}),t[a][r]=n}return t}function p(e){return O(_(e))}function O(e){var t={},r={};return j({modules:e,level:0,moduleMap:t,moduleDepth:r}),Object.keys(r).sort((function(e,t){return r[t]-r[e]})).map((function(e){return t[e]}))}function j(e){var t=e.modules,r=e.level,n=e.moduleMap,a=e.moduleDepth;if(r>=5)throw new Error("Possible loop in shader dependency graph");var i=!0,o=!1,c=void 0;try{for(var s,u=t[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var f=s.value;n[f.name]=f,(void 0===a[f.name]||a[f.name]<r)&&(a[f.name]=r)}}catch(y){o=!0,c=y}finally{try{i||null==u["return"]||u["return"]()}finally{if(o)throw c}}var l=!0,d=!1,h=void 0;try{for(var b,v=t[Symbol.iterator]();!(l=(b=v.next()).done);l=!0){var g=b.value;g.dependencies&&j({modules:g.dependencies,level:r+1,moduleMap:n,moduleDepth:a})}}catch(y){d=!0,h=y}finally{try{l||null==v["return"]||v["return"]()}finally{if(d)throw h}}}function _(e,t){return e.map((function(e){return e instanceof y||(u("string"!==typeof e,"Shader module use by name is deprecated. Import shader module '".concat(e,"' and use it directly.")),u(e.name,"shader module has no name"),e=new y(e),e.dependencies=_(e.dependencies)),e}))}function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="undefined"!==typeof window&&window.navigator||{},r=e.userAgent||t.userAgent||"",n=-1!==r.indexOf("MSIE "),a=-1!==r.indexOf("Trident/");return n||a}var w=7936,x=7937,E=7938,T=35724,k={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},S={};function L(e){return Boolean(e&&2===e._version)}function I(e){var t=e.getExtension("WEBGL_debug_renderer_info"),r=e.getParameter(t&&t.UNMASKED_VENDOR_WEBGL||w),n=e.getParameter(t&&t.UNMASKED_RENDERER_WEBGL||x),a=F(r,n),i={gpuVendor:a,vendor:r,renderer:n,version:e.getParameter(E),shadingLanguageVersion:e.getParameter(T)};return i}function F(e,t){return e.match(/NVIDIA/i)||t.match(/NVIDIA/i)?"NVIDIA":e.match(/INTEL/i)||t.match(/INTEL/i)?"INTEL":e.match(/AMD/i)||t.match(/AMD/i)||e.match(/ATI/i)||t.match(/ATI/i)?"AMD":"UNKNOWN GPU"}Object.keys(k).forEach((function(e){S[e]=e}));var P={};function R(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=k[t];if(u(n,t),!A(r))return!0;if(t in P)return P[t];var a=n[0],i=r.behavior||"enable",o="#extension GL_".concat(a," : ").concat(i,"\nvoid main(void) {}"),c=e.createShader(35633);e.shaderSource(c,o),e.compileShader(c);var s=e.getShaderParameter(c,35713);return e.deleteShader(c),P[t]=s,s}function B(e,t){var r=k[t];u(r,t);var n=L(e)&&r[1]||r[0],a="string"===typeof n?Boolean(e.getExtension(n)):n;return u(!1===a||!0===a),a}function M(e,t){return t=Array.isArray(t)?t:[t],t.every((function(t){return B(e,t)}))}function D(e){var t=I(e);switch(t.gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}function C(e,t,r){var n="#if (__VERSION__ > 120)\n\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return M(e,S.GLSL_FRAG_DEPTH)&&(n+="// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),M(e,S.GLSL_DERIVATIVES)&&R(e,S.GLSL_DERIVATIVES)&&(n+="// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define DERIVATIVES\n#endif\n"),M(e,S.GLSL_FRAG_DATA)&&R(e,S.GLSL_FRAG_DATA,{behavior:"require"})&&(n+="// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define DRAW_BUFFERS\n#endif\n"),M(e,S.GLSL_TEXTURE_LOD)&&(n+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n# define TEXTURE_LOD\n#define texture2DLod texture2DLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define textureCubeLod textureCubeLodEXT\n#define texture2DGrad texture2DGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define textureCubeGrad textureCubeGradEXT\n#endif\n"),n}var N,U="#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n",G="#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n",V=(N={},Object(o["a"])(N,c,U),Object(o["a"])(N,s,G),N),z="__LUMA_INJECT_DECLARATIONS__",H=/void\s+main\s*\([^)]*\)\s*\{\n?/,X=/}\n?[^{}]*$/,W=[];function Y(e,t,r,n){var a=t===c,i=function(t){var n=r[t];n.sort((function(e,t){return e.order-t.order})),W.length=n.length;for(var i=0,o=n.length;i<o;++i)W[i]=n[i].injection;var c="".concat(W.join("\n"),"\n");switch(t){case"vs:#decl":a&&(e=e.replace(z,c));break;case"vs:#main-start":a&&(e=e.replace(H,(function(e){return e+c})));break;case"vs:#main-end":a&&(e=e.replace(X,(function(e){return c+e})));break;case"fs:#decl":a||(e=e.replace(z,c));break;case"fs:#main-start":a||(e=e.replace(H,(function(e){return e+c})));break;case"fs:#main-end":a||(e=e.replace(X,(function(e){return c+e})));break;default:e=e.replace(t,(function(e){return e+c}))}};for(var o in r)i(o);return e=e.replace(z,""),n&&(e=e.replace(/\}\s*$/,(function(e){return e+V[t]}))),e}function q(e,t,r){switch(t){case 300:return r?J(e):$(e);case 100:return r?Z(e):ee(e);default:throw new Error("unknown GLSL version ".concat(t))}}var K,Q=/^[ \t]*out[ \t]+vec4[ \t]+(\w+)[ \t]*;\s+/m;function J(e){return e.replace(/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n").replace(/^[ \t]*attribute[ \t]+(.+;)/gm,"in $1").replace(/^[ \t]*varying[ \t]+(.+;)/gm,"out $1").replace(/\btexture2D\(/g,"texture(").replace(/\btextureCube\(+/g,"texture(").replace(/\btexture2DLodEXT\(/g,"textureLod(").replace(/\btextureCubeLodEXT\(/g,"textureLod(")}function $(e){return e.replace(/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n").replace(/^[ \t]*varying[ \t]+(.+;)/gm,"in $1").replace(/\btexture2D\(/g,"texture(").replace(/\btextureCube\(/g,"texture(").replace(/\btexture2DLodEXT\(/g,"textureLod(").replace(/\btextureCubeLodEXT\(/g,"textureLod(")}function Z(e){return e.replace(/^#version[ \t]+300[ \t]+es/,"#version 100").replace(/^[ \t]*in[ \t]+(.+;)/gm,"attribute $1").replace(/^[ \t]*out[ \t]+(.+;)/gm,"varying $1").replace(/\btexture\(/g,"texture2D(").replace(/\btextureLod\(/g,"texture2DLodEXT(")}function ee(e){e=e.replace(/^#version[ \t]+300[ \t]+es/,"#version 100").replace(/^[ \t]*in[ \t]+/gm,"varying ").replace(/\btexture\(/g,"texture2D(").replace(/\btextureLod\(/g,"texture2DLodEXT(");var t=e.match(Q);if(t){var r=t[1];e=e.replace(Q,"").replace(new RegExp("\\b".concat(r,"\\b"),"g"),"gl_FragColor")}return e}var te="\n\n".concat(z,"\n\n"),re=(K={},Object(o["a"])(K,c,"vertex"),Object(o["a"])(K,s,"fragment"),K),ne="precision highp float;\n\n";function ae(e,t){var r=t.vs,n=t.fs,a=p(t.modules||[]);return{gl:e,vs:ie(e,Object.assign({},t,{source:r,type:c,modules:a})),fs:ie(e,Object.assign({},t,{source:n,type:s,modules:a})),getUniforms:oe(a)}}function ie(e,t){var r=t.id,n=t.source,a=t.type,i=t.modules,o=t.defines,s=void 0===o?{}:o,f=t.hookFunctions,l=void 0===f?[]:f,d=t.inject,h=void 0===d?{}:d,b=t.transpileToGLSL100,v=void 0!==b&&b,g=t.prologue,y=void 0===g||g,m=t.log;u("string"===typeof n,"shader source must be a string");var p=a===c,O=n.split("\n"),j=100,_="",A=n;0===O[0].indexOf("#version ")?(j=300,_=O[0],A=O.slice(1).join("\n")):_="#version ".concat(j);var w={};i.forEach((function(e){Object.assign(w,e.getDefines())})),Object.assign(w,s);var x=y?"".concat(_,"\n").concat(se({id:r,source:n,type:a}),"\n").concat(ce({type:a}),"\n").concat(D(e),"\n").concat(C(e,j,!p),"\n").concat(ue(w),"\n").concat(p?"":ne,"\n"):"".concat(_,"\n");l=le(l);var E={},T={},k={};for(var S in h){var L="string"===typeof h[S]?{injection:h[S],order:0}:h[S],I=S.match(/^(v|f)s:(#)?([\w-]+)$/);if(I){var F=I[2],P=I[3];F?"decl"===P?T[S]=[L]:k[S]=[L]:E[S]=[L]}else k[S]=[L]}var R=!0,B=!1,M=void 0;try{for(var N,U=i[Symbol.iterator]();!(R=(N=U.next()).done);R=!0){var G=N.value;m&&G.checkDeprecations(A,m);var V=G.getModuleSource(a,j);x+=V;var z=G.injections[a];for(var H in z){var X=H.match(/^(v|f)s:#([\w-]+)$/);if(X){var W=X[2],K="decl"===W?T:k;K[H]=K[H]||[],K[H].push(z[H])}else E[H]=E[H]||[],E[H].push(z[H])}}}catch(Q){B=!0,M=Q}finally{try{R||null==U["return"]||U["return"]()}finally{if(B)throw M}}return x+=te,x=Y(x,a,T),x+=fe(l[a],E),x+=A,x=Y(x,a,k),x=q(x,v?100:j,p),x}function oe(e){return function(t){var r={},n=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){var s=o.value,u=s.getUniforms(t,r);Object.assign(r,u)}}catch(f){a=!0,i=f}finally{try{n||null==c["return"]||c["return"]()}finally{if(a)throw i}}return r}}function ce(e){var t=e.type;return"\n#define SHADER_TYPE_".concat(re[t].toUpperCase(),"\n")}function se(e){var t=e.id,r=e.source,n=e.type,a=t&&"string"===typeof t&&-1===r.indexOf("SHADER_NAME");return a?"\n#define SHADER_NAME ".concat(t,"_").concat(re[n],"\n\n"):""}function ue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=0,r="";for(var n in e){0===t&&(r+="\n// APPLICATION DEFINES\n"),t++;var a=e[n];(a||Number.isFinite(a))&&(r+="#define ".concat(n.toUpperCase()," ").concat(e[n],"\n"))}return 0===t&&(r+="\n"),r}function fe(e,t){var r="";for(var n in e){var a=e[n];if(r+="void ".concat(a.signature," {\n"),a.header&&(r+="  ".concat(a.header)),t[n]){var i=t[n];i.sort((function(e,t){return e.order-t.order}));var o=!0,c=!1,s=void 0;try{for(var u,f=i[Symbol.iterator]();!(o=(u=f.next()).done);o=!0){var l=u.value;r+="  ".concat(l.injection,"\n")}}catch(d){c=!0,s=d}finally{try{o||null==f["return"]||f["return"]()}finally{if(c)throw s}}}a.footer&&(r+="  ".concat(a.footer)),r+="}\n"}return r}function le(e){var t={vs:{},fs:{}};return e.forEach((function(e){var r;"string"!==typeof e?(r=e,e=r.hook):r={},e=e.trim();var n=e.split(":"),a=Object(i["a"])(n,2),o=a[0],c=a[1],s=e.replace(/\(.+/,"");t[o][s]=Object.assign(r,{signature:c})})),t}var de=r("3a49"),he=function(){function e(t){Object(n["a"])(this,e),this.gl=t,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}return Object(a["a"])(e,null,[{key:"getDefaultProgramManager",value:function(t){return t.luma=t.luma||{},t.luma.defaultProgramManager=t.luma.defaultProgramManager||new e(t),t.luma.defaultProgramManager}}]),Object(a["a"])(e,[{key:"addDefaultModule",value:function(e){this._defaultModules.find((function(t){return t.name===e.name}))||this._defaultModules.push(e),this.stateHash++}},{key:"removeDefaultModule",value:function(e){var t="string"===typeof e?e:e.name;this._defaultModules=this._defaultModules.filter((function(e){return e.name!==t})),this.stateHash++}},{key:"addShaderHook",value:function(e,t){t&&(e=Object.assign(t,{hook:e})),this._hookFunctions.push(e),this.stateHash++}},{key:"get",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.vs,n=void 0===r?"":r,a=t.fs,i=void 0===a?"":a,o=t.defines,c=void 0===o?{}:o,s=t.inject,u=void 0===s?{}:s,f=t.varyings,l=void 0===f?[]:f,d=t.bufferMode,h=void 0===d?35981:d,b=t.transpileToGLSL100,v=void 0!==b&&b,g=this._getModuleList(t.modules),y=this._getHash(n),m=this._getHash(i),p=g.map((function(t){return e._getHash(t.name)})).sort(),O=l.map((function(t){return e._getHash(t)})),j=Object.keys(c).sort(),_=Object.keys(u).sort(),A=[],w=[],x=!0,E=!1,T=void 0;try{for(var k,S=j[Symbol.iterator]();!(x=(k=S.next()).done);x=!0){var L=k.value;A.push(this._getHash(L)),A.push(this._getHash(c[L]))}}catch(N){E=!0,T=N}finally{try{x||null==S["return"]||S["return"]()}finally{if(E)throw T}}var I=!0,F=!1,P=void 0;try{for(var R,B=_[Symbol.iterator]();!(I=(R=B.next()).done);I=!0){var M=R.value;w.push(this._getHash(M)),w.push(this._getHash(u[M]))}}catch(N){F=!0,P=N}finally{try{I||null==B["return"]||B["return"]()}finally{if(F)throw P}}var D="".concat(y,"/").concat(m,"D").concat(A.join("/"),"M").concat(p.join("/"),"I").concat(w.join("/"),"V").concat(O.join("/"),"H").concat(this.stateHash,"B").concat(h).concat(v?"T":"");if(!this._programCache[D]){var C=ae(this.gl,{vs:n,fs:i,modules:g,inject:u,defines:c,hookFunctions:this._hookFunctions,transpileToGLSL100:v});this._programCache[D]=new de["a"](this.gl,{hash:D,vs:C.vs,fs:C.fs,varyings:l,bufferMode:h}),this._getUniforms[D]=C.getUniforms||function(e){},this._useCounts[D]=0}return this._useCounts[D]++,this._programCache[D]}},{key:"getUniforms",value:function(e){return this._getUniforms[e.hash]||null}},{key:"release",value:function(e){var t=e.hash;this._useCounts[t]--,0===this._useCounts[t]&&(this._programCache[t]["delete"](),delete this._programCache[t],delete this._getUniforms[t],delete this._useCounts[t])}},{key:"_getHash",value:function(e){return void 0===this._hashes[e]&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}},{key:"_getModuleList",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=new Array(this._defaultModules.length+e.length),r={},n=0,a=0,i=this._defaultModules.length;a<i;++a){var o=this._defaultModules[a],c=o.name;t[n++]=o,r[c]=!0}for(var s=0,u=e.length;s<u;++s){var f=e[s],l=f.name;r[l]||(t[n++]=f,r[l]=!0)}return t.length=n,t}}]),e}()},"89e8":function(e,t,r){"use strict";r.d(t,"i",(function(){return n["c"]})),r.d(t,"g",(function(){return n["b"]})),r.d(t,"j",(function(){return n["d"]})),r.d(t,"a",(function(){return f})),r.d(t,"h",(function(){return h})),r.d(t,"c",(function(){return l})),r.d(t,"f",(function(){return o["h"]})),r.d(t,"b",(function(){return o["b"]})),r.d(t,"d",(function(){return o["f"]})),r.d(t,"e",(function(){return o["g"]}));r("1e88");var n=r("8177"),a=r("f50d"),i=r("c526"),o=r("83a9"),c=Object(i["isBrowser"])(),s=c&&"undefined"!==typeof document,u={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(o["a"])(c,"createGLContext only available in the browser.\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils"),e=Object.assign({},u,e);var t,r=e,n=r.width,a=r.height;function i(t){if(e.throwOnError)throw new Error(t);return console.error(t),null}e.onError=i;var s=e,f=s.canvas,d=v({canvas:f,width:n,height:a,onError:i});return t=b(d,e),t?(t=l(t,e),g(t),t):null}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||e._instrumented)return e;e._version=e._version||y(e),e.luma=e.luma||{},e.luma.canvasSizeInfo=e.luma.canvasSizeInfo||{},t=Object.assign({},u,t);var r=t,n=r.manageState,s=r.debug;return n&&Object(a["a"])(e,{copyState:!1,log:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return o["h"].log.apply(o["h"],[1].concat(t))()}}),c&&s&&(i["global"].makeDebugContext?(e=i["global"].makeDebugContext(e,t),o["h"].level=Math.max(o["h"].level,1)):o["h"].warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),e._instrumented=!0,e}function d(e){var t=e.getParameter(7936),r=e.getParameter(7937),n=e.getExtension("WEBGL_debug_renderer_info"),a=n&&e.getParameter(n.UNMASKED_VENDOR_WEBGL||7936),i=n&&e.getParameter(n.UNMASKED_RENDERER_WEBGL||7937);return{vendor:a||t,renderer:i||r,vendorMasked:t,rendererMasked:r,version:e.getParameter(7938),shadingLanguageVersion:e.getParameter(35724)}}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.canvas){var r=Object(o["d"])(t.useDevicePixels);m(e,r,t)}else{var n=e.getExtension("STACKGL_resize_drawingbuffer");n&&"width"in t&&"height"in t&&n.resize(t.width,t.height)}}function b(e,t){var r=t.onError,n=null,a=function(e){return n=e.statusMessage||n};e.addEventListener("webglcontextcreationerror",a,!1);var i=t.webgl1,o=void 0===i||i,c=t.webgl2,s=void 0===c||c,u=null;return s&&(u=u||e.getContext("webgl2",t),u=u||e.getContext("experimental-webgl2",t)),o&&(u=u||e.getContext("webgl",t),u=u||e.getContext("experimental-webgl",t)),e.removeEventListener("webglcontextcreationerror",a,!1),u||r("Failed to create ".concat(s&&!o?"WebGL2":"WebGL"," context: ").concat(n||"Unknown error"))}function v(e){var t,r=e.canvas,n=e.width,a=void 0===n?800:n,i=e.height,o=void 0===i?600:i,c=e.onError;if("string"===typeof r){var u=s&&"complete"===document.readyState;u||c("createGLContext called on canvas '".concat(r,"' before page was loaded")),t=document.getElementById(r)}else r?t=r:(t=document.createElement("canvas"),t.id="lumagl-canvas",t.style.width=Number.isFinite(a)?"".concat(a,"px"):"100%",t.style.height=Number.isFinite(o)?"".concat(o,"px"):"100%",document.body.insertBefore(t,document.body.firstChild));return t}function g(e){var t=Object(o["g"])(e)?"WebGL2":"WebGL1",r=d(e),n=r?"(".concat(r.vendor,",").concat(r.renderer,")"):"",a=e.debug?" debug":"";o["h"].info(1,"".concat(t).concat(a," context ").concat(n))()}function y(e){return"undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext?2:1}function m(e,t,r){var n="width"in r?r.width:e.canvas.clientWidth,a="height"in r?r.height:e.canvas.clientHeight;n&&a||(o["h"].log(1,"Canvas clientWidth/clientHeight is 0")(),t=1,n=e.canvas.width||1,a=e.canvas.height||1),e.luma=e.luma||{},e.luma.canvasSizeInfo=e.luma.canvasSizeInfo||{};var i=e.luma.canvasSizeInfo;if(i.clientWidth!==n||i.clientHeight!==a||i.devicePixelRatio!==t){var c=t,s=Math.floor(n*c),u=Math.floor(a*c);e.canvas.width=s,e.canvas.height=u,e.drawingBufferWidth===s&&e.drawingBufferHeight===u||(o["h"].warn("Device pixel ratio clamped")(),c=Math.min(e.drawingBufferWidth/n,e.drawingBufferHeight/a),e.canvas.width=Math.floor(n*c),e.canvas.height=Math.floor(a*c)),Object.assign(e.luma.canvasSizeInfo,{clientWidth:n,clientHeight:a,devicePixelRatio:t})}}},"8aa7":function(e,t,r){var n=r("da84"),a=r("d039"),i=r("1c7e"),o=r("ebb5").NATIVE_ARRAY_BUFFER_VIEWS,c=n.ArrayBuffer,s=n.Int8Array;e.exports=!o||!a((function(){s(1)}))||!a((function(){new s(-1)}))||!i((function(e){new s,new s(null),new s(1.5),new s(e)}),!0)||a((function(){return 1!==new s(new c(2),1,void 0).length}))},"8d66":function(e,t,r){"use strict";(function(e,n){var a=r("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.console=t.process=t.document=t.global=t.window=t.self=void 0;var i=a(r("7037")),o={self:"undefined"!==typeof self&&self,window:"undefined"!==typeof window&&window,global:"undefined"!==typeof e&&e,document:"undefined"!==typeof document&&document,process:"object"===("undefined"===typeof n?"undefined":(0,i["default"])(n))&&n},c=o.self||o.window||o.global;t.self=c;var s=o.window||o.self||o.global;t.window=s;var u=o.global||o.self||o.window;t.global=u;var f=o.document||{};t.document=f;var l=o.process||{};t.process=l;var d=console;t.console=d}).call(this,r("c8ba"),r("4362"))},"97a3":function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));var n=r("d4ec"),a=r("99de"),i=r("7e84"),o=r("bee2"),c=r("262e"),s=r("2fc2"),u=r("b1cf"),f=r("b980"),l=r("89e8"),d=r("c526"),h=r("4945"),b=r("55da"),v=r("0b1c"),g=[9729,9728],y=d["global"].WebGLBuffer||function(){},m=function(e){function t(e,r){var o;Object(n["a"])(this,t);var c=r.id,s=void 0===c?Object(b["c"])("texture"):c,u=r.handle,f=r.target;return o=Object(a["a"])(this,Object(i["a"])(t).call(this,e,{id:s,handle:u})),o.target=f,o.textureUnit=void 0,o.loaded=!1,o.width=void 0,o.height=void 0,o.depth=void 0,o.format=void 0,o.type=void 0,o.dataFormat=void 0,o.border=void 0,o.textureUnit=void 0,o.mipmaps=void 0,o}return Object(c["a"])(t,e),Object(o["a"])(t,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.format,n=t.linearFiltering,a=!0;return r&&(a=a&&Object(f["d"])(e,r),a=a&&(!n||Object(f["e"])(e,r))),a}}]),Object(o["a"])(t,[{key:"toString",value:function(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}},{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.data;if(r instanceof Promise)return r.then((function(r){return e.initialize(Object.assign({},t,{pixels:r,data:r}))})),this;var n=t.pixels,a=void 0===n?null:n,i=t.format,o=void 0===i?6408:i,c=t.border,s=void 0===c?0:c,u=t.recreate,f=void 0!==u&&u,d=t.parameters,h=void 0===d?{}:d,b=t.pixelStore,v=void 0===b?{}:b,g=t.textureUnit,y=void 0===g?void 0:g,m=t.mipmaps,p=void 0===m||m;r||(r=a);var O=t.width,j=t.height,_=t.dataFormat,A=t.type,w=t.depth,x=void 0===w?0:w,E=this._deduceParameters({format:o,type:A,dataFormat:_,compressed:!1,data:r,width:O,height:j});return O=E.width,j=E.height,_=E.dataFormat,A=E.type,this.width=O,this.height=j,this.depth=x,this.format=o,this.type=A,this.dataFormat=_,this.border=s,this.textureUnit=y,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),p&&this._isNPOT()&&(l["f"].warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),p=!1,this._updateForNPOT(h)),this.mipmaps=p,this.setImageData({data:r,width:O,height:j,depth:x,format:o,type:A,dataFormat:_,border:s,mipmaps:p,parameters:v}),p&&this.generateMipmap(),this.setParameters(h),f&&(this.data=r),this}},{key:"resize",value:function(e){var t=e.height,r=e.width,n=e.mipmaps,a=void 0!==n&&n;return r!==this.width||t!==this.height?this.initialize({width:r,height:t,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:a}):this}},{key:"generateMipmap",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isNPOT()?(l["f"].warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),Object(l["j"])(this.gl,t,(function(){e.gl.generateMipmap(e.target)})),this.gl.bindTexture(this.target,null),this)}},{key:"setImageData",value:function(e){this._trackDeallocatedMemory("Texture");var t=e.target,r=void 0===t?this.target:t,n=e.pixels,a=void 0===n?null:n,i=e.level,o=void 0===i?0:i,c=e.format,s=void 0===c?this.format:c,u=e.border,d=void 0===u?this.border:u,b=e.offset,g=void 0===b?0:b,y=e.parameters,m=void 0===y?{}:y,p=e.data,O=void 0===p?null:p,j=e.type,_=void 0===j?this.type:j,A=e.width,w=void 0===A?this.width:A,x=e.height,E=void 0===x?this.height:x,T=e.dataFormat,k=void 0===T?this.dataFormat:T,S=e.compressed,L=void 0!==S&&S;O||(O=a);var I=this._deduceParameters({format:s,type:_,dataFormat:k,compressed:L,data:O,width:w,height:E});_=I.type,k=I.dataFormat,L=I.compressed,w=I.width,E=I.height;var F=this.gl;F.bindTexture(this.target,this.handle);var P=null,R=this._getDataType({data:O,compressed:L});if(O=R.data,P=R.dataType,Object(l["j"])(this.gl,m,(function(){switch(P){case"null":F.texImage2D(r,o,s,w,E,d,k,_,O);break;case"typed-array":F.texImage2D(r,o,s,w,E,d,k,_,O,g);break;case"buffer":Object(h["a"])(F),F.bindBuffer(35052,O.handle||O),F.texImage2D(r,o,s,w,E,d,k,_,g),F.bindBuffer(35052,null);break;case"browser-object":Object(l["e"])(F)?F.texImage2D(r,o,s,w,E,d,k,_,O):F.texImage2D(r,o,s,k,_,O);break;case"compressed":F.compressedTexImage2D(r,o,s,w,E,d,O);break;default:Object(v["a"])(!1,"Unknown image data type")}})),O&&O.byteLength)this._trackAllocatedMemory(O.byteLength,"Texture");else{var B=f["a"][this.dataFormat]||4,M=f["c"][this.type]||1;this._trackAllocatedMemory(this.width*this.height*B*M,"Texture")}return this.loaded=!0,this}},{key:"setSubImageData",value:function(e){var t=this,r=e.target,n=void 0===r?this.target:r,a=e.pixels,i=void 0===a?null:a,o=e.data,c=void 0===o?null:o,s=e.x,f=void 0===s?0:s,d=e.y,b=void 0===d?0:d,g=e.width,m=void 0===g?this.width:g,p=e.height,O=void 0===p?this.height:p,j=e.level,_=void 0===j?0:j,A=e.format,w=void 0===A?this.format:A,x=e.type,E=void 0===x?this.type:x,T=e.dataFormat,k=void 0===T?this.dataFormat:T,S=e.compressed,L=void 0!==S&&S,I=e.offset,F=void 0===I?0:I,P=e.border,R=(void 0===P&&this.border,e.parameters),B=void 0===R?{}:R,M=this._deduceParameters({format:w,type:E,dataFormat:k,compressed:L,data:c,width:m,height:O});if(E=M.type,k=M.dataFormat,L=M.compressed,m=M.width,O=M.height,Object(v["a"])(0===this.depth,"texSubImage not supported for 3D textures"),c||(c=i),c&&c.data){var D=c;c=D.data,m=D.shape[0],O=D.shape[1]}c instanceof u["a"]&&(c=c.handle),this.gl.bindTexture(this.target,this.handle),Object(l["j"])(this.gl,B,(function(){L?t.gl.compressedTexSubImage2D(n,_,f,b,m,O,w,c):null===c?t.gl.texSubImage2D(n,_,f,b,m,O,k,E,null):ArrayBuffer.isView(c)?t.gl.texSubImage2D(n,_,f,b,m,O,k,E,c,F):c instanceof y?(Object(h["a"])(t.gl),t.gl.bindBuffer(35052,c),t.gl.texSubImage2D(n,_,f,b,m,O,k,E,F),t.gl.bindBuffer(35052,null)):Object(l["e"])(t.gl)?t.gl.texSubImage2D(n,_,f,b,m,O,k,E,c):t.gl.texSubImage2D(n,_,f,b,k,E,c)})),this.gl.bindTexture(this.target,null)}},{key:"copyFramebuffer",value:function(){return l["f"].error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}},{key:"getActiveUnit",value:function(){return this.gl.getParameter(34016)-33984}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,t=this.gl;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,this.handle),e}},{key:"unbind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,t=this.gl;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,null),e}},{key:"_getDataType",value:function(e){var t=e.data,r=e.compressed,n=void 0!==r&&r;return n?{data:t,dataType:"compressed"}:null===t?{data:t,dataType:"null"}:ArrayBuffer.isView(t)?{data:t,dataType:"typed-array"}:t instanceof u["a"]?{data:t.handle,dataType:"buffer"}:t instanceof y?{data:t,dataType:"buffer"}:{data:t,dataType:"browser-object"}}},{key:"_deduceParameters",value:function(e){var t=e.format,r=e.data,n=e.width,a=e.height,i=e.dataFormat,o=e.type,c=e.compressed,s=f["b"][t];i=i||s&&s.dataFormat,o=o||s&&s.types[0],c=c||s&&s.compressed;var u=this._deduceImageSize(r,n,a);return n=u.width,a=u.height,{dataFormat:i,type:o,compressed:c,width:n,height:a,format:t,data:r}}},{key:"_deduceImageSize",value:function(e,t,r){var n;return n="undefined"!==typeof ImageData&&e instanceof ImageData?{width:e.width,height:e.height}:"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement?{width:e.naturalWidth,height:e.naturalHeight}:"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?{width:e.width,height:e.height}:"undefined"!==typeof HTMLVideoElement&&e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e?{width:t,height:r}:{width:t>=0?t:1,height:r>=0?r:1},Object(v["a"])(n,"Could not deduced texture size"),Object(v["a"])(void 0===t||n.width===t,"Deduced texture width does not match supplied width"),Object(v["a"])(void 0===r||n.height===r,"Deduced texture height does not match supplied height"),n}},{key:"_createHandle",value:function(){return this.gl.createTexture()}},{key:"_deleteHandle",value:function(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}},{key:"_getParameter",value:function(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);var t=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),t}}},{key:"_setParameter",value:function(e,t){switch(this.gl.bindTexture(this.target,this.handle),t=this._getNPOTParam(e,t),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,t);break;case 4096:case 4097:Object(v["a"])(!1);break;default:this.gl.texParameteri(this.target,e,t);break}return this.gl.bindTexture(this.target,null),this}},{key:"_isNPOT",value:function(){return!Object(l["e"])(this.gl)&&(!(!this.width||!this.height)&&(!Object(b["b"])(this.width)||!Object(b["b"])(this.height)))}},{key:"_updateForNPOT",value:function(e){void 0===e[this.gl.TEXTURE_MIN_FILTER]&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===e[this.gl.TEXTURE_WRAP_S]&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===e[this.gl.TEXTURE_WRAP_T]&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}},{key:"_getNPOTParam",value:function(e,t){if(this._isNPOT())switch(e){case 10241:-1===g.indexOf(t)&&(t=9729);break;case 10242:case 10243:33071!==t&&(t=33071);break;default:break}return t}}]),t}(s["a"])},"99de":function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r("53ca"),a=r("257e");function i(e,t){return!t||"object"!==Object(n["a"])(t)&&"function"!==typeof t?Object(a["a"])(e):t}},"9a8c":function(e,t,r){"use strict";var n=r("ebb5"),a=r("145e"),i=n.aTypedArray,o=n.exportTypedArrayMethod;o("copyWithin",(function(e,t){return a.call(i(this),e,t,arguments.length>2?arguments[2]:void 0)}))},"9f85":function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));var n,a=r("d4ec"),i=r("99de"),o=r("7e84"),c=r("257e"),s=r("bee2"),u=r("262e"),f=r("2fc2"),l=r("ade3"),d="EXT_color_buffer_float",h=(n={},Object(l["a"])(n,33189,{bpp:2}),Object(l["a"])(n,33190,{gl2:!0,bpp:3}),Object(l["a"])(n,36012,{gl2:!0,bpp:4}),Object(l["a"])(n,36168,{bpp:1}),Object(l["a"])(n,34041,{bpp:4}),Object(l["a"])(n,35056,{gl2:!0,bpp:4}),Object(l["a"])(n,36013,{gl2:!0,bpp:5}),Object(l["a"])(n,32854,{bpp:2}),Object(l["a"])(n,36194,{bpp:2}),Object(l["a"])(n,32855,{bpp:2}),Object(l["a"])(n,33321,{gl2:!0,bpp:1}),Object(l["a"])(n,33330,{gl2:!0,bpp:1}),Object(l["a"])(n,33329,{gl2:!0,bpp:1}),Object(l["a"])(n,33332,{gl2:!0,bpp:2}),Object(l["a"])(n,33331,{gl2:!0,bpp:2}),Object(l["a"])(n,33334,{gl2:!0,bpp:4}),Object(l["a"])(n,33333,{gl2:!0,bpp:4}),Object(l["a"])(n,33323,{gl2:!0,bpp:2}),Object(l["a"])(n,33336,{gl2:!0,bpp:2}),Object(l["a"])(n,33335,{gl2:!0,bpp:2}),Object(l["a"])(n,33338,{gl2:!0,bpp:4}),Object(l["a"])(n,33337,{gl2:!0,bpp:4}),Object(l["a"])(n,33340,{gl2:!0,bpp:8}),Object(l["a"])(n,33339,{gl2:!0,bpp:8}),Object(l["a"])(n,32849,{gl2:!0,bpp:3}),Object(l["a"])(n,32856,{gl2:!0,bpp:4}),Object(l["a"])(n,32857,{gl2:!0,bpp:4}),Object(l["a"])(n,36220,{gl2:!0,bpp:4}),Object(l["a"])(n,36238,{gl2:!0,bpp:4}),Object(l["a"])(n,36975,{gl2:!0,bpp:4}),Object(l["a"])(n,36214,{gl2:!0,bpp:8}),Object(l["a"])(n,36232,{gl2:!0,bpp:8}),Object(l["a"])(n,36226,{gl2:!0,bpp:16}),Object(l["a"])(n,36208,{gl2:!0,bpp:16}),Object(l["a"])(n,33325,{gl2:d,bpp:2}),Object(l["a"])(n,33327,{gl2:d,bpp:4}),Object(l["a"])(n,34842,{gl2:d,bpp:8}),Object(l["a"])(n,33326,{gl2:d,bpp:4}),Object(l["a"])(n,33328,{gl2:d,bpp:8}),Object(l["a"])(n,34836,{gl2:d,bpp:16}),Object(l["a"])(n,35898,{gl2:d,bpp:4}),n),b=r("89e8"),v=r("0b1c");function g(e,t,r){var n=r[t];if(!n)return!1;var a=Object(b["e"])(e)&&n.gl2||n.gl1;return"string"===typeof a?e.getExtension(a):a}var y=function(e){function t(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(a["a"])(this,t),r=Object(i["a"])(this,Object(o["a"])(t).call(this,e,n)),r.initialize(n),Object.seal(Object(c["a"])(r)),r}return Object(u["a"])(t,e),Object(s["a"])(t,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{format:null},r=t.format;return!r||g(e,r,h)}},{key:"getSamplesForFormat",value:function(e,t){var r=t.format;return e.getInternalformatParameter(36161,r,32937)}}]),Object(s["a"])(t,[{key:"initialize",value:function(e){var t=e.format,r=e.width,n=void 0===r?1:r,a=e.height,i=void 0===a?1:a,o=e.samples,c=void 0===o?0:o;return Object(v["a"])(t,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==c&&Object(b["e"])(this.gl)?this.gl.renderbufferStorageMultisample(36161,c,t,n,i):this.gl.renderbufferStorage(36161,t,n,i),this.format=t,this.width=n,this.height=i,this.samples=c,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*h[this.format].bpp),this}},{key:"resize",value:function(e){var t=e.width,r=e.height;return t!==this.width||r!==this.height?this.initialize({width:t,height:r,format:this.format,samples:this.samples}):this}},{key:"_createHandle",value:function(){return this.gl.createRenderbuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}},{key:"_bindHandle",value:function(e){this.gl.bindRenderbuffer(36161,e)}},{key:"_syncHandle",value:function(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}},{key:"_getParameter",value:function(e){this.gl.bindRenderbuffer(36161,this.handle);var t=this.gl.getRenderbufferParameter(36161,e);return t}}]),t}(f["a"])},a078:function(e,t,r){var n=r("7b0b"),a=r("50c4"),i=r("35a1"),o=r("e95a"),c=r("0366"),s=r("ebb5").aTypedArrayConstructor;e.exports=function(e){var t,r,u,f,l,d,h=n(e),b=arguments.length,v=b>1?arguments[1]:void 0,g=void 0!==v,y=i(h);if(void 0!=y&&!o(y)){l=y.call(h),d=l.next,h=[];while(!(f=d.call(l)).done)h.push(f.value)}for(g&&b>2&&(v=c(v,arguments[2],2)),r=a(h.length),u=new(s(this))(r),t=0;r>t;t++)u[t]=g?v(h[t],t):h[t];return u}},a1e8:function(e,t,r){"use strict";r.d(t,"c",(function(){return H})),r.d(t,"a",(function(){return X})),r.d(t,"b",(function(){return W}));var n,a=r("3835"),i=r("ade3"),o=r("0b1c"),c=5120,s=5121,u=5122,f=5123,l=0,d=1,h=2,b=3,v=4,g=5,y=6,m=5126,p=35664,O=35665,j=35666,_=5124,A=35667,w=35668,x=35669,E=5125,T=36294,k=36295,S=36296,L=35670,I=35671,F=35672,P=35673,R=35674,B=35675,M=35676,D=35685,C=35686,N=35687,U=35688,G=35689,V=35690,z=(n={},Object(i["a"])(n,m,[m,1,"float"]),Object(i["a"])(n,p,[m,2,"vec2"]),Object(i["a"])(n,O,[m,3,"vec3"]),Object(i["a"])(n,j,[m,4,"vec4"]),Object(i["a"])(n,_,[_,1,"int"]),Object(i["a"])(n,A,[_,2,"ivec2"]),Object(i["a"])(n,w,[_,3,"ivec3"]),Object(i["a"])(n,x,[_,4,"ivec4"]),Object(i["a"])(n,E,[E,1,"uint"]),Object(i["a"])(n,T,[E,2,"uvec2"]),Object(i["a"])(n,k,[E,3,"uvec3"]),Object(i["a"])(n,S,[E,4,"uvec4"]),Object(i["a"])(n,L,[m,1,"bool"]),Object(i["a"])(n,I,[m,2,"bvec2"]),Object(i["a"])(n,F,[m,3,"bvec3"]),Object(i["a"])(n,P,[m,4,"bvec4"]),Object(i["a"])(n,R,[m,8,"mat2"]),Object(i["a"])(n,D,[m,8,"mat2x3"]),Object(i["a"])(n,C,[m,8,"mat2x4"]),Object(i["a"])(n,B,[m,12,"mat3"]),Object(i["a"])(n,N,[m,12,"mat3x2"]),Object(i["a"])(n,U,[m,12,"mat3x4"]),Object(i["a"])(n,M,[m,16,"mat4"]),Object(i["a"])(n,G,[m,16,"mat4x2"]),Object(i["a"])(n,V,[m,16,"mat4x3"]),n);function H(e){switch(e){case l:return l;case d:return d;case b:return d;case h:return d;case v:return v;case g:return v;case y:return v;default:return Object(o["a"])(!1),0}}function X(e){var t=z[e];if(!t)return null;var r=Object(a["a"])(t,2),n=r[0],i=r[1];return{type:n,components:i}}function W(e,t){switch(e){case c:case s:case u:case f:e=m;break;default:}for(var r in z){var n=Object(a["a"])(z[r],3),i=n[0],o=n[1],l=n[2];if(i===e&&o===t)return{glType:r,name:l}}return null}},a34a:function(e,t,r){e.exports=r("96cf")},a511:function(e,t,r){"use strict";r.d(t,"a",(function(){return v})),r.d(t,"b",(function(){return g}));var n=r("3835"),a=r("89e8"),i=r("4945"),o=r("0b1c"),c=256,s=1024,u=16384,f=6144,l=6145,d=6146,h=34041,b="clear: bad arguments";function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.framebuffer,n=void 0===r?null:r,i=t.color,f=void 0===i?null:i,l=t.depth,d=void 0===l?null:l,h=t.stencil,v=void 0===h?null:h,g={};n&&(g.framebuffer=n);var y=0;f&&(y|=u,!0!==f&&(g.clearColor=f)),d&&(y|=c,!0!==d&&(g.clearDepth=d)),v&&(y|=s,!0!==d&&(g.clearStencil=d)),Object(o["a"])(0!==y,b),Object(a["j"])(e,g,(function(){e.clear(y)}))}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.framebuffer,c=void 0===r?null:r,s=t.buffer,u=void 0===s?f:s,v=t.drawBuffer,g=void 0===v?0:v,y=t.value,m=void 0===y?[0,0,0,0]:y;Object(i["a"])(e),Object(a["j"])(e,{framebuffer:c},(function(){switch(u){case f:switch(m.constructor){case Int32Array:e.clearBufferiv(u,g,m);break;case Uint32Array:e.clearBufferuiv(u,g,m);break;case Float32Array:default:e.clearBufferfv(u,g,m)}break;case l:e.clearBufferfv(l,0,[m]);break;case d:e.clearBufferiv(d,0,[m]);break;case h:var t=Object(n["a"])(m,2),r=t[0],a=t[1];e.clearBufferfi(h,0,r,a);break;default:Object(o["a"])(!1,b)}}))}},a7bc:function(e,t,r){"use strict";r.d(t,"b",(function(){return x})),r.d(t,"a",(function(){return E}));var n=r("b1cf"),a=r("d752"),i=r("97a3"),o=r("89e8"),c=r("4945"),s=r("07df"),u=r("0b1c");function f(e){switch(e){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return Object(u["a"])(!1),0}}var l=r("ade3"),d=(r("7f94"),r("a34a")),h=r.n(d),b=r("1da1"),v=r("d4ec"),g=r("bee2"),y=r("99de"),m=r("7e84"),p=r("257e"),O=r("262e"),j=[34069,34070,34071,34072,34073,34074],_=function(e){function t(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(v["a"])(this,t),Object(c["b"])(e),r=Object(y["a"])(this,Object(m["a"])(t).call(this,e,Object.assign({},n,{target:34067}))),r.initialize(n),Object.seal(Object(p["a"])(r)),r}return Object(O["a"])(t,e),Object(g["a"])(t,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.mipmaps,n=void 0===r||r,a=t.parameters,i=void 0===a?{}:a;this.opts=t,this.setCubeMapImageData(t).then((function(){e.loaded=!0,n&&e.generateMipmap(t),e.setParameters(i)}))}},{key:"subImage",value:function(e){var t=e.face,r=e.data,n=e.x,a=void 0===n?0:n,i=e.y,o=void 0===i?0:i,c=e.mipmapLevel,s=void 0===c?0:c;return this._subImage({target:t,data:r,x:a,y:o,mipmapLevel:s})}},{key:"setCubeMapImageData",value:function(){var e=Object(b["a"])(h.a.mark((function e(t){var r,n,a,i,c,s,u,f,l,d,b,v,g,y=this;return h.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.width,n=t.height,a=t.pixels,i=t.data,c=t.border,s=void 0===c?0:c,u=t.format,f=void 0===u?6408:u,l=t.type,d=void 0===l?5121:l,b=this.gl,v=a||i,e.next=5,Promise.all(j.map((function(e){var t=v[e];return Promise.all(Array.isArray(t)?t:[t])})));case 5:g=e.sent,this.bind(),j.forEach((function(e,t){g[t].length>1&&!1!==y.opts.mipmaps&&o["f"].warn("".concat(y.id," has mipmap and multiple LODs."))(),g[t].forEach((function(t,a){r&&n?b.texImage2D(e,a,f,r,n,s,f,d,t):b.texImage2D(e,a,f,f,d,t)}))})),this.unbind();case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setImageDataForFace",value:function(e){var t=this,r=e.face,n=e.width,a=e.height,i=e.pixels,o=e.data,c=e.border,s=void 0===c?0:c,u=e.format,f=void 0===u?6408:u,l=e.type,d=void 0===l?5121:l,h=this.gl,b=i||o;return this.bind(),b instanceof Promise?b.then((function(n){return t.setImageDataForFace(Object.assign({},e,{face:r,data:n,pixels:n}))})):this.width||this.height?h.texImage2D(r,0,f,n,a,s,f,d,b):h.texImage2D(r,0,f,f,d,b),this}}]),t}(i["a"]);_.FACES=j;var A=r("b980");(function(e){function t(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(v["a"])(this,t),Object(c["a"])(e),n=Object.assign({depth:1},n,{target:32879,unpackFlipY:!1}),r=Object(y["a"])(this,Object(m["a"])(t).call(this,e,n)),r.initialize(n),Object.seal(Object(p["a"])(r)),r}Object(O["a"])(t,e),Object(g["a"])(t,null,[{key:"isSupported",value:function(e){return Object(o["e"])(e)}}]),Object(g["a"])(t,[{key:"setImageData",value:function(e){var t=this,r=e.level,a=void 0===r?0:r,i=e.dataFormat,c=void 0===i?6408:i,s=e.width,u=e.height,f=e.depth,l=void 0===f?1:f,d=e.border,h=void 0===d?0:d,b=e.format,v=e.type,g=void 0===v?5121:v,y=e.offset,m=void 0===y?0:y,p=e.data,O=e.parameters,j=void 0===O?{}:O;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),Object(o["j"])(this.gl,j,(function(){ArrayBuffer.isView(p)&&t.gl.texImage3D(t.target,a,c,s,u,l,h,b,g,p),p instanceof n["a"]&&(t.gl.bindBuffer(35052,p.handle),t.gl.texImage3D(t.target,a,c,s,u,l,h,b,g,m))})),p&&p.byteLength)this._trackAllocatedMemory(p.byteLength,"Texture");else{var _=A["a"][this.dataFormat]||4,w=A["c"][this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*_*w,"Texture")}return this.loaded=!0,this}}])})(i["a"]);function w(e,t){var r=e.gl,n=e.width,i=e.height,o=e.id,c=new a["a"](r,Object.assign({},t,{id:"framebuffer-for-".concat(o),width:n,height:i,attachments:Object(l["a"])({},36064,e)}));return c}function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.sourceX,n=void 0===r?0:r,a=t.sourceY,i=void 0===a?0:a,o=t.sourceFormat,c=void 0===o?6408:o,f=t.sourceAttachment,l=void 0===f?36064:f,d=t.target,h=void 0===d?null:d,b=t.sourceWidth,v=t.sourceHeight,g=t.sourceType,y=T(e),m=y.framebuffer,p=y.deleteFramebuffer;Object(u["a"])(m);var O=m.gl,j=m.handle,_=m.attachments;b=b||m.width,v=v||m.height,36064===l&&null===j&&(l=1028),Object(u["a"])(_[l]),g=g||_[l].type,h=k(h,g,c,b,v),g=g||Object(s["b"])(h);var A=O.bindFramebuffer(36160,j);return O.readPixels(n,i,b,v,c,g,h),O.bindFramebuffer(36160,A||null),p&&m["delete"](),h}function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.sourceAttachment,n=void 0===r?36064:r,a=t.targetMaxHeight,i=void 0===a?Number.MAX_SAFE_INTEGER:a,o=x(e,{sourceAttachment:n}),c=e.width,u=e.height;while(u>i){var f=Object(s["d"])({data:o,width:c,height:u});o=f.data,c=f.width,u=f.height}Object(s["a"])({data:o,width:c,height:u});var l=document.createElement("canvas");l.width=c,l.height=u;var d=l.getContext("2d"),h=d.createImageData(c,u);return h.data.set(o),d.putImageData(h,0,0),l.toDataURL()}function T(e){return e instanceof a["a"]?{framebuffer:e,deleteFramebuffer:!1}:{framebuffer:w(e),deleteFramebuffer:!0}}function k(e,t,r,n,a){if(e)return e;t=t||5121;var i=Object(s["c"])(t,{clamped:!1}),o=f(r);return new i(n*a*o)}},a975:function(e,t,r){"use strict";var n=r("ebb5"),a=r("b727").every,i=n.aTypedArray,o=n.exportTypedArrayMethod;o("every",(function(e){return a(i(this),e,arguments.length>1?arguments[1]:void 0)}))},a981:function(e,t){e.exports="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof DataView},acac:function(e,t,r){"use strict";var n=r("e2cc"),a=r("f183").getWeakData,i=r("825a"),o=r("861d"),c=r("19aa"),s=r("2266"),u=r("b727"),f=r("5135"),l=r("69f3"),d=l.set,h=l.getterFor,b=u.find,v=u.findIndex,g=0,y=function(e){return e.frozen||(e.frozen=new m)},m=function(){this.entries=[]},p=function(e,t){return b(e.entries,(function(e){return e[0]===t}))};m.prototype={get:function(e){var t=p(this,e);if(t)return t[1]},has:function(e){return!!p(this,e)},set:function(e,t){var r=p(this,e);r?r[1]=t:this.entries.push([e,t])},delete:function(e){var t=v(this.entries,(function(t){return t[0]===e}));return~t&&this.entries.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,r,u){var l=e((function(e,n){c(e,l,t),d(e,{type:t,id:g++,frozen:void 0}),void 0!=n&&s(n,e[u],e,r)})),b=h(t),v=function(e,t,r){var n=b(e),o=a(i(t),!0);return!0===o?y(n).set(t,r):o[n.id]=r,e};return n(l.prototype,{delete:function(e){var t=b(this);if(!o(e))return!1;var r=a(e);return!0===r?y(t)["delete"](e):r&&f(r,t.id)&&delete r[t.id]},has:function(e){var t=b(this);if(!o(e))return!1;var r=a(e);return!0===r?y(t).has(e):r&&f(r,t.id)}}),n(l.prototype,r?{get:function(e){var t=b(this);if(o(e)){var r=a(e);return!0===r?y(t).get(e):r?r[t.id]:void 0}},set:function(e,t){return v(this,e,t)}}:{add:function(e){return v(this,e,!0)}}),l}}},ade3:function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"a",(function(){return n}))},ae79:function(e,t,r){"use strict";r.d(t,"b",(function(){return a})),r.d(t,"a",(function(){return i}));var n=r("0b1c");function a(e,t){if("string"!==typeof t)return t;var r=Number(t);if(!isNaN(r))return r;t=t.replace(/^.*\./,"");var a=e[t];return Object(n["a"])(void 0!==a,"Accessing undefined constant GL.".concat(t)),a}function i(e,t){for(var r in t=Number(t),e)if(e[r]===t)return"GL.".concat(r);return String(t)}},ae9d:function(e,t,r){"use strict";r.d(t,"c",(function(){return f})),r.d(t,"e",(function(){return y})),r.d(t,"a",(function(){return p})),r.d(t,"b",(function(){return O})),r.d(t,"d",(function(){return _}));var n,a,i,o=r("3835"),c=r("2909"),s=r("ade3"),u=r("83a9"),f=(n={},Object(s["a"])(n,3042,!1),Object(s["a"])(n,32773,new Float32Array([0,0,0,0])),Object(s["a"])(n,32777,32774),Object(s["a"])(n,34877,32774),Object(s["a"])(n,32969,1),Object(s["a"])(n,32968,0),Object(s["a"])(n,32971,1),Object(s["a"])(n,32970,0),Object(s["a"])(n,3106,new Float32Array([0,0,0,0])),Object(s["a"])(n,3107,[!0,!0,!0,!0]),Object(s["a"])(n,2884,!1),Object(s["a"])(n,2885,1029),Object(s["a"])(n,2929,!1),Object(s["a"])(n,2931,1),Object(s["a"])(n,2932,513),Object(s["a"])(n,2928,new Float32Array([0,1])),Object(s["a"])(n,2930,!0),Object(s["a"])(n,3024,!0),Object(s["a"])(n,36006,null),Object(s["a"])(n,2886,2305),Object(s["a"])(n,33170,4352),Object(s["a"])(n,2849,1),Object(s["a"])(n,32823,!1),Object(s["a"])(n,32824,0),Object(s["a"])(n,10752,0),Object(s["a"])(n,32938,1),Object(s["a"])(n,32939,!1),Object(s["a"])(n,3089,!1),Object(s["a"])(n,3088,new Int32Array([0,0,1024,1024])),Object(s["a"])(n,2960,!1),Object(s["a"])(n,2961,0),Object(s["a"])(n,2968,4294967295),Object(s["a"])(n,36005,4294967295),Object(s["a"])(n,2962,519),Object(s["a"])(n,2967,0),Object(s["a"])(n,2963,4294967295),Object(s["a"])(n,34816,519),Object(s["a"])(n,36003,0),Object(s["a"])(n,36004,4294967295),Object(s["a"])(n,2964,7680),Object(s["a"])(n,2965,7680),Object(s["a"])(n,2966,7680),Object(s["a"])(n,34817,7680),Object(s["a"])(n,34818,7680),Object(s["a"])(n,34819,7680),Object(s["a"])(n,2978,[0,0,1024,1024]),Object(s["a"])(n,3333,4),Object(s["a"])(n,3317,4),Object(s["a"])(n,37440,!1),Object(s["a"])(n,37441,!1),Object(s["a"])(n,37443,37444),Object(s["a"])(n,35723,4352),Object(s["a"])(n,36010,null),Object(s["a"])(n,35977,!1),Object(s["a"])(n,3330,0),Object(s["a"])(n,3332,0),Object(s["a"])(n,3331,0),Object(s["a"])(n,3314,0),Object(s["a"])(n,32878,0),Object(s["a"])(n,3316,0),Object(s["a"])(n,3315,0),Object(s["a"])(n,32877,0),n),l=function(e,t,r){return t?e.enable(r):e.disable(r)},d=function(e,t,r){return e.hint(r,t)},h=function(e,t,r){return e.pixelStorei(r,t)},b=function(e,t){var r=Object(u["g"])(e)?36009:36160;return e.bindFramebuffer(r,t)},v=function(e,t){return e.bindFramebuffer(36008,t)};function g(e){return Array.isArray(e)||ArrayBuffer.isView(e)}var y=(a={},Object(s["a"])(a,3042,l),Object(s["a"])(a,32773,(function(e,t){return e.blendColor.apply(e,Object(c["a"])(t))})),Object(s["a"])(a,32777,"blendEquation"),Object(s["a"])(a,34877,"blendEquation"),Object(s["a"])(a,32969,"blendFunc"),Object(s["a"])(a,32968,"blendFunc"),Object(s["a"])(a,32971,"blendFunc"),Object(s["a"])(a,32970,"blendFunc"),Object(s["a"])(a,3106,(function(e,t){return e.clearColor.apply(e,Object(c["a"])(t))})),Object(s["a"])(a,3107,(function(e,t){return e.colorMask.apply(e,Object(c["a"])(t))})),Object(s["a"])(a,2884,l),Object(s["a"])(a,2885,(function(e,t){return e.cullFace(t)})),Object(s["a"])(a,2929,l),Object(s["a"])(a,2931,(function(e,t){return e.clearDepth(t)})),Object(s["a"])(a,2932,(function(e,t){return e.depthFunc(t)})),Object(s["a"])(a,2928,(function(e,t){return e.depthRange.apply(e,Object(c["a"])(t))})),Object(s["a"])(a,2930,(function(e,t){return e.depthMask(t)})),Object(s["a"])(a,3024,l),Object(s["a"])(a,35723,d),Object(s["a"])(a,36006,b),Object(s["a"])(a,2886,(function(e,t){return e.frontFace(t)})),Object(s["a"])(a,33170,d),Object(s["a"])(a,2849,(function(e,t){return e.lineWidth(t)})),Object(s["a"])(a,32823,l),Object(s["a"])(a,32824,"polygonOffset"),Object(s["a"])(a,10752,"polygonOffset"),Object(s["a"])(a,35977,l),Object(s["a"])(a,32938,"sampleCoverage"),Object(s["a"])(a,32939,"sampleCoverage"),Object(s["a"])(a,3089,l),Object(s["a"])(a,3088,(function(e,t){return e.scissor.apply(e,Object(c["a"])(t))})),Object(s["a"])(a,2960,l),Object(s["a"])(a,2961,(function(e,t){return e.clearStencil(t)})),Object(s["a"])(a,2968,(function(e,t){return e.stencilMaskSeparate(1028,t)})),Object(s["a"])(a,36005,(function(e,t){return e.stencilMaskSeparate(1029,t)})),Object(s["a"])(a,2962,"stencilFuncFront"),Object(s["a"])(a,2967,"stencilFuncFront"),Object(s["a"])(a,2963,"stencilFuncFront"),Object(s["a"])(a,34816,"stencilFuncBack"),Object(s["a"])(a,36003,"stencilFuncBack"),Object(s["a"])(a,36004,"stencilFuncBack"),Object(s["a"])(a,2964,"stencilOpFront"),Object(s["a"])(a,2965,"stencilOpFront"),Object(s["a"])(a,2966,"stencilOpFront"),Object(s["a"])(a,34817,"stencilOpBack"),Object(s["a"])(a,34818,"stencilOpBack"),Object(s["a"])(a,34819,"stencilOpBack"),Object(s["a"])(a,2978,(function(e,t){return e.viewport.apply(e,Object(c["a"])(t))})),Object(s["a"])(a,3333,h),Object(s["a"])(a,3317,h),Object(s["a"])(a,37440,h),Object(s["a"])(a,37441,h),Object(s["a"])(a,37443,h),Object(s["a"])(a,3330,h),Object(s["a"])(a,3332,h),Object(s["a"])(a,3331,h),Object(s["a"])(a,36010,v),Object(s["a"])(a,3314,h),Object(s["a"])(a,32878,h),Object(s["a"])(a,3316,h),Object(s["a"])(a,3315,h),Object(s["a"])(a,32877,h),Object(s["a"])(a,"framebuffer",(function(e,t){var r=t&&"handle"in t?t.handle:t;return e.bindFramebuffer(36160,r)})),Object(s["a"])(a,"blend",(function(e,t){return t?e.enable(3042):e.disable(3042)})),Object(s["a"])(a,"blendColor",(function(e,t){return e.blendColor.apply(e,Object(c["a"])(t))})),Object(s["a"])(a,"blendEquation",(function(e,t){t=g(t)?t:[t,t],e.blendEquationSeparate.apply(e,Object(c["a"])(t))})),Object(s["a"])(a,"blendFunc",(function(e,t){t=g(t)&&2===t.length?[].concat(Object(c["a"])(t),Object(c["a"])(t)):t,e.blendFuncSeparate.apply(e,Object(c["a"])(t))})),Object(s["a"])(a,"clearColor",(function(e,t){return e.clearColor.apply(e,Object(c["a"])(t))})),Object(s["a"])(a,"clearDepth",(function(e,t){return e.clearDepth(t)})),Object(s["a"])(a,"clearStencil",(function(e,t){return e.clearStencil(t)})),Object(s["a"])(a,"colorMask",(function(e,t){return e.colorMask.apply(e,Object(c["a"])(t))})),Object(s["a"])(a,"cull",(function(e,t){return t?e.enable(2884):e.disable(2884)})),Object(s["a"])(a,"cullFace",(function(e,t){return e.cullFace(t)})),Object(s["a"])(a,"depthTest",(function(e,t){return t?e.enable(2929):e.disable(2929)})),Object(s["a"])(a,"depthFunc",(function(e,t){return e.depthFunc(t)})),Object(s["a"])(a,"depthMask",(function(e,t){return e.depthMask(t)})),Object(s["a"])(a,"depthRange",(function(e,t){return e.depthRange.apply(e,Object(c["a"])(t))})),Object(s["a"])(a,"dither",(function(e,t){return t?e.enable(3024):e.disable(3024)})),Object(s["a"])(a,"derivativeHint",(function(e,t){e.hint(35723,t)})),Object(s["a"])(a,"frontFace",(function(e,t){return e.frontFace(t)})),Object(s["a"])(a,"mipmapHint",(function(e,t){return e.hint(33170,t)})),Object(s["a"])(a,"lineWidth",(function(e,t){return e.lineWidth(t)})),Object(s["a"])(a,"polygonOffsetFill",(function(e,t){return t?e.enable(32823):e.disable(32823)})),Object(s["a"])(a,"polygonOffset",(function(e,t){return e.polygonOffset.apply(e,Object(c["a"])(t))})),Object(s["a"])(a,"sampleCoverage",(function(e,t){return e.sampleCoverage.apply(e,Object(c["a"])(t))})),Object(s["a"])(a,"scissorTest",(function(e,t){return t?e.enable(3089):e.disable(3089)})),Object(s["a"])(a,"scissor",(function(e,t){return e.scissor.apply(e,Object(c["a"])(t))})),Object(s["a"])(a,"stencilTest",(function(e,t){return t?e.enable(2960):e.disable(2960)})),Object(s["a"])(a,"stencilMask",(function(e,t){t=g(t)?t:[t,t];var r=t,n=Object(o["a"])(r,2),a=n[0],i=n[1];e.stencilMaskSeparate(1028,a),e.stencilMaskSeparate(1029,i)})),Object(s["a"])(a,"stencilFunc",(function(e,t){t=g(t)&&3===t.length?[].concat(Object(c["a"])(t),Object(c["a"])(t)):t;var r=t,n=Object(o["a"])(r,6),a=n[0],i=n[1],s=n[2],u=n[3],f=n[4],l=n[5];e.stencilFuncSeparate(1028,a,i,s),e.stencilFuncSeparate(1029,u,f,l)})),Object(s["a"])(a,"stencilOp",(function(e,t){t=g(t)&&3===t.length?[].concat(Object(c["a"])(t),Object(c["a"])(t)):t;var r=t,n=Object(o["a"])(r,6),a=n[0],i=n[1],s=n[2],u=n[3],f=n[4],l=n[5];e.stencilOpSeparate(1028,a,i,s),e.stencilOpSeparate(1029,u,f,l)})),Object(s["a"])(a,"viewport",(function(e,t){return e.viewport.apply(e,Object(c["a"])(t))})),a);function m(e,t,r){return void 0!==t[e]?t[e]:r[e]}var p={blendEquation:function(e,t,r){return e.blendEquationSeparate(m(32777,t,r),m(34877,t,r))},blendFunc:function(e,t,r){return e.blendFuncSeparate(m(32969,t,r),m(32968,t,r),m(32971,t,r),m(32970,t,r))},polygonOffset:function(e,t,r){return e.polygonOffset(m(32824,t,r),m(10752,t,r))},sampleCoverage:function(e,t,r){return e.sampleCoverage(m(32938,t,r),m(32939,t,r))},stencilFuncFront:function(e,t,r){return e.stencilFuncSeparate(1028,m(2962,t,r),m(2967,t,r),m(2963,t,r))},stencilFuncBack:function(e,t,r){return e.stencilFuncSeparate(1029,m(34816,t,r),m(36003,t,r),m(36004,t,r))},stencilOpFront:function(e,t,r){return e.stencilOpSeparate(1028,m(2964,t,r),m(2965,t,r),m(2966,t,r))},stencilOpBack:function(e,t,r){return e.stencilOpSeparate(1029,m(34817,t,r),m(34818,t,r),m(34819,t,r))}},O={enable:function(e,t){return e(Object(s["a"])({},t,!0))},disable:function(e,t){return e(Object(s["a"])({},t,!1))},pixelStorei:function(e,t,r){return e(Object(s["a"])({},t,r))},hint:function(e,t,r){return e(Object(s["a"])({},t,r))},bindFramebuffer:function(e,t,r){var n;switch(t){case 36160:return e((n={},Object(s["a"])(n,36006,r),Object(s["a"])(n,36010,r),n));case 36009:return e(Object(s["a"])({},36006,r));case 36008:return e(Object(s["a"])({},36010,r));default:return null}},blendColor:function(e,t,r,n,a){return e(Object(s["a"])({},32773,new Float32Array([t,r,n,a])))},blendEquation:function(e,t){var r;return e((r={},Object(s["a"])(r,32777,t),Object(s["a"])(r,34877,t),r))},blendEquationSeparate:function(e,t,r){var n;return e((n={},Object(s["a"])(n,32777,t),Object(s["a"])(n,34877,r),n))},blendFunc:function(e,t,r){var n;return e((n={},Object(s["a"])(n,32969,t),Object(s["a"])(n,32968,r),Object(s["a"])(n,32971,t),Object(s["a"])(n,32970,r),n))},blendFuncSeparate:function(e,t,r,n,a){var i;return e((i={},Object(s["a"])(i,32969,t),Object(s["a"])(i,32968,r),Object(s["a"])(i,32971,n),Object(s["a"])(i,32970,a),i))},clearColor:function(e,t,r,n,a){return e(Object(s["a"])({},3106,new Float32Array([t,r,n,a])))},clearDepth:function(e,t){return e(Object(s["a"])({},2931,t))},clearStencil:function(e,t){return e(Object(s["a"])({},2961,t))},colorMask:function(e,t,r,n,a){return e(Object(s["a"])({},3107,[t,r,n,a]))},cullFace:function(e,t){return e(Object(s["a"])({},2885,t))},depthFunc:function(e,t){return e(Object(s["a"])({},2932,t))},depthRange:function(e,t,r){return e(Object(s["a"])({},2928,new Float32Array([t,r])))},depthMask:function(e,t){return e(Object(s["a"])({},2930,t))},frontFace:function(e,t){return e(Object(s["a"])({},2886,t))},lineWidth:function(e,t){return e(Object(s["a"])({},2849,t))},polygonOffset:function(e,t,r){var n;return e((n={},Object(s["a"])(n,32824,t),Object(s["a"])(n,10752,r),n))},sampleCoverage:function(e,t,r){var n;return e((n={},Object(s["a"])(n,32938,t),Object(s["a"])(n,32939,r),n))},scissor:function(e,t,r,n,a){return e(Object(s["a"])({},3088,new Int32Array([t,r,n,a])))},stencilMask:function(e,t){var r;return e((r={},Object(s["a"])(r,2968,t),Object(s["a"])(r,36005,t),r))},stencilMaskSeparate:function(e,t,r){return e(Object(s["a"])({},1028===t?2968:36005,r))},stencilFunc:function(e,t,r,n){var a;return e((a={},Object(s["a"])(a,2962,t),Object(s["a"])(a,2967,r),Object(s["a"])(a,2963,n),Object(s["a"])(a,34816,t),Object(s["a"])(a,36003,r),Object(s["a"])(a,36004,n),a))},stencilFuncSeparate:function(e,t,r,n,a){var i;return e((i={},Object(s["a"])(i,1028===t?2962:34816,r),Object(s["a"])(i,1028===t?2967:36003,n),Object(s["a"])(i,1028===t?2963:36004,a),i))},stencilOp:function(e,t,r,n){var a;return e((a={},Object(s["a"])(a,2964,t),Object(s["a"])(a,2965,r),Object(s["a"])(a,2966,n),Object(s["a"])(a,34817,t),Object(s["a"])(a,34818,r),Object(s["a"])(a,34819,n),a))},stencilOpSeparate:function(e,t,r,n,a){var i;return e((i={},Object(s["a"])(i,1028===t?2964:34817,r),Object(s["a"])(i,1028===t?2965:34818,n),Object(s["a"])(i,1028===t?2966:34819,a),i))},viewport:function(e,t,r,n,a){return e(Object(s["a"])({},2978,[t,r,n,a]))}},j=function(e,t){return e.isEnabled(t)},_=(i={},Object(s["a"])(i,3042,j),Object(s["a"])(i,2884,j),Object(s["a"])(i,2929,j),Object(s["a"])(i,3024,j),Object(s["a"])(i,32823,j),Object(s["a"])(i,32926,j),Object(s["a"])(i,32928,j),Object(s["a"])(i,3089,j),Object(s["a"])(i,2960,j),Object(s["a"])(i,35977,j),i)},aed6:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var n=r("d4ec"),a=r("bee2"),i=r("89e8"),o=r("19ac"),c=function(){function e(t,r){Object(n["a"])(this,e),this.name=t,this.type=r,this.sampleSize=1,this.reset()}return Object(a["a"])(e,[{key:"setSampleSize",value:function(e){return this.sampleSize=e,this}},{key:"incrementCount",value:function(){return this.addCount(1),this}},{key:"decrementCount",value:function(){return this.subtractCount(1),this}},{key:"addCount",value:function(e){return this._count+=e,this._samples++,this._checkSampling(),this}},{key:"subtractCount",value:function(e){return this._count-=e,this._samples++,this._checkSampling(),this}},{key:"addTime",value:function(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}},{key:"timeStart",value:function(){return this._startTime=Object(o["a"])(),this._timerPending=!0,this}},{key:"timeEnd",value:function(){return this._timerPending?(this.addTime(Object(o["a"])()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}},{key:"getSampleAverageCount",value:function(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}},{key:"getSampleAverageTime",value:function(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}},{key:"getSampleHz",value:function(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}},{key:"getAverageCount",value:function(){return this.samples>0?this.count/this.samples:0}},{key:"getAverageTime",value:function(){return this.samples>0?this.time/this.samples:0}},{key:"getHz",value:function(){return this.time>0?this.samples/(this.time/1e3):0}},{key:"reset",value:function(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}},{key:"_checkSampling",value:function(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}]),e}(),s=function(){function e(t){var r=t.id,a=t.stats;Object(n["a"])(this,e),this.id=r,this.stats={},this._initializeStats(a),Object.seal(this)}return Object(a["a"])(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count";return this._getOrCreate({name:e,type:t})}},{key:"reset",value:function(){for(var e in this.stats)this.stats[e].reset();return this}},{key:"forEach",value:function(e){for(var t in this.stats)e(this.stats[t])}},{key:"getTable",value:function(){var e={};return this.forEach((function(t){e[t.name]={time:t.time||0,count:t.count||0,average:t.getAverageTime()||0,hz:t.getHz()||0}})),e}},{key:"_initializeStats",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.forEach((function(t){return e._getOrCreate(t)}))}},{key:"_getOrCreate",value:function(e){if(!e||!e.name)return null;var t=e.name,r=e.type;return this.stats[t]||(this.stats[t]=e instanceof c?e:new c(t,r)),this.stats[t]}},{key:"size",get:function(){return Object.keys(this.stats).length}}]),e}(),u=r("c526"),f="8.3.2",l="set luma.log.level=1 (or higher) to trace rendering",d=function(){function e(){Object(n["a"])(this,e),this.stats=new Map}return Object(a["a"])(e,[{key:"get",value:function(e){return this.stats.has(e)||this.stats.set(e,new s({id:e})),this.stats.get(e)}}]),e}(),h=new d;if(u["global"].luma&&u["global"].luma.VERSION!==f)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(u["global"].luma.VERSION," vs ").concat(f));u["global"].luma||(Object(u["isBrowser"])()&&i["f"].log(1,"luma.gl ".concat(f," - ").concat(l))(),u["global"].luma=u["global"].luma||{VERSION:f,version:f,log:i["f"],stats:h,globals:{modules:{},nodeIO:{}}});u["global"].luma},b1cf:function(e,t,r){"use strict";r.d(t,"a",(function(){return O}));var n=r("d4ec"),a=r("bee2"),i=r("99de"),o=r("7e84"),c=r("257e"),s=r("262e"),u=r("2fc2"),f=r("4f61"),l=r("4945"),d=r("07df"),h=r("89e8"),b=r("2c4f"),v=r("0b1c"),g=10,y={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},m={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:y},p={removedProps:y},O=function(e){function t(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(n["a"])(this,t),r=Object(i["a"])(this,Object(o["a"])(t).call(this,e,a)),r.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),r.target=a.target||(r.gl.webgl2?36662:34962),r.initialize(a),Object.seal(Object(c["a"])(r)),r}return Object(s["a"])(t,e),Object(a["a"])(t,[{key:"getElementCount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/f["a"].getBytesPerElement(e))}},{key:"getVertexCount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/f["a"].getBytesPerVertex(e))}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=Object(b["a"])("Buffer",e,m),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}},{key:"setProps",value:function(e){return e=Object(b["a"])("Buffer",e,p),"accessor"in e&&this.setAccessor(e.accessor),this}},{key:"setAccessor",value:function(e){return e=Object.assign({},e),delete e.buffer,this.accessor=new f["a"](e),this}},{key:"reallocate",value:function(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}},{key:"setData",value:function(e){return this.initialize(e)}},{key:"subData",value:function(e){ArrayBuffer.isView(e)&&(e={data:e});var t=e,r=t.data,n=t.offset,a=void 0===n?0:n,i=t.srcOffset,o=void 0===i?0:i,c=e.byteLength||e.length;Object(v["a"])(r);var s=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(s,this.handle),0!==o||void 0!==c?(Object(l["a"])(this.gl),this.gl.bufferSubData(this.target,a,r,o,c)):this.gl.bufferSubData(s,a,r),this.gl.bindBuffer(s,null),this.debugData=null,this._inferType(r),this}},{key:"copyData",value:function(e){var t=e.sourceBuffer,r=e.readOffset,n=void 0===r?0:r,a=e.writeOffset,i=void 0===a?0:a,o=e.size,c=this.gl;return Object(l["a"])(c),c.bindBuffer(36662,t.handle),c.bindBuffer(36663,this.handle),c.copyBufferSubData(36662,36663,n,i,o),c.bindBuffer(36662,null),c.bindBuffer(36663,null),this.debugData=null,this}},{key:"getData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dstData,r=void 0===t?null:t,n=e.srcByteOffset,a=void 0===n?0:n,i=e.dstOffset,o=void 0===i?0:i,c=e.length,s=void 0===c?0:c;Object(l["a"])(this.gl);var u,f,h=Object(d["c"])(this.accessor.type||5126,{clamped:!1}),b=this._getAvailableElementCount(a),g=o;r?(f=r.length,u=f-g):(u=Math.min(b,s||b),f=g+u);var y=Math.min(b,u);return s=s||y,Object(v["a"])(s<=y),r=r||new h(f),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,a,r,o,s),this.gl.bindBuffer(36662,null),r}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,r=void 0===t?this.target:t,n=e.index,a=void 0===n?this.accessor&&this.accessor.index:n,i=e.offset,o=void 0===i?0:i,c=e.size;return 35345===r||35982===r?void 0!==c?this.gl.bindBufferRange(r,a,this.handle,o,c):(Object(v["a"])(0===o),this.gl.bindBufferBase(r,a,this.handle)):this.gl.bindBuffer(r,this.handle),this}},{key:"unbind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,r=void 0===t?this.target:t,n=e.index,a=void 0===n?this.accessor&&this.accessor.index:n,i=35345===r||35982===r;return i?this.gl.bindBufferBase(r,a,null):this.gl.bindBuffer(r,null),this}},{key:"getDebugData",value:function(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(g,this.byteLength)}),{data:this.debugData,changed:!0})}},{key:"invalidateDebugData",value:function(){this.debugData=null}},{key:"_setData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.byteLength+t;Object(v["a"])(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();var n=this._getTarget();this.gl.bindBuffer(n,this.handle),this.gl.bufferData(n,r,this.usage),this.gl.bufferSubData(n,t,e),this.gl.bindBuffer(n,null),this.debugData=e.slice(0,g),this.bytesUsed=r,this._trackAllocatedMemory(r);var a=Object(d["b"])(e);return Object(v["a"])(a),this.setAccessor(new f["a"](this.accessor,{type:a})),this}},{key:"_setByteLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;Object(v["a"])(e>=0),this._trackDeallocatedMemory();var r=e;0===e&&(r=new Float32Array(0));var n=this._getTarget();return this.gl.bindBuffer(n,this.handle),this.gl.bufferData(n,r,t),this.gl.bindBuffer(n,null),this.usage=t,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}},{key:"_getTarget",value:function(){return this.gl.webgl2?36663:this.target}},{key:"_getAvailableElementCount",value:function(e){var t=Object(d["c"])(this.accessor.type||5126,{clamped:!1}),r=e/t.BYTES_PER_ELEMENT;return this.getElementCount()-r}},{key:"_inferType",value:function(e){this.accessor.type||this.setAccessor(new f["a"](this.accessor,{type:Object(d["b"])(e)}))}},{key:"_createHandle",value:function(){return this.gl.createBuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}},{key:"_getParameter",value:function(e){this.gl.bindBuffer(this.target,this.handle);var t=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),t}},{key:"setByteLength",value:function(e){return h["f"].deprecated("setByteLength","reallocate")(),this.reallocate(e)}},{key:"updateAccessor",value:function(e){return h["f"].deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new f["a"](this.accessor,e),this}},{key:"type",get:function(){return h["f"].deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}},{key:"bytes",get:function(){return h["f"].deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}}]),t}(u["a"])},b206:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r("89e8");function a(e,t,r,a){var i="See luma.gl ".concat(r," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),o=Object.getPrototypeOf(e);a.forEach((function(e){o.methodName||(o[e]=function(){throw n["f"].removed("Calling removed method ".concat(t,".").concat(e,": "),i)(),new Error(e)})}))}},b380:function(e,t,r){"use strict";function n(e,t){return n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(e,t)}r.d(t,"a",(function(){return n}))},b39a:function(e,t,r){"use strict";var n=r("da84"),a=r("ebb5"),i=r("d039"),o=n.Int8Array,c=a.aTypedArray,s=a.exportTypedArrayMethod,u=[].toLocaleString,f=[].slice,l=!!o&&i((function(){u.call(new o(1))})),d=i((function(){return[1,2].toLocaleString()!=new o([1,2]).toLocaleString()}))||!i((function(){o.prototype.toLocaleString.call([1,2])}));s("toLocaleString",(function(){return u.apply(l?f.call(c(this)):c(this),arguments)}),d)},b4c9:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n,a=r("ade3"),i=r("d752"),o=r("7f94"),c={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};function s(e){var t=new o["a"](e,{format:6408,type:5126,dataFormat:6408}),r=new i["a"](e,{id:"test-framebuffer",check:!1,attachments:Object(a["a"])({},36064,t)}),n=r.getStatus();return t["delete"](),r["delete"](),36053===n}t["b"]=(n={},Object(a["a"])(n,c.WEBGL2,[!1,!0]),Object(a["a"])(n,c.VERTEX_ARRAY_OBJECT,["OES_vertex_array_object",!0]),Object(a["a"])(n,c.TIMER_QUERY,["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"]),Object(a["a"])(n,c.INSTANCED_RENDERING,["ANGLE_instanced_arrays",!0]),Object(a["a"])(n,c.MULTIPLE_RENDER_TARGETS,["WEBGL_draw_buffers",!0]),Object(a["a"])(n,c.ELEMENT_INDEX_UINT32,["OES_element_index_uint",!0]),Object(a["a"])(n,c.BLEND_EQUATION_MINMAX,["EXT_blend_minmax",!0]),Object(a["a"])(n,c.FLOAT_BLEND,["EXT_float_blend"]),Object(a["a"])(n,c.COLOR_ENCODING_SRGB,["EXT_sRGB",!0]),Object(a["a"])(n,c.TEXTURE_DEPTH,["WEBGL_depth_texture",!0]),Object(a["a"])(n,c.TEXTURE_FLOAT,["OES_texture_float",!0]),Object(a["a"])(n,c.TEXTURE_HALF_FLOAT,["OES_texture_half_float",!0]),Object(a["a"])(n,c.TEXTURE_FILTER_LINEAR_FLOAT,["OES_texture_float_linear"]),Object(a["a"])(n,c.TEXTURE_FILTER_LINEAR_HALF_FLOAT,["OES_texture_half_float_linear"]),Object(a["a"])(n,c.TEXTURE_FILTER_ANISOTROPIC,["EXT_texture_filter_anisotropic"]),Object(a["a"])(n,c.COLOR_ATTACHMENT_RGBA32F,[s,"EXT_color_buffer_float"]),Object(a["a"])(n,c.COLOR_ATTACHMENT_FLOAT,[!1,"EXT_color_buffer_float"]),Object(a["a"])(n,c.COLOR_ATTACHMENT_HALF_FLOAT,["EXT_color_buffer_half_float"]),Object(a["a"])(n,c.GLSL_FRAG_DATA,["WEBGL_draw_buffers",!0]),Object(a["a"])(n,c.GLSL_FRAG_DEPTH,["EXT_frag_depth",!0]),Object(a["a"])(n,c.GLSL_DERIVATIVES,["OES_standard_derivatives",!0]),Object(a["a"])(n,c.GLSL_TEXTURE_LOD,["EXT_shader_texture_lod",!0]),n)},b970:function(e,t,r){"use strict";(function(e){var n=r("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o,t.isBrowserMainThread=c;var a=n(r("7037")),i=n(r("d79c"));function o(){var t="object"===("undefined"===typeof e?"undefined":(0,a["default"])(e))&&"[object process]"===String(e)&&!e.browser;return!t||(0,i["default"])()}function c(){return o()&&"undefined"!==typeof document}}).call(this,r("4362"))},b980:function(e,t,r){"use strict";r.d(t,"b",(function(){return s})),r.d(t,"a",(function(){return u})),r.d(t,"c",(function(){return f})),r.d(t,"d",(function(){return l})),r.d(t,"e",(function(){return d}));var n,a,i,o=r("ade3"),c=r("89e8"),s=(n={},Object(o["a"])(n,6407,{dataFormat:6407,types:[5121,33635]}),Object(o["a"])(n,6408,{dataFormat:6408,types:[5121,32819,32820]}),Object(o["a"])(n,6406,{dataFormat:6406,types:[5121]}),Object(o["a"])(n,6409,{dataFormat:6409,types:[5121]}),Object(o["a"])(n,6410,{dataFormat:6410,types:[5121]}),Object(o["a"])(n,33326,{dataFormat:6403,types:[5126],gl2:!0}),Object(o["a"])(n,33328,{dataFormat:33319,types:[5126],gl2:!0}),Object(o["a"])(n,34837,{dataFormat:6407,types:[5126],gl2:!0}),Object(o["a"])(n,34836,{dataFormat:6408,types:[5126],gl2:!0}),n),u=(a={},Object(o["a"])(a,6403,1),Object(o["a"])(a,36244,1),Object(o["a"])(a,33319,2),Object(o["a"])(a,33320,2),Object(o["a"])(a,6407,3),Object(o["a"])(a,36248,3),Object(o["a"])(a,6408,4),Object(o["a"])(a,36249,4),Object(o["a"])(a,6402,1),Object(o["a"])(a,34041,1),Object(o["a"])(a,6406,1),Object(o["a"])(a,6409,1),Object(o["a"])(a,6410,2),a),f=(i={},Object(o["a"])(i,5126,4),Object(o["a"])(i,5125,4),Object(o["a"])(i,5124,4),Object(o["a"])(i,5123,2),Object(o["a"])(i,5122,2),Object(o["a"])(i,5131,2),Object(o["a"])(i,5120,1),Object(o["a"])(i,5121,1),i);function l(e,t){var r=s[t];if(!r)return!1;if(void 0===r.gl1&&void 0===r.gl2)return!0;var n=Object(c["e"])(e)&&r.gl2||r.gl1;return"string"===typeof n?e.getExtension(n):n}function d(e,t){var r=s[t];switch(r&&r.types[0]){case 5126:return e.getExtension("OES_texture_float_linear");case 5131:return e.getExtension("OES_texture_half_float_linear");default:return!0}}},bb2f:function(e,t,r){var n=r("d039");e.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},be94:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));r("a4d3"),r("99af"),r("4de4"),r("4160"),r("e439"),r("b64b"),r("159b");var n=r("ade3");function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?Object(arguments[t]):{},a=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),a.forEach((function(t){Object(n["a"])(e,t,r[t])}))}return e}},bee2:function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}r.d(t,"a",(function(){return a}))},c11d:function(e,t,r){"use strict";r.r(t);r("d3b7"),r("cfc3"),r("9a8c"),r("a975"),r("735e"),r("c1ac"),r("d139"),r("3a7b"),r("d5d6"),r("82f8"),r("e91f"),r("60bd"),r("5f96"),r("3280"),r("3fcc"),r("ca91"),r("25a1"),r("cd26"),r("3c5d"),r("2954"),r("649e"),r("219c"),r("170b"),r("b39a"),r("72f7"),r("96cf");var n=r("c964"),a=r("ca47"),i=r("b1cf"),o=r("a511"),c=r("89e8"),s=document.getElementById("mycanvas");s.width=800,s.height=600;var u=Object(c["c"])(s.getContext("webgl")),f={name:"color",vs:"\n    varying vec3 color_vColor;\n\n    void color_setColor(vec3 color) {\n      color_vColor = color;\n    }\n  ",fs:"\n    varying vec3 color_vColor;\n\n    vec3 color_getColor() {\n      return color_vColor;\n    }\n  "},l=new i["a"](u,new Float32Array([-.2,-.2,.2,-.2,0,.2])),d=new i["a"](u,new Float32Array([1,0,0,0,1,0,0,0,1,1,1,0])),h=new i["a"](u,new Float32Array([.5,.5,-.5,.5,.5,-.5,-.5,-.5])),b=new a["a"](u,{vs:"\n        attribute vec2 position;\n        attribute vec3 color;\n        attribute vec2 offset;\n\n        void main() {\n          color_setColor(color);\n          gl_Position = vec4(position + offset, 0.0, 1.0);\n        }\n      ",fs:"\n        void main() {\n          gl_FragColor = vec4(color_getColor(), 1.0);\n        }\n      ",modules:[f],attributes:{position:l,color:[d,{divisor:1}],offset:[h,{divisor:1}]},vertexCount:3,instanceCount:4,instanced:!0});function v(){return g.apply(this,arguments)}function g(){return g=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){window.requestAnimationFrame((function(t){return e(t)}))})));case 1:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}function y(e){return m.apply(this,arguments)}function m(){return m=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:Object(o["a"])(u,{color:[0,0,0,1]}),t.draw();case 4:e.next=0;break;case 6:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}y(b)},c1ac:function(e,t,r){"use strict";var n=r("ebb5"),a=r("b727").filter,i=r("4840"),o=n.aTypedArray,c=n.aTypedArrayConstructor,s=n.exportTypedArrayMethod;s("filter",(function(e){var t=a(o(this),e,arguments.length>1?arguments[1]:void 0),r=i(this,this.constructor),n=0,s=t.length,u=new(c(r))(s);while(s>n)u[n]=t[n++];return u}))},c526:function(e,t,r){e.exports=r("d122")},ca47:function(e,t,r){"use strict";r.d(t,"a",(function(){return ie}));var n=r("ade3"),a=r("d4ec"),i=r("bee2"),o=r("89e8"),c=r("85aa"),s=r("55da"),u=r("0b1c"),f=r("a511"),l=r("3a49"),d=r("4f61"),h=r("b1cf"),b=r("99de"),v=r("257e"),g=r("7e84"),y=r("45eb"),m=r("262e"),p=r("2fc2"),O=null;function j(e){return(!O||O.byteLength<e)&&(O=new ArrayBuffer(e)),O}function _(e,t){var r=j(e.BYTES_PER_ELEMENT*t);return new e(r,0,t)}function A(e){for(var t=e.target,r=e.source,n=e.start,a=void 0===n?0:n,i=e.count,o=void 0===i?1:i,c=r.length,s=o*c,u=0,f=a;u<c;u++)t[f++]=r[u];while(u<s)u<s-u?(t.copyWithin(a+u,a,a+u),u*=2):(t.copyWithin(a+u,a,a+s-u),u=s);return t}var w=r("2bd9"),x=r("e64b"),E=r("234b");function T(e){if(!e&&!Object(x["a"])())return"Node";if(Object(E["a"])(e))return"Electron";var t="undefined"!==typeof navigator?navigator:{},r=e||t.userAgent||"";if(r.indexOf("Edge")>-1)return"Edge";var n=-1!==r.indexOf("MSIE "),a=-1!==r.indexOf("Trident/");return n||a?"IE":w["b"].chrome?"Chrome":w["b"].safari?"Safari":w["b"].mozInnerScreenX?"Firefox":"Unknown"}var k="elements must be GL.ELEMENT_ARRAY_BUFFER",S=function(e){function t(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(a["a"])(this,t);var i=n.id||n.program&&n.program.id;return r=Object(b["a"])(this,Object(g["a"])(t).call(this,e,Object.assign({},n,{id:i}))),r.buffer=null,r.bufferValue=null,r.isDefaultArray=n.isDefaultArray||!1,r.initialize(n),Object.seal(Object(v["a"])(r)),r}return Object(m["a"])(t,e),Object(i["a"])(t,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!t.constantAttributeZero||(Object(o["e"])(e)||"Chrome"===T())}},{key:"getDefaultArray",value:function(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new t(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}},{key:"getMaxAttributes",value:function(e){return t.MAX_ATTRIBUTES=t.MAX_ATTRIBUTES||e.getParameter(34921),t.MAX_ATTRIBUTES}},{key:"setConstant",value:function(e,r,n){switch(n.constructor){case Float32Array:t._setConstantFloatArray(e,r,n);break;case Int32Array:t._setConstantIntArray(e,r,n);break;case Uint32Array:t._setConstantUintArray(e,r,n);break;default:Object(u["a"])(!1)}}}]),Object(i["a"])(t,[{key:"delete",value:function(){Object(y["a"])(Object(g["a"])(t.prototype),"delete",this).call(this),this.buffer&&this.buffer["delete"]()}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.setProps(e)}},{key:"setProps",value:function(e){return this}},{key:"setElementBuffer",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Object(u["a"])(!t||34963===t.target,k),this.bind((function(){e.gl.bindBuffer(34963,t?t.handle:null)})),this}},{key:"setBuffer",value:function(e,t,r){if(34963===t.target)return this.setElementBuffer(t,r);var n=r.size,a=r.type,i=r.stride,c=r.offset,s=r.normalized,f=r.integer,l=r.divisor,d=this.gl;return e=Number(e),this.bind((function(){d.bindBuffer(34962,t.handle),f?(Object(u["a"])(Object(o["e"])(d)),d.vertexAttribIPointer(e,n,a,i,c)):d.vertexAttribPointer(e,n,a,s,i,c),d.enableVertexAttribArray(e),d.vertexAttribDivisor(e,l||0)})),this}},{key:"enable",value:function(e){var r=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=!n&&0===e&&!t.isSupported(this.gl,{constantAttributeZero:!0});return a||(e=Number(e),this.bind((function(){return n?r.gl.enableVertexAttribArray(e):r.gl.disableVertexAttribArray(e)}))),this}},{key:"getConstantBuffer",value:function(e,t,r){var n=this._normalizeConstantArrayValue(t,r),a=n.byteLength*e,i=n.length*e,o=!this.buffer;if(this.buffer=this.buffer||new h["a"](this.gl,a),o=o||this.buffer.reallocate(a),o=o||!this._compareConstantArrayValues(n,this.bufferValue),o){var c=_(t.constructor,i);A({target:c,source:n,start:0,count:i}),this.buffer.subData(c),this.bufferValue=t}return this.buffer}},{key:"_normalizeConstantArrayValue",value:function(e,t){return Array.isArray(e)?new Float32Array(e):e}},{key:"_compareConstantArrayValues",value:function(e,t){if(!e||!t||e.length!==t.length||e.constructor!==t.constructor)return!1;for(var r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}},{key:"_createHandle",value:function(){return this.gl.createVertexArray()}},{key:"_deleteHandle",value:function(e){return this.gl.deleteVertexArray(e),[this.elements]}},{key:"_bindHandle",value:function(e){this.gl.bindVertexArray(e)}},{key:"_getParameter",value:function(e,t){var r=this,n=t.location;return Object(u["a"])(Number.isFinite(n)),this.bind((function(){switch(e){case 34373:return r.gl.getVertexAttribOffset(n,e);default:return r.gl.getVertexAttrib(n,e)}}))}},{key:"MAX_ATTRIBUTES",get:function(){return t.getMaxAttributes(this.gl)}}],[{key:"_setConstantFloatArray",value:function(e,t,r){switch(r.length){case 1:e.vertexAttrib1fv(t,r);break;case 2:e.vertexAttrib2fv(t,r);break;case 3:e.vertexAttrib3fv(t,r);break;case 4:e.vertexAttrib4fv(t,r);break;default:Object(u["a"])(!1)}}},{key:"_setConstantIntArray",value:function(e,t,r){switch(Object(u["a"])(Object(o["e"])(e)),r.length){case 1:e.vertexAttribI1iv(t,r);break;case 2:e.vertexAttribI2iv(t,r);break;case 3:e.vertexAttribI3iv(t,r);break;case 4:e.vertexAttribI4iv(t,r);break;default:Object(u["a"])(!1)}}},{key:"_setConstantUintArray",value:function(e,t,r){switch(Object(u["a"])(Object(o["e"])(e)),r.length){case 1:e.vertexAttribI1uiv(t,r);break;case 2:e.vertexAttribI2uiv(t,r);break;case 3:e.vertexAttribI3uiv(t,r);break;case 4:e.vertexAttribI4uiv(t,r);break;default:Object(u["a"])(!1)}}}]),t}(p["a"]),L=r("b206"),I="VertexArray: attributes must be Buffers or constants (i.e. typed array)",F=/^(.+)__LOCATION_([0-9]+)$/,P=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"],R=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(a["a"])(this,e);var n=r.id||r.program&&r.program.id;this.id=n,this.gl=t,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new S(t),Object(L["a"])(this,"VertexArray","v6.0",P),this.initialize(r),Object.seal(this)}return Object(i["a"])(e,[{key:"delete",value:function(){this.buffer&&this.buffer["delete"](),this.vertexArrayObject["delete"]()}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}},{key:"reset",value:function(){this.elements=null,this.elementsAccessor=null;var e=this.vertexArrayObject.MAX_ATTRIBUTES;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}},{key:"setProps",value:function(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}},{key:"clearDrawParams",value:function(){this.drawParams=null}},{key:"getDrawParams",value:function(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}},{key:"setAttributes",value:function(e){var t=this;return Object.assign(this.attributes,e),this.vertexArrayObject.bind((function(){for(var r in e){var n=e[r];t._setAttribute(r,n)}t.gl.bindBuffer(34962,null)})),this}},{key:"setElementBuffer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=e,this.elementsAccessor=t,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,t),this}},{key:"setBuffer",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===t.target)return this.setElementBuffer(t,r);var n=this._resolveLocationAndAccessor(e,t,t.accessor,r),a=n.location,i=n.accessor;return a>=0&&(this.values[a]=t,this.accessors[a]=i,this.clearDrawParams(),this.vertexArrayObject.setBuffer(a,t,i)),this}},{key:"setConstant",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=this._resolveLocationAndAccessor(e,t,Object.assign({size:t.length},r)),a=n.location,i=n.accessor;return a>=0&&(t=this.vertexArrayObject._normalizeConstantArrayValue(t,i),this.values[a]=t,this.accessors[a]=i,this.clearDrawParams(),this.vertexArrayObject.enable(a,!1)),this}},{key:"unbindBuffers",value:function(){var e=this;return this.vertexArrayObject.bind((function(){e.elements&&e.vertexArrayObject.setElementBuffer(null),e.buffer=e.buffer||new h["a"](e.gl,{accessor:{size:4}});for(var t=0;t<e.vertexArrayObject.MAX_ATTRIBUTES;t++)e.values[t]instanceof h["a"]&&(e.gl.disableVertexAttribArray(t),e.gl.bindBuffer(34962,e.buffer.handle),e.gl.vertexAttribPointer(t,1,5126,!1,0,0))})),this}},{key:"bindBuffers",value:function(){var e=this;return this.vertexArrayObject.bind((function(){e.elements&&e.setElementBuffer(e.elements);for(var t=0;t<e.vertexArrayObject.MAX_ATTRIBUTES;t++){var r=e.values[t];r instanceof h["a"]&&e.setBuffer(t,r)}})),this}},{key:"bindForDraw",value:function(e,t,r){var n,a=this;return this.vertexArrayObject.bind((function(){a._setConstantAttributes(e,t),n=r()})),n}},{key:"_resolveLocationAndAccessor",value:function(e,t,r,n){var a=this,i=this._getAttributeIndex(e),c=i.location,s=i.name;if(!Number.isFinite(c)||c<0)return this.unused[e]=t,o["f"].once(3,(function(){return"unused value ".concat(e," in ").concat(a.id)}))(),this;var f=this._getAttributeInfo(s||c);if(!f)return{location:-1,accessor:null};var l=this.accessors[c]||{},h=d["a"].resolve(f.accessor,l,r,n),b=h.size,v=h.type;return Object(u["a"])(Number.isFinite(b)&&Number.isFinite(v)),{location:c,accessor:h}}},{key:"_getAttributeInfo",value:function(e){return this.configuration&&this.configuration.getAttributeInfo(e)}},{key:"_getAttributeIndex",value:function(e){var t=Number(e);if(Number.isFinite(t))return{location:t};var r=F.exec(e),n=r?r[1]:e,a=r?Number(r[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(n)+a,name:n}:{location:-1}}},{key:"_setAttribute",value:function(e,t){if(t instanceof h["a"])this.setBuffer(e,t);else if(Array.isArray(t)&&t.length&&t[0]instanceof h["a"]){var r=t[0],n=t[1];this.setBuffer(e,r,n)}else if(ArrayBuffer.isView(t)||Array.isArray(t)){var a=t;this.setConstant(e,a)}else{if(!(t.buffer instanceof h["a"]))throw new Error(I);var i=t;this.setBuffer(e,i.buffer,i)}}},{key:"_setConstantAttributes",value:function(e,t){var r=Math.max(0|e,0|t),n=this.values[0];ArrayBuffer.isView(n)&&this._setConstantAttributeZero(n,r);for(var a=1;a<this.vertexArrayObject.MAX_ATTRIBUTES;a++)n=this.values[a],ArrayBuffer.isView(n)&&this._setConstantAttribute(a,n)}},{key:"_setConstantAttributeZero",value:function(e,t){if(S.isSupported(this.gl,{constantAttributeZero:!0}))this._setConstantAttribute(0,e);else{var r=this.vertexArrayObject.getConstantBuffer(t,e);this.vertexArrayObject.setBuffer(0,r,this.accessors[0])}}},{key:"_setConstantAttribute",value:function(e,t){S.setConstant(this.gl,e,t)}},{key:"_updateDrawParams",value:function(){for(var e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0},t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this._updateDrawParamsForLocation(e,t);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}},{key:"_updateDrawParamsForLocation",value:function(e,t){var r=this.values[t],n=this.accessors[t];if(r){var a=n.divisor,i=a>0;if(e.isInstanced=e.isInstanced||i,r instanceof h["a"]){var o=r;if(i){var c=o.getVertexCount(n);e.instanceCount=Math.min(e.instanceCount,c)}else{var s=o.getVertexCount(n);e.vertexCount=Math.min(e.vertexCount,s)}}}}},{key:"setElements",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o["f"].deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,t)}}]),e}(),B=r("4945"),M=function(e){function t(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(a["a"])(this,t),Object(B["a"])(e),r=Object(b["a"])(this,Object(g["a"])(t).call(this,e,n)),r.initialize(n),r.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(Object(v["a"])(r)),r}return Object(m["a"])(t,e),Object(i["a"])(t,null,[{key:"isSupported",value:function(e){return Object(o["e"])(e)}}]),Object(i["a"])(t,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,Object(s["a"])(this.buffers)||this.bind((function(){return e._unbindBuffers()})),this.setProps(t),this}},{key:"setProps",value:function(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}},{key:"setBuffers",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind((function(){for(var r in t)e.setBuffer(r,t[r])})),this}},{key:"setBuffer",value:function(e,t){var r=this,n=this._getVaryingIndex(e),a=this._getBufferParams(t),i=a.buffer,c=a.byteSize,s=a.byteOffset;return n<0?(this.unused[e]=i,o["f"].warn((function(){return"".concat(r.id," unused varying buffer ").concat(e)}))(),this):(this.buffers[n]=t,this.bindOnUse||this._bindBuffer(n,i,s,c),this)}},{key:"begin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}},{key:"end",value:function(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}},{key:"_getBufferParams",value:function(e){var t,r,n;return e instanceof h["a"]===!1?(n=e.buffer,r=e.byteSize,t=e.byteOffset):n=e,void 0===t&&void 0===r||(t=t||0,r=r||n.byteLength-t),{buffer:n,byteOffset:t,byteSize:r}}},{key:"_getVaryingInfo",value:function(e){return this.configuration&&this.configuration.getVaryingInfo(e)}},{key:"_getVaryingIndex",value:function(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;var t=Number(e);return Number.isFinite(t)?t:-1}},{key:"_bindBuffers",value:function(){if(this.bindOnUse)for(var e in this.buffers){var t=this._getBufferParams(this.buffers[e]),r=t.buffer,n=t.byteSize,a=t.byteOffset;this._bindBuffer(e,r,a,n)}}},{key:"_unbindBuffers",value:function(){if(this.bindOnUse)for(var e in this.buffers)this._bindBuffer(e,null)}},{key:"_bindBuffer",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0,a=t&&t.handle;return a&&void 0!==n?this.gl.bindBufferRange(35982,e,a,r,n):this.gl.bindBufferBase(35982,e,a),this}},{key:"_createHandle",value:function(){return this.gl.createTransformFeedback()}},{key:"_deleteHandle",value:function(){this.gl.deleteTransformFeedback(this.handle)}},{key:"_bindHandle",value:function(e){this.gl.bindTransformFeedback(36386,this.handle)}}]),t}(p["a"]),D=r("ae79"),C=r("a1e8");function N(e,t){for(var r=t.maxElts,n=void 0===r?16:r,a=t.size,i=void 0===a?1:a,o="[",c=0;c<e.length&&c<n;++c)c>0&&(o+=",".concat(c%i===0?" ":"")),o+=U(e[c],t);var s=e.length>n?"...":"]";return"".concat(o).concat(s)}function U(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=1e-16,n=t.isInteger,a=void 0!==n&&n;if(Array.isArray(e)||ArrayBuffer.isView(e))return N(e,t);if(!Number.isFinite(e))return String(e);if(Math.abs(e)<r)return a?"0":"0.";if(a)return e.toFixed(0);if(Math.abs(e)>100&&Math.abs(e)<1e4)return e.toFixed(0);var i=e.toPrecision(2),o=i.indexOf(".0");return o===i.length-2?i.slice(0,-1):i}function G(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.vertexArray,r=e.header,n=void 0===r?"Attributes":r;if(!t.configuration)return{};var a={};t.elements&&(a.ELEMENT_ARRAY_BUFFER=V(t,t.elements,null,n));var i=t.values;for(var o in i){var c=t._getAttributeInfo(o);if(c){var s="".concat(o,": ").concat(c.name),u=t.accessors[c.location];u&&(s="".concat(o,": ").concat(z(c.name,u))),a[s]=V(t,i[o],u,n)}}return a}function V(e,t,r,a){var i,o,c=e.gl;if(!t)return o={},Object(n["a"])(o,a,"null"),Object(n["a"])(o,"Format ","N/A"),o;var s,u,f,l="NOT PROVIDED",d="N/A",b="N/A",v="N/A";if(r&&(l=r.type,d=r.size,l=String(l).replace("Array",""),s=-1!==l.indexOf("nt")),t instanceof h["a"]){var g,y,m=t,p=m.getDebugData(),O=p.data,j=p.modified;if(u=j?"*":"",f=O,v=m.byteLength,b=v/O.BYTES_PER_ELEMENT/d,r){var _=r.divisor>0;y="".concat(_?"I ":"P "," ").concat(b," (x").concat(d,"=").concat(v," bytes ").concat(Object(D["a"])(c,l),")")}else s=!0,y="".concat(v," bytes");return g={},Object(n["a"])(g,a,"".concat(u).concat(U(f,{size:d,isInteger:s}))),Object(n["a"])(g,"Format ",y),g}return f=t,d=t.length,l=String(t.constructor.name).replace("Array",""),s=-1!==l.indexOf("nt"),i={},Object(n["a"])(i,a,"".concat(U(f,{size:d,isInteger:s})," (constant)")),Object(n["a"])(i,"Format ","".concat(d,"x").concat(l," (constant)")),i}function z(e,t){var r=t.type,n=t.size,a=Object(C["b"])(r,n);return a?"".concat(e," (").concat(a.name,")"):e}function H(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.header,r=void 0===t?"Uniforms":t,a=e.program,i=e.uniforms,o=e.undefinedOnly,c=void 0!==o&&o;Object(u["a"])(a);var s=".*_.*",f=".*Matrix",l=a._uniformSetters,d={},h=Object.keys(l).sort(),b=0,v=!0,g=!1,y=void 0;try{for(var m,p=h[Symbol.iterator]();!(v=(m=p.next()).done);v=!0){var O=m.value;O.match(s)||O.match(f)||X({table:d,header:r,uniforms:i,uniformName:O,undefinedOnly:c})&&b++}}catch(D){g=!0,y=D}finally{try{v||null==p["return"]||p["return"]()}finally{if(g)throw y}}var j=!0,_=!1,A=void 0;try{for(var w,x=h[Symbol.iterator]();!(j=(w=x.next()).done);j=!0){var E=w.value;E.match(f)&&X({table:d,header:r,uniforms:i,uniformName:E,undefinedOnly:c})&&b++}}catch(D){_=!0,A=D}finally{try{j||null==x["return"]||x["return"]()}finally{if(_)throw A}}var T=!0,k=!1,S=void 0;try{for(var L,I=h[Symbol.iterator]();!(T=(L=I.next()).done);T=!0){var F=L.value;d[F]||X({table:d,header:r,uniforms:i,uniformName:F,undefinedOnly:c})&&b++}}catch(D){k=!0,S=D}finally{try{T||null==I["return"]||I["return"]()}finally{if(k)throw S}}var P=0,R={};if(!c)for(var B in i){var M=i[B];d[B]||(P++,R[B]=Object(n["a"])({Type:"NOT USED: ".concat(M)},r,U(M)))}return{table:d,count:b,unusedTable:R,unusedCount:P}}function X(e){var t,r=e.table,a=e.header,i=e.uniforms,o=e.uniformName,c=e.undefinedOnly,s=i[o],u=W(s);return(!c||!u)&&(r[o]=(t={},Object(n["a"])(t,a,u?U(s):"N/A"),Object(n["a"])(t,"Uniform Type",u?s:"NOT PROVIDED"),t),!0)}function W(e){return void 0!==e&&null!==e}function Y(e){var t={},r="Accessors for ".concat(e.id),a=!0,i=!1,o=void 0;try{for(var c,s=e.attributeInfos[Symbol.iterator]();!(a=(c=s.next()).done);a=!0){var u=c.value;if(u){var f=q(u);t["in ".concat(f)]=Object(n["a"])({},r,JSON.stringify(u.accessor))}}}catch(m){i=!0,o=m}finally{try{a||null==s["return"]||s["return"]()}finally{if(i)throw o}}var l=!0,d=!1,h=void 0;try{for(var b,v=e.varyingInfos[Symbol.iterator]();!(l=(b=v.next()).done);l=!0){var g=b.value;if(g){var y=q(g);t["out ".concat(y)]=Object(n["a"])({},r,JSON.stringify(g.accessor))}}}catch(m){d=!0,h=m}finally{try{l||null==v["return"]||v["return"]()}finally{if(d)throw h}}return t}function q(e){var t=e.accessor,r=t.type,n=t.size,a=Object(C["b"])(r,n);return a?"".concat(a.name," ").concat(e.name):e.name}var K=r("be94"),Q={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function J(e,t,r){var n={},a=t.indices;for(var i in t.attributes){var o=t.attributes[i],c=$(i,r);if("indices"===i)a=o;else if(o.constant)n[c]=o.value;else{var s=o.value,f=Object(K["a"])({},o);delete f.value,n[c]=[new h["a"](e,s),f],Z(i,f)}}if(a){var l=a.value||a;Object(u["a"])(l instanceof Uint16Array||l instanceof Uint32Array,'attribute array for "indices" must be of integer type');var d={size:1,isIndexed:void 0===a.isIndexed||a.isIndexed};n.indices=[new h["a"](e,{data:l,target:34963}),d]}return n}function $(e,t){var r=t||{},n=r.attributeMap,a=void 0===n?Q:n;return a&&a[e]||e}function Z(e,t){var r;switch(e){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":r="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":r="vectors";break;default:}switch(r){case"vectors":t.size=t.size||3;break;case"uvs":t.size=t.size||2;break;default:}Object(u["a"])(Number.isFinite(t.size),"attribute ".concat(e," needs size"))}var ee=2,te=1e4,re="Model needs drawMode and vertexCount",ne=function(){},ae={},ie=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(a["a"])(this,e);var n=r.id,i=void 0===n?Object(s["c"])("model"):n;Object(u["a"])(Object(o["d"])(t)),this.id=i,this.gl=t,this.id=r.id||Object(s["c"])("Model"),this.lastLogTime=0,this.initialize(r)}return Object(i["a"])(e,[{key:"initialize",value:function(e){this.props={},this.programManager=e.programManager||c["a"].getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;var t=e.program,r=void 0===t?null:t,n=e.vs,a=e.fs,i=e.modules,o=e.defines,s=e.inject,f=e.varyings,l=e.bufferMode,d=e.transpileToGLSL100;this.programProps={program:r,vs:n,fs:a,modules:i,defines:o,inject:s,varyings:f,bufferMode:l,transpileToGLSL100:d},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=void 0!==e.drawMode?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},Object(u["a"])(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),re)}},{key:"setProps",value:function(e){this._setModelProps(e)}},{key:"delete",value:function(){for(var e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e]["delete"]();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray["delete"](),this._deleteGeometryBuffers()}},{key:"getDrawMode",value:function(){return this.drawMode}},{key:"getVertexCount",value:function(){return this.vertexCount}},{key:"getInstanceCount",value:function(){return this.instanceCount}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getProgram",value:function(){return this.program}},{key:"setProgram",value:function(e){var t=e.program,r=e.vs,n=e.fs,a=e.modules,i=e.defines,o=e.inject,c=e.varyings,s=e.bufferMode,u=e.transpileToGLSL100;this.programProps={program:t,vs:r,fs:n,modules:a,defines:i,inject:o,varyings:c,bufferMode:s,transpileToGLSL100:u},this._programDirty=!0}},{key:"getUniforms",value:function(){return this.uniforms}},{key:"setDrawMode",value:function(e){return this.drawMode=e,this}},{key:"setVertexCount",value:function(e){return Object(u["a"])(Number.isFinite(e)),this.vertexCount=e,this}},{key:"setInstanceCount",value:function(e){return Object(u["a"])(Number.isFinite(e)),this.instanceCount=e,this}},{key:"setGeometry",value:function(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=J(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}},{key:"setAttributes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(s["a"])(e))return this;var t={};for(var r in e){var n=e[r];t[r]=n.getValue?n.getValue():n}return this.vertexArray.setAttributes(t),this}},{key:"setUniforms",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(this.uniforms,e),this}},{key:"getModuleUniforms",value:function(e){this._checkProgram();var t=this.programManager.getUniforms(this.program);return t?t(e):{}}},{key:"updateModuleSettings",value:function(e){var t=this.getModuleUniforms(e||{});return this.setUniforms(t)}},{key:"clear",value:function(e){return Object(f["a"])(this.program.gl,e),this}},{key:"draw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._checkProgram();var t,r=e.moduleSettings,n=void 0===r?null:r,a=e.framebuffer,i=e.uniforms,c=void 0===i?{}:i,s=e.attributes,u=void 0===s?{}:s,f=e.transformFeedback,l=void 0===f?this.transformFeedback:f,d=e.parameters,h=void 0===d?{}:d,b=e.vertexArray,v=void 0===b?this.vertexArray:b;this.setAttributes(u),this.updateModuleSettings(n),this.setUniforms(c),o["f"].priority>=ee&&(t=this._logDrawCallStart(ee));var g=this.vertexArray.getDrawParams(),y=this.props,m=y.isIndexed,p=void 0===m?g.isIndexed:m,O=y.indexType,j=void 0===O?g.indexType:O,_=y.indexOffset,A=void 0===_?g.indexOffset:_,w=y.vertexArrayInstanced,x=void 0===w?g.isInstanced:w;x&&!this.isInstanced&&o["f"].warn("Found instanced attributes on non-instanced model",this.id)();var E=this.isInstanced,T=this.instanceCount,k=this.props,S=k.onBeforeRender,L=void 0===S?ne:S,I=k.onAfterRender,F=void 0===I?ne:I;L(),this.program.setUniforms(this.uniforms);var P=this.program.draw(Object.assign(ae,e,{logPriority:t,uniforms:null,framebuffer:a,parameters:h,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:v,transformFeedback:l,isIndexed:p,indexType:j,isInstanced:E,instanceCount:T,offset:p?A:0}));return F(),o["f"].priority>=ee&&this._logDrawCallEnd(t,v,a),P}},{key:"transform",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.discard,r=void 0===t||t,a=e.feedbackBuffers,i=e.unbindModels,o=void 0===i?[]:i,c=e.parameters;a&&this._setFeedbackBuffers(a),r&&(c=Object.assign({},c,Object(n["a"])({},35977,r))),o.forEach((function(e){return e.vertexArray.unbindBuffers()}));try{this.draw(Object.assign({},e,{parameters:c}))}finally{o.forEach((function(e){return e.vertexArray.bindBuffers()}))}return this}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["f"].warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}},{key:"_setModelProps",value:function(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}},{key:"_checkProgram",value:function(){var e=this._programDirty||this.programManager.stateHash!==this._programManagerState;if(e){var t=this.programProps.program;if(t)this._managedProgram=!1;else{var r=this.programProps,n=r.vs,a=r.fs,i=r.modules,o=r.inject,c=r.defines,s=r.varyings,f=r.bufferMode,d=r.transpileToGLSL100;t=this.programManager.get({vs:n,fs:a,modules:i,inject:o,defines:c,varyings:s,bufferMode:f,transpileToGLSL100:d}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}Object(u["a"])(t instanceof l["a"],"Model needs a program"),this._programDirty=!1,t!==this.program&&(this.program=t,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new R(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}}},{key:"_deleteGeometryBuffers",value:function(){for(var e in this.geometryBuffers){var t=this.geometryBuffers[e][0]||this.geometryBuffers[e];t instanceof h["a"]&&t["delete"]()}}},{key:"_setAnimationProps",value:function(e){if(this.animated){Object(u["a"])(e,"Model.draw(): animated uniforms but no animationProps");var t=this._evaluateAnimateUniforms(e);Object.assign(this.uniforms,t)}}},{key:"_setFeedbackBuffers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(s["a"])(e))return this;var t=this.program.gl;return this.transformFeedback=this.transformFeedback||new M(t,{program:this.program}),this.transformFeedback.setBuffers(e),this}},{key:"_logDrawCallStart",value:function(e){var t=e>3?0:te;if(!(Date.now()-this.lastLogTime<t))return this.lastLogTime=Date.now(),o["f"].group(ee,">>> DRAWING MODEL ".concat(this.id),{collapsed:o["f"].level<=2})(),e}},{key:"_logDrawCallEnd",value:function(e,t,r,n){if(void 0!==e){var a=G({vertexArray:t,header:"".concat(this.id," attributes"),attributes:this._attributes}),i=H({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,r)}),c=i.table,s=i.unusedTable,u=i.unusedCount,f=H({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,r),undefinedOnly:!0}),l=f.table,d=f.count;d>0&&o["f"].log("MISSING UNIFORMS",Object.keys(l))(),u>0&&o["f"].log("UNUSED UNIFORMS",Object.keys(s))();var h=Y(this.vertexArray.configuration);o["f"].table(e,a)(),o["f"].table(e,c)(),o["f"].table(e+1,h)(),n&&n.log({logLevel:ee,message:"Rendered to ".concat(n.id)}),o["f"].groupEnd(ee,">>> DRAWING MODEL ".concat(this.id))()}}}]),e}()},ca91:function(e,t,r){"use strict";var n=r("ebb5"),a=r("d58f").left,i=n.aTypedArray,o=n.exportTypedArrayMethod;o("reduce",(function(e){return a(i(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}))},cd26:function(e,t,r){"use strict";var n=r("ebb5"),a=n.aTypedArray,i=n.exportTypedArrayMethod,o=Math.floor;i("reverse",(function(){var e,t=this,r=a(t).length,n=o(r/2),i=0;while(i<n)e=t[i],t[i++]=t[--r],t[r]=e;return t}))},cfc3:function(e,t,r){var n=r("74e8");n("Float32",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},d122:function(e,t,r){"use strict";var n=r("4ea4"),a=r("dbce");Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"self",{enumerable:!0,get:function(){return i.self}}),Object.defineProperty(t,"window",{enumerable:!0,get:function(){return i.window}}),Object.defineProperty(t,"global",{enumerable:!0,get:function(){return i.global}}),Object.defineProperty(t,"document",{enumerable:!0,get:function(){return i.document}}),Object.defineProperty(t,"process",{enumerable:!0,get:function(){return i.process}}),Object.defineProperty(t,"console",{enumerable:!0,get:function(){return i.console}}),Object.defineProperty(t,"isBrowser",{enumerable:!0,get:function(){return o["default"]}}),Object.defineProperty(t,"isBrowserMainThread",{enumerable:!0,get:function(){return o.isBrowserMainThread}}),Object.defineProperty(t,"getBrowser",{enumerable:!0,get:function(){return c["default"]}}),Object.defineProperty(t,"isMobile",{enumerable:!0,get:function(){return c.isMobile}}),Object.defineProperty(t,"isElectron",{enumerable:!0,get:function(){return s["default"]}});var i=r("8d66"),o=a(r("b970")),c=a(r("2155")),s=n(r("d79c"))},d139:function(e,t,r){"use strict";var n=r("ebb5"),a=r("b727").find,i=n.aTypedArray,o=n.exportTypedArrayMethod;o("find",(function(e){return a(i(this),e,arguments.length>1?arguments[1]:void 0)}))},d4ec:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.d(t,"a",(function(){return n}))},d58f:function(e,t,r){var n=r("1c0b"),a=r("7b0b"),i=r("44ad"),o=r("50c4"),c=function(e){return function(t,r,c,s){n(r);var u=a(t),f=i(u),l=o(u.length),d=e?l-1:0,h=e?-1:1;if(c<2)while(1){if(d in f){s=f[d],d+=h;break}if(d+=h,e?d<0:l<=d)throw TypeError("Reduce of empty array with no initial value")}for(;e?d>=0:l>d;d+=h)d in f&&(s=r(s,f[d],d,u));return s}};e.exports={left:c(!1),right:c(!0)}},d5d6:function(e,t,r){"use strict";var n=r("ebb5"),a=r("b727").forEach,i=n.aTypedArray,o=n.exportTypedArrayMethod;o("forEach",(function(e){a(i(this),e,arguments.length>1?arguments[1]:void 0)}))},d752:function(e,t,r){"use strict";r.d(t,"a",(function(){return A}));var n=r("ade3"),a=r("3835"),i=r("d4ec"),o=r("99de"),c=r("257e"),s=r("7e84"),u=r("45eb"),f=r("bee2"),l=r("262e"),d=r("89e8"),h=r("2fc2"),b=r("7f94"),v=r("9f85"),g=r("a511"),y=r("a7bc"),m=r("7779"),p=r("4945"),O=r("ae79"),j=r("0b1c"),_="Multiple render targets not supported",A=function(e){function t(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i["a"])(this,t),r=Object(o["a"])(this,Object(s["a"])(t).call(this,e,n)),r.width=null,r.height=null,r.attachments={},r.readBuffer=36064,r.drawBuffers=[36064],r.ownResources=[],r.initialize(n),Object.seal(Object(c["a"])(r)),r}return Object(l["a"])(t,e),Object(f["a"])(t,[{key:"MAX_COLOR_ATTACHMENTS",get:function(){return this.gl.getParameter(this.gl.MAX_COLOR_ATTACHMENTS)}},{key:"MAX_DRAW_BUFFERS",get:function(){return this.gl.getParameter(this.gl.MAX_DRAW_BUFFERS)}}],[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.colorBufferFloat,n=t.colorBufferHalfFloat,a=!0;return r&&(a=Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),n&&(a=a&&Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("EXT_color_buffer_half_float"))),a}},{key:"getDefaultFramebuffer",value:function(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new t(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}}]),Object(f["a"])(t,[{key:"initialize",value:function(e){var t=e.width,r=void 0===t?1:t,n=e.height,a=void 0===n?1:n,i=e.attachments,o=void 0===i?null:i,c=e.color,s=void 0===c||c,u=e.depth,f=void 0===u||u,l=e.stencil,d=void 0!==l&&l,h=e.check,b=void 0===h||h,v=e.readBuffer,g=e.drawBuffers;if(Object(j["a"])(r>=0&&a>=0,"Width and height need to be integers"),this.width=r,this.height=a,o)for(var y in o){var m=o[y],p=Array.isArray(m)?m[0]:m;p.resize({width:r,height:a})}else o=this._createDefaultAttachments(s,f,d,r,a);this.update({clearAttachments:!0,attachments:o,readBuffer:v,drawBuffers:g}),o&&b&&this.checkStatus()}},{key:"delete",value:function(){var e=!0,r=!1,n=void 0;try{for(var a,i=this.ownResources[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var o=a.value;o["delete"]()}}catch(c){r=!0,n=c}finally{try{e||null==i["return"]||i["return"]()}finally{if(r)throw n}}Object(u["a"])(Object(s["a"])(t.prototype),"delete",this).call(this)}},{key:"update",value:function(e){var t=e.attachments,r=void 0===t?{}:t,n=e.readBuffer,a=e.drawBuffers,i=e.clearAttachments,o=void 0!==i&&i,c=e.resizeAttachments,s=void 0===c||c;this.attach(r,{clearAttachments:o,resizeAttachments:s});var u=this.gl,f=u.bindFramebuffer(36160,this.handle);return n&&this._setReadBuffer(n),a&&this._setDrawBuffers(a),u.bindFramebuffer(36160,f||null),this}},{key:"resize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width,r=e.height;if(null===this.handle)return Object(j["a"])(void 0===t&&void 0===r),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;for(var n in void 0===t&&(t=this.gl.drawingBufferWidth),void 0===r&&(r=this.gl.drawingBufferHeight),t!==this.width&&r!==this.height&&d["f"].log(2,"Resizing framebuffer ".concat(this.id," to ").concat(t,"x").concat(r))(),this.attachments)this.attachments[n].resize({width:t,height:r});return this.width=t,this.height=r,this}},{key:"attach",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.clearAttachments,i=void 0!==n&&n,o=r.resizeAttachments,c=void 0===o||o,s={};i&&Object.keys(this.attachments).forEach((function(e){s[e]=null})),Object.assign(s,e);var u=this.gl.bindFramebuffer(36160,this.handle);for(var f in s){Object(j["a"])(void 0!==f,"Misspelled framebuffer binding point?");var l=Number(f),d=s[l],h=d;if(h)if(h instanceof v["a"])this._attachRenderbuffer({attachment:l,renderbuffer:h});else if(Array.isArray(d)){var b=Object(a["a"])(d,3),g=b[0],y=b[1],m=void 0===y?0:y,p=b[2],O=void 0===p?0:p;h=g,this._attachTexture({attachment:l,texture:g,layer:m,level:O})}else this._attachTexture({attachment:l,texture:h,layer:0,level:0});else this._unattach(l);c&&h&&h.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,u||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter((function(e){return!t.attachments[e]})).forEach((function(e){delete t.attachments[e]}))}},{key:"checkStatus",value:function(){this.gl;var e=this.getStatus();if(36053!==e)throw new Error(x(e));return this}},{key:"getStatus",value:function(){var e=this.gl,t=e.bindFramebuffer(36160,this.handle),r=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,t||null),r}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.color,r=e.depth,n=e.stencil,a=e.drawBuffers,i=void 0===a?[]:a,o=this.gl.bindFramebuffer(36160,this.handle);return(t||r||n)&&Object(g["a"])(this.gl,{color:t,depth:r,stencil:n}),i.forEach((function(e,t){Object(g["b"])({drawBuffer:t,value:e})})),this.gl.bindFramebuffer(36160,o||null),this}},{key:"readPixels",value:function(){return d["f"].error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}},{key:"readPixelsToBuffer",value:function(){return d["f"].error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}},{key:"copyToDataUrl",value:function(){return d["f"].error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}},{key:"copyToImage",value:function(){return d["f"].error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}},{key:"copyToTexture",value:function(){return d["f"].error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}},{key:"blit",value:function(){return d["f"].error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}},{key:"invalidate",value:function(e){var t=e.attachments,r=void 0===t?[]:t,n=e.x,a=void 0===n?0:n,i=e.y,o=void 0===i?0:i,c=e.width,s=e.height,u=this.gl;Object(p["a"])(u);var f=u.bindFramebuffer(36008,this.handle),l=0===a&&0===o&&void 0===c&&void 0===s;return l?u.invalidateFramebuffer(36008,r):u.invalidateFramebuffer(36008,r,a,o,c,s),u.bindFramebuffer(36008,f),this}},{key:"getAttachmentParameter",value:function(e,t,r){var n=this._getAttachmentParameterFallback(t);return null===n&&(this.gl.bindFramebuffer(36160,this.handle),n=this.gl.getFramebufferAttachmentParameter(36160,e,t),this.gl.bindFramebuffer(36160,null)),r&&n>1e3&&(n=Object(O["a"])(this.gl,n)),n}},{key:"getAttachmentParameters",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[],n={},a=!0,i=!1,o=void 0;try{for(var c,s=r[Symbol.iterator]();!(a=(c=s.next()).done);a=!0){var u=c.value,f=t?Object(O["a"])(this.gl,u):u;n[f]=this.getAttachmentParameter(e,u,t)}}catch(l){i=!0,o=l}finally{try{a||null==s["return"]||s["return"]()}finally{if(i)throw o}}return n}},{key:"getParameters",value:function(){for(var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=Object.keys(this.attachments),r={},n=0,a=t;n<a.length;n++){var i=a[n],o=Number(i),c=e?Object(O["a"])(this.gl,o):o;r[c]=this.getAttachmentParameters(o,e)}return r}},{key:"show",value:function(){return"undefined"!==typeof window&&window.open(Object(y["a"])(this),"luma-debug-texture"),this}},{key:"log",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e>d["f"].level||"undefined"===typeof window)return this;t=t||"Framebuffer ".concat(this.id);var r=Object(y["a"])(this,{maxHeight:100});return d["f"].image({logLevel:e,message:t,image:r},t)(),this}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,r=void 0===t?36160:t;return this.gl.bindFramebuffer(r,this.handle),this}},{key:"unbind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,r=void 0===t?36160:t;return this.gl.bindFramebuffer(r,null),this}},{key:"_createDefaultAttachments",value:function(e,t,r,a,i){var o,c=null;e&&(c=c||{},c[36064]=new b["a"](this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:a,height:i,mipmaps:!1,parameters:(o={},Object(n["a"])(o,10241,9729),Object(n["a"])(o,10240,9729),Object(n["a"])(o,10242,33071),Object(n["a"])(o,10243,33071),o)}),this.ownResources.push(c[36064]));return t&&r?(c=c||{},c[33306]=new v["a"](this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:a,height:111}),this.ownResources.push(c[33306])):t?(c=c||{},c[36096]=new v["a"](this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:a,height:i}),this.ownResources.push(c[36096])):r&&Object(j["a"])(!1),c}},{key:"_unattach",value:function(e){var t=this.attachments[e];t&&(t instanceof v["a"]?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}},{key:"_attachRenderbuffer",value:function(e){var t=e.attachment,r=void 0===t?36064:t,n=e.renderbuffer,a=this.gl;a.framebufferRenderbuffer(36160,r,36161,n.handle),this.attachments[r]=n}},{key:"_attachTexture",value:function(e){var t=e.attachment,r=void 0===t?36064:t,n=e.texture,a=e.layer,i=e.level,o=this.gl;switch(o.bindTexture(n.target,n.handle),n.target){case 35866:case 32879:o.framebufferTextureLayer(36160,r,n.target,i,a);break;case 34067:var c=w(a);o.framebufferTexture2D(36160,r,c,n.handle,i);break;case 3553:o.framebufferTexture2D(36160,r,3553,n.handle,i);break;default:Object(j["a"])(!1,"Illegal texture type")}o.bindTexture(n.target,null),this.attachments[r]=n}},{key:"_setReadBuffer",value:function(e){var t=this.gl;Object(d["e"])(t)?t.readBuffer(e):Object(j["a"])(36064===e||1029===e,_),this.readBuffer=e}},{key:"_setDrawBuffers",value:function(e){var t=this.gl;if(Object(d["e"])(t))t.drawBuffers(e);else{var r=t.getExtension("WEBGL.draw_buffers");r?r.drawBuffersWEBGL(e):Object(j["a"])(1===e.length&&(36064===e[0]||1029===e[0]),_)}this.drawBuffers=e}},{key:"_getAttachmentParameterFallback",value:function(e){var t=Object(m["a"])(this.gl);switch(e){case 36052:return t.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return t.WEBGL2?null:8;case 33297:return t.WEBGL2?null:5125;case 33296:return t.WEBGL2||t.EXT_sRGB?null:9729;default:return null}}},{key:"_createHandle",value:function(){return this.gl.createFramebuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteFramebuffer(this.handle)}},{key:"_bindHandle",value:function(e){return this.gl.bindFramebuffer(36160,e)}},{key:"color",get:function(){return this.attachments[36064]||null}},{key:"texture",get:function(){return this.attachments[36064]||null}},{key:"depth",get:function(){return this.attachments[36096]||this.attachments[33306]||null}},{key:"stencil",get:function(){return this.attachments[36128]||this.attachments[33306]||null}}]),t}(h["a"]);function w(e){return e<34069?e+34069:e}function x(e){var t=A.STATUS||{};return t[e]||"Framebuffer error ".concat(e)}var E=[36049,36048,33296,33298,33299,33300,33301,33302,33303];A.ATTACHMENT_PARAMETERS=E},d79c:function(e,t,r){"use strict";(function(e){var n=r("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i;var a=n(r("7037"));function i(t){if("undefined"!==typeof window&&"object"===(0,a["default"])(window.process)&&"renderer"===window.process.type)return!0;if("undefined"!==typeof e&&"object"===(0,a["default"])(e.versions)&&Boolean(e.versions.electron))return!0;var r="object"===("undefined"===typeof navigator?"undefined":(0,a["default"])(navigator))&&"string"===typeof navigator.userAgent&&navigator.userAgent,n=t||r;return!!(n&&n.indexOf("Electron")>=0)}}).call(this,r("4362"))},dbce:function(e,t,r){r("e439"),r("d3b7"),r("3ca3"),r("10d1"),r("ddb0");var n=r("7037");function a(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var c=i?Object.getOwnPropertyDescriptor(e,o):null;c&&(c.get||c.set)?Object.defineProperty(r,o,c):r[o]=e[o]}return r["default"]=e,t&&t.set(e,r),r}e.exports=i},e58c:function(e,t,r){"use strict";var n=r("fc6a"),a=r("a691"),i=r("50c4"),o=r("a640"),c=r("ae40"),s=Math.min,u=[].lastIndexOf,f=!!u&&1/[1].lastIndexOf(1,-0)<0,l=o("lastIndexOf"),d=c("indexOf",{ACCESSORS:!0,1:0}),h=f||!l||!d;e.exports=h?function(e){if(f)return u.apply(this,arguments)||0;var t=n(this),r=i(t.length),o=r-1;for(arguments.length>1&&(o=s(o,a(arguments[1]))),o<0&&(o=r+o);o>=0;o--)if(o in t&&t[o]===e)return o||0;return-1}:u},e64b:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return i}));var n=r("53ca"),a=r("234b");function i(){var t="object"===("undefined"===typeof e?"undefined":Object(n["a"])(e))&&"[object process]"===String(e)&&!e.browser;return!t||Object(a["a"])()}}).call(this,r("4362"))},e91f:function(e,t,r){"use strict";var n=r("ebb5"),a=r("4d64").indexOf,i=n.aTypedArray,o=n.exportTypedArrayMethod;o("indexOf",(function(e){return a(i(this),e,arguments.length>1?arguments[1]:void 0)}))},ebb5:function(e,t,r){"use strict";var n,a=r("a981"),i=r("83ab"),o=r("da84"),c=r("861d"),s=r("5135"),u=r("f5df"),f=r("9112"),l=r("6eeb"),d=r("9bf2").f,h=r("e163"),b=r("d2bb"),v=r("b622"),g=r("90e3"),y=o.Int8Array,m=y&&y.prototype,p=o.Uint8ClampedArray,O=p&&p.prototype,j=y&&h(y),_=m&&h(m),A=Object.prototype,w=A.isPrototypeOf,x=v("toStringTag"),E=g("TYPED_ARRAY_TAG"),T=a&&!!b&&"Opera"!==u(o.opera),k=!1,S={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},L=function(e){var t=u(e);return"DataView"===t||s(S,t)},I=function(e){return c(e)&&s(S,u(e))},F=function(e){if(I(e))return e;throw TypeError("Target is not a typed array")},P=function(e){if(b){if(w.call(j,e))return e}else for(var t in S)if(s(S,n)){var r=o[t];if(r&&(e===r||w.call(r,e)))return e}throw TypeError("Target is not a typed array constructor")},R=function(e,t,r){if(i){if(r)for(var n in S){var a=o[n];a&&s(a.prototype,e)&&delete a.prototype[e]}_[e]&&!r||l(_,e,r?t:T&&m[e]||t)}},B=function(e,t,r){var n,a;if(i){if(b){if(r)for(n in S)a=o[n],a&&s(a,e)&&delete a[e];if(j[e]&&!r)return;try{return l(j,e,r?t:T&&y[e]||t)}catch(c){}}for(n in S)a=o[n],!a||a[e]&&!r||l(a,e,t)}};for(n in S)o[n]||(T=!1);if((!T||"function"!=typeof j||j===Function.prototype)&&(j=function(){throw TypeError("Incorrect invocation")},T))for(n in S)o[n]&&b(o[n],j);if((!T||!_||_===A)&&(_=j.prototype,T))for(n in S)o[n]&&b(o[n].prototype,_);if(T&&h(O)!==_&&b(O,_),i&&!s(_,x))for(n in k=!0,d(_,x,{get:function(){return c(this)?this[E]:void 0}}),S)o[n]&&f(o[n],E,n);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:T,TYPED_ARRAY_TAG:k&&E,aTypedArray:F,aTypedArrayConstructor:P,exportTypedArrayMethod:R,exportTypedArrayStaticMethod:B,isView:L,isTypedArray:I,TypedArray:j,TypedArrayPrototype:_}},f183:function(e,t,r){var n=r("d012"),a=r("861d"),i=r("5135"),o=r("9bf2").f,c=r("90e3"),s=r("bb2f"),u=c("meta"),f=0,l=Object.isExtensible||function(){return!0},d=function(e){o(e,u,{value:{objectID:"O"+ ++f,weakData:{}}})},h=function(e,t){if(!a(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,u)){if(!l(e))return"F";if(!t)return"E";d(e)}return e[u].objectID},b=function(e,t){if(!i(e,u)){if(!l(e))return!0;if(!t)return!1;d(e)}return e[u].weakData},v=function(e){return s&&g.REQUIRED&&l(e)&&!i(e,u)&&d(e),e},g=e.exports={REQUIRED:!1,fastKey:h,getWeakData:b,onFreeze:v};n[u]=!0},f50d:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return d})),r.d(t,"c",(function(){return h})),r.d(t,"b",(function(){return b}));var n=r("d4ec"),a=r("bee2"),i=r("ae9d"),o=r("8177"),c=r("83a9");function s(e,t){var r=e[t].bind(e);e[t]=function(){var t=arguments.length<=0?void 0:arguments[0];return t in e.state.cache||(e.state.cache[t]=r.apply(void 0,arguments)),e.state.enable?e.state.cache[t]:r.apply(void 0,arguments)},Object.defineProperty(e[t],"name",{value:"".concat(t,"-from-cache"),configurable:!1})}function u(e,t,r){var n=e[t].bind(e);e[t]=function(){for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];var o=r.apply(void 0,[e.state._updateCache].concat(a)),c=o.valueChanged,s=o.oldValue;return c&&n.apply(void 0,a),s},Object.defineProperty(e[t],"name",{value:"".concat(t,"-to-cache"),configurable:!1})}function f(e){var t=e.useProgram.bind(e);e.useProgram=function(r){e.state.program!==r&&(t(r),e.state.program=r)}}var l=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.copyState,c=void 0!==a&&a,s=r.log,u=void 0===s?function(){}:s;Object(n["a"])(this,e),this.gl=t,this.program=null,this.stateStack=[],this.enable=!0,this.cache=c?Object(o["a"])(t):Object.assign({},i["c"]),this.log=u,this._updateCache=this._updateCache.bind(this),Object.seal(this)}return Object(a["a"])(e,[{key:"push",value:function(){this.stateStack.push({})}},{key:"pop",value:function(){Object(c["a"])(this.stateStack.length>0);var e=this.stateStack[this.stateStack.length-1];Object(o["c"])(this.gl,e,this.cache),this.stateStack.pop()}},{key:"_updateCache",value:function(e){var t,r=!1,n=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(var a in e){Object(c["a"])(void 0!==a);var i=e[a],o=this.cache[a];Object(c["c"])(i,o)||(r=!0,t=o,n&&!(a in n)&&(n[a]=o),this.cache[a]=i)}return{valueChanged:r,oldValue:t}}}]),e}();function d(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.enable,a=void 0===n||n,o=r.copyState;if(Object(c["a"])(void 0!==o),!t.state){var d="undefined"!==typeof e?e:window;for(var h in d.polyfillContext&&d.polyfillContext(t),t.state=new l(t,{copyState:o,enable:a}),f(t),i["b"]){var b=i["b"][h];u(t,h,b)}s(t,"getParameter"),s(t,"isEnabled")}return t.state.enable=a,t}function h(e){e.state||d(e,{copyState:!1}),e.state.push()}function b(e){Object(c["a"])(e.state),e.state.pop()}}).call(this,r("c8ba"))},f8cd:function(e,t,r){var n=r("a691");e.exports=function(e){var t=n(e);if(t<0)throw RangeError("The argument can't be less than 0");return t}}}]);